namespace = anb_piracy

country_event = { 												#Rhasail
	id = anb_piracy.1
	title = "anb_piracy.1.t"
	picture = PIRATE_CAPTAINS_eventPicture
	desc = "anb_piracy.1.d"

	fire_only_once = yes

	trigger = {
		has_dlc = "Golden Century"								#Piracy Mechanics
		has_global_flag = golden_age_of_piracy					#Piracy Mechanics
		NOT = { exists = J95 } 									#Pirate Republic does NOT exist
		NOT = { has_reform = pirate_republic_reform }			#Releaser is NOT a Pirate Republic
		OR = {													#Pirate Home Port is colonised and is NOT the only province
			AND = {
				owns_core_province = 1100
				is_subject = no
				num_of_cities = 2
			}
			1100 = {
				owner = {
					is_subject_of = ROOT
					num_of_cities = 2
				}
				is_core = owner
			}
		}
		calc_true_if = {										#At least half of the Ruined Circle Isles provinces are colonised (125)
			amount = 63
			endralliande_region = { type = all is_city = yes }
			ruined_isles_region = { type = all is_city = yes }
			ravenous_isle_region = { type = all is_city = yes }
			north_ruined_isles_region = { type = all is_city = yes }
		}
		1100 = {												#Privateer Requirement
			privateer_power = {
				country = ROOT
				share = 5
			}
		}
		OR = {													#Other Requirements
			1100 = {
				recent_treasure_ship_passage = yes
			}
			1100 = {
				trade_share = {
					country = ROOT
					share = 10
				}
			}
			any_country = {
				capital_scope = {
					region = ruined_isles_region
				}
				war_exhaustion = 5
			}
		}
	}

	immediate = {												#Pirate Home Port is cored
		hidden_effect = {
			1100 = {
				add_core = J95
			}
		}
	}

	mean_time_to_happen = {										#MTTH of 12 months
		months = 12
	}

	option = {													#A - release the pirates
		name = "anb_piracy.1.a"
		custom_tooltip = anb_piracy_rhasail_tt
		hidden_effect = {
			1100 = {											#Release Pirate from Home Port
				owner = { release = J95 }
				change_province_name = "Rhasáil"				#Change Home Port name
				rename_capital = "Rhasáil"						#Change Home Port capital name
				change_culture = high_lorentish					#Accepted Culture capital
				change_religion = ROOT							#True Faith capital
			}
			J95 = {												#Pirate setup
				change_government = republic					##
				add_government_reform = pirate_republic_reform	##Pirate Republic
				adopt_reform_progress = ROOT					##
				change_primary_culture = lencori_half_elf		#Pirate culture
				change_religion = ROOT							#Pirate religion
				change_technology_group = tech_cannorian		#Pirate technology group
				add_republican_tradition = 50					#Starting with 100 RT
				set_ruler = Thirendil							#Legendary Pirate ruler
				pirate_republic_estate_crownland_setup = yes	#Pirate Crownland setup
				country_event = { id = anb_miscevents.22 }		#New Country Setup
				swap_non_generic_missions = yes					#Pirate Missions
				capital_scope = {								#Starting with some units
					build_to_forcelimit = {
						infantry = 0.8
						artillery = 0.2
						heavy_ship = 0.25
						light_ship = 0.25
						transport = 0.25
					}
				}
				add_accepted_culture = high_lorentish			#Special Setup Stuff
			}
		}
	}

	option = {													#B - play as the pirates
		name = "anb_piracy.1.b"
		trigger = {
			ai = no
		}
		custom_tooltip = anb_piracy_rhasail_tt
		hidden_effect = {
			1100 = {											#Release Pirate from Home Port
				owner = { release = J95 }
				change_province_name = "Rhasáil"				#Change Home Port name
				rename_capital = "Rhasáil"						#Change Home Port capital name
				change_culture = high_lorentish					#Accepted Culture capital
				change_religion = ROOT							#True Faith capital
			}
			J95 = {												#Pirate setup
				change_government = republic					##
				add_government_reform = pirate_republic_reform	##Pirate Republic
				adopt_reform_progress = ROOT					##
				change_primary_culture = lencori_half_elf		#Pirate culture
				change_religion = ROOT							#Pirate religion
				change_technology_group = tech_cannorian		#Pirate technology group
				add_republican_tradition = 50					#Starting with 100 RT
				set_ruler = Thirendil							#Legendary Pirate ruler
				pirate_republic_estate_crownland_setup = yes	#Pirate Crownland setup
				country_event = { id = anb_miscevents.22 }		#New Country Setup
				swap_non_generic_missions = yes					#Pirate Missions
				capital_scope = {								#Starting with some units
					build_to_forcelimit = {
						infantry = 0.8
						artillery = 0.2
						heavy_ship = 0.25
						light_ship = 0.25
						transport = 0.25
					}
				}
				add_accepted_culture = high_lorentish			#Special Setup Stuff
			}
		}
		switch_tag = J95
	}

	after = {													#Ruin Proper and Ruined Sea are discovered
		hidden_effect = {
			ruin_proper_superregion = {
				discover_country = J95
			}
			ruined_sea_region = {
				discover_country = J95
			}
		}
	}
}

country_event = { 												#Lamentaire
	id = anb_piracy.2
	title = "anb_piracy.2.t"
	picture = PIRATE_CAPTAINS_eventPicture
	desc = "anb_piracy.2.d"

	fire_only_once = yes

	trigger = {
		has_dlc = "Golden Century"								#Piracy Mechanics
		has_global_flag = golden_age_of_piracy					#Piracy Mechanics
		NOT = { exists = J96 } 									#Pirate Republic does NOT exist
		NOT = { has_reform = pirate_republic_reform }			#Releaser is NOT a Pirate Republic
		OR = {													#Pirate Home Port is colonised and is NOT the only province
			AND = {
				owns_core_province = 1082
				is_subject = no
				num_of_cities = 2
			}
			1082 = {
				owner = {
					is_subject_of = ROOT
					num_of_cities = 2
				}
				is_core = owner
			}
		}
		calc_true_if = {										#At least half of the Ruined Circle Isles provinces are colonised (125)
			amount = 63
			endralliande_region = { type = all is_city = yes }
			ruined_isles_region = { type = all is_city = yes }
			ravenous_isle_region = { type = all is_city = yes }
			north_ruined_isles_region = { type = all is_city = yes }
		}
		1082 = {												#Privateer Requirement
			privateer_power = {
				country = ROOT
				share = 5
			}
		}
		OR = {													#Other Requirements
			1082 = {
				recent_treasure_ship_passage = yes
			}
			1082 = {
				trade_share = {
					country = ROOT
					share = 10
				}
			}
			any_country = {
				capital_scope = {
					region = ruined_isles_region
				}
				war_exhaustion = 5
			}
		}
	}

	immediate = {												#Pirate Home Port is cored
		hidden_effect = {
			1082 = {
				add_core = J96
			}
		}
	}

	mean_time_to_happen = {										#MTTH of 12 months
		months = 12
	}

	option = {													#A - release the pirates
		name = "anb_piracy.2.a"
		custom_tooltip = anb_piracy_lamentaire_tt
		hidden_effect = {
			1082 = {											#Release Pirate from Home Port
				owner = { release = J96 }
				change_province_name = "Lamentaire"				#Change Home Port name
				rename_capital = "Lamentaire"					#Change Home Port capital name
				change_culture = ROOT							#Accepted Culture capital
				change_religion = uelos_cult					#True Faith capital
			}
			J96 = {												#Pirate setup
				change_government = republic					##
				add_government_reform = pirate_republic_reform	##Pirate Republic
				adopt_reform_progress = ROOT					##
				change_primary_culture = ROOT					#Pirate culture
				change_religion = uelos_cult					#Pirate religion
				change_technology_group = ROOT					#Pirate technology group
				add_republican_tradition = 50					#Starting with 100 RT
				define_ruler = {								#Legendary Pirate ruler
					name = "Trystan of Shell Shallows"
					age = 34
					adm = 3
					dip = 2
					mil = 6
					culture = uelairey
					religion = uelos_cult
				}
				add_ruler_personality = legendary_pirate_personality			
				add_ruler_personality = zealot_personality
				add_ruler_personality = cruel_personality								
				pirate_republic_estate_crownland_setup = yes	#Pirate Crownland setup
				country_event = { id = anb_miscevents.22 }		#New Country Setup
				swap_non_generic_missions = yes					#Pirate Missions
				capital_scope = {								#Starting with some units
					build_to_forcelimit = {
						infantry = 0.8
						artillery = 0.2
						heavy_ship = 0.25
						light_ship = 0.25
						transport = 0.25
					}
				}
			}
		}
	}

	option = {													#B - play as the pirates
		name = "anb_piracy.2.b"
		trigger = {
			ai = no
		}
		custom_tooltip = anb_piracy_lamentaire_tt
		hidden_effect = {
			1082 = {											#Release Pirate from Home Port
				owner = { release = J96 }
				change_province_name = "Lamentaire"				#Change Home Port name
				rename_capital = "Lamentaire"					#Change Home Port capital name
				change_culture = ROOT							#Accepted Culture capital
				change_religion = uelos_cult					#True Faith capital
			}
			J96 = {												#Pirate setup
				change_government = republic					##
				add_government_reform = pirate_republic_reform	##Pirate Republic
				adopt_reform_progress = ROOT					##
				change_primary_culture = ROOT					#Pirate culture
				change_religion = uelos_cult					#Pirate religion
				change_technology_group = ROOT					#Pirate technology group
				add_republican_tradition = 50					#Starting with 100 RT
				define_ruler = {								#Legendary Pirate ruler
					name = "Trystan of Shell Shallows"
					age = 34
					adm = 3
					dip = 2
					mil = 6
					culture = uelairey
					religion = uelos_cult
				}
				add_ruler_personality = legendary_pirate_personality			
				add_ruler_personality = zealot_personality
				add_ruler_personality = cruel_personality					
				pirate_republic_estate_crownland_setup = yes	#Pirate Crownland setup
				country_event = { id = anb_miscevents.22 }		#New Country Setup
				swap_non_generic_missions = yes					#Pirate Missions
				capital_scope = {								#Starting with some units
					build_to_forcelimit = {
						infantry = 0.8
						artillery = 0.2
						heavy_ship = 0.25
						light_ship = 0.25
						transport = 0.25
					}
				}
			}
		}
		switch_tag = J96
	}

	after = {													#Ruin Proper and Ruined Sea are discovered
		hidden_effect = {
			ruin_proper_superregion = {							
				discover_country = J96
			}
			ruined_sea_region = {
				discover_country = J96
			}
		}
	}
}

country_event = { 												#Trollshaunt
	id = anb_piracy.3
	title = "anb_piracy.3.t"
	picture = PIRATE_CAPTAINS_eventPicture
	desc = "anb_piracy.3.d"

	fire_only_once = yes

	trigger = {
		has_dlc = "Golden Century"								#Piracy Mechanics
		has_global_flag = golden_age_of_piracy					#Piracy Mechanics
		NOT = { exists = J97 } 									#Pirate Republic does NOT exist
		NOT = { has_reform = pirate_republic_reform }			#Releaser is NOT a Pirate Republic
		OR = {													#Pirate Home Port is colonised and is NOT the only province
			AND = {
				owns_core_province = 2135
				is_subject = no
				num_of_cities = 2
			}
			2135 = {
				owner = {
					is_subject_of = ROOT
					num_of_cities = 2
				}
				is_core = owner
			}
		}
		calc_true_if = {										#At least half of the Ruined Circle Isles provinces are colonised (125)
			amount = 63
			endralliande_region = { type = all is_city = yes }
			ruined_isles_region = { type = all is_city = yes }
			ravenous_isle_region = { type = all is_city = yes }
			north_ruined_isles_region = { type = all is_city = yes }
		}
		2135 = {												#Privateer Requirement
			privateer_power = {
				country = ROOT
				share = 5
			}
		}
		OR = {													#Other Requirements
			2135 = {
				recent_treasure_ship_passage = yes
			}
			2135 = {
				trade_share = {
					country = ROOT
					share = 10
				}
			}
			any_country = {
				capital_scope = {
					region = ruined_isles_region
				}
				war_exhaustion = 5
			}
		}
	}

	immediate = {												#Pirate Home Port is cored
		hidden_effect = {
			2135 = {
				add_core = J97
			}
		}
	}

	mean_time_to_happen = {										#MTTH of 12 months
		months = 12
	}

	option = {													#A - release the pirates
		name = "anb_piracy.3.a"
		custom_tooltip = anb_piracy_trollshaunt_tt
		hidden_effect = {
			2135 = {											#Release Pirate from Home Port
				owner = { release = J97 }
				change_province_name = "Trollshaunt"			#Change Home Port name
				rename_capital = "Trollshaunt"					#Change Home Port capital name
				change_culture = west_dalr						#Accepted Culture capital
				change_religion = ROOT							#True Faith capital
			}
			J97 = {												#Pirate setup
				change_government = republic					##
				add_government_reform = pirate_republic_reform	##Pirate Republic
				adopt_reform_progress = ROOT					##
				change_primary_culture = west_dalr				#Pirate culture
				change_religion = ROOT							#Pirate religion
				change_technology_group = tech_gerudian			#Pirate technology group
				add_republican_tradition = 50					#Starting with 100 RT
				define_ruler = {								#Legendary Pirate ruler
					name = "Vebjorn 'the Quiet'"
					age = 58
					adm = 3
					dip = 6
					mil = 2
					culture = west_dalr
					religion = skaldhyrric_faith
				}
				add_ruler_personality = legendary_pirate_personality			
				add_ruler_personality = kind_hearted_personality
				define_powerful_mage = {
					type = ruler
					necromancy = 1
					illusion = 2
				}								
				pirate_republic_estate_crownland_setup = yes	#Pirate Crownland setup
				country_event = { id = anb_miscevents.22 }		#New Country Setup
				swap_non_generic_missions = yes					#Pirate Missions
				capital_scope = {								#Starting with some units
					build_to_forcelimit = {
						infantry = 0.8
						artillery = 0.2
						heavy_ship = 0.25
						light_ship = 0.25
						transport = 0.25
					}
				}
			}
		}
	}

	option = {													#B - play as the pirates
		name = "anb_piracy.3.b"
		trigger = {
			ai = no
		}
		custom_tooltip = anb_piracy_trollshaunt_tt
		hidden_effect = {
			2135 = {											#Release Pirate from Home Port
				owner = { release = J97 }
				change_province_name = "Trollshaunt"			#Change Home Port name
				rename_capital = "Trollshaunt"					#Change Home Port capital name
				change_culture = west_dalr						#Accepted Culture capital
				change_religion = ROOT							#True Faith capital
			}
			J97 = {												#Pirate setup
				change_government = republic					##
				add_government_reform = pirate_republic_reform	##Pirate Republic
				adopt_reform_progress = ROOT					##
				change_primary_culture = west_dalr				#Pirate culture
				change_religion = ROOT							#Pirate religion
				change_technology_group = tech_gerudian			#Pirate technology group
				add_republican_tradition = 50					#Starting with 100 RT
				define_ruler = {								#Legendary Pirate ruler
					name = "Vebjorn 'the Quiet' "
					age = 58
					adm = 3
					dip = 6
					mil = 2
					culture = west_dalr
					religion = skaldhyrric_faith
				}
				add_ruler_personality = legendary_pirate_personality			
				add_ruler_personality = kind_hearted_personality
				define_powerful_mage = {
					type = ruler
					necromancy = 1
					illusion = 2
				}								
				pirate_republic_estate_crownland_setup = yes	#Pirate Crownland setup
				country_event = { id = anb_miscevents.22 }		#New Country Setup
				swap_non_generic_missions = yes					#Pirate Missions
				capital_scope = {								#Starting with some units
					build_to_forcelimit = {
						infantry = 0.8
						artillery = 0.2
						heavy_ship = 0.25
						light_ship = 0.25
						transport = 0.25
					}
				}
			}
		}
		switch_tag = J97
	}

	after = {													#Ruin Proper and Ruined Sea are discovered
		hidden_effect = {
			ruin_proper_superregion = {							
				discover_country = J97
			}
			ruined_sea_region = {
				discover_country = J97
			}
		}
	}
}


country_event = { 												#Port Palegold
	id = anb_piracy.4
	title = "anb_piracy.4.t"
	picture = PIRATE_CAPTAINS_eventPicture
	desc = "anb_piracy.4.d"

	fire_only_once = yes

	trigger = {
		has_dlc = "Golden Century"								#Piracy Mechanics
		has_global_flag = golden_age_of_piracy					#Piracy Mechanics
		NOT = { exists = J98 } 									#Pirate Republic does NOT exist
		NOT = { has_reform = pirate_republic_reform }			#Releaser is NOT a Pirate Republic
		OR = {													#Pirate Home Port is colonised and is NOT the only province
			AND = {
				owns_core_province = 1099
				is_subject = no
				num_of_cities = 2
			}
			1099 = {
				owner = {
					is_subject_of = ROOT
					num_of_cities = 2
				}
				is_core = owner
			}
		}
		calc_true_if = {										#At least half of the Ruined Circle Isles provinces are colonised (125)
			amount = 63
			endralliande_region = { type = all is_city = yes }
			ruined_isles_region = { type = all is_city = yes }
			ravenous_isle_region = { type = all is_city = yes }
			north_ruined_isles_region = { type = all is_city = yes }
		}
		1099 = {												#Privateer Requirement
			privateer_power = {
				country = ROOT
				share = 5
			}
		}
		OR = {													#Other Requirements
			1099 = {
				recent_treasure_ship_passage = yes
			}
			1099 = {
				trade_share = {
					country = ROOT
					share = 10
				}
			}
			any_country = {
				capital_scope = {
					region = ruined_isles_region
				}
				war_exhaustion = 5
			}
		}
	}

	immediate = {												#Pirate Home Port is cored
		hidden_effect = {
			1099 = {
				add_core = J98
			}
		}
	}

	mean_time_to_happen = {										#MTTH of 12 months
		months = 12
	}

	option = {													#A - release the pirates
		name = "anb_piracy.4.a"
		custom_tooltip = anb_piracy_port_palegold_tt
		hidden_effect = {
			1099 = {											#Release Pirate from Home Port
				owner = { release = J98 }
				change_province_name = "Port Palegold"			#Change Home Port name
				rename_capital = "Port Palegold"				#Change Home Port capital name
				change_culture = ROOT							#Accepted Culture capital
				change_religion = regent_court					#True Faith capital
			}
			J98 = {												#Pirate setup
				change_government = republic					##
				add_government_reform = pirate_republic_reform	##Pirate Republic
				adopt_reform_progress = ROOT					##
				change_primary_culture = ROOT					#Pirate culture
				change_religion = regent_court					#Pirate religion
				change_technology_group = tech_gerudian			#Pirate technology group
				add_republican_tradition = 50					#Starting with 100 RT
				define_ruler = {								#Legendary Pirate ruler
					name = "Adeline of Thiefgallows"
					age = 24
					adm = 2
					dip = 6
					mil = 3
					culture = nathalairey
					religion = regent_court
					female = yes
				}
				define_admiral = {
					name = "Maurise síl Ebenaire"
					shock = 4
					fire = 3
					manuever = 5
					siege = 2
				}
				add_ruler_personality = legendary_pirate_personality			
				add_ruler_personality = craven_personality
				add_ruler_personality = secretive_personality							
				pirate_republic_estate_crownland_setup = yes	#Pirate Crownland setup
				country_event = { id = anb_miscevents.22 }		#New Country Setup
				swap_non_generic_missions = yes					#Pirate Missions
				capital_scope = {								#Starting with some units
					build_to_forcelimit = {
						infantry = 0.8
						artillery = 0.2
						heavy_ship = 0.25
						light_ship = 0.25
						transport = 0.25
					}
				}
			}
		}
	}

	option = {													#B - play as the pirates
		name = "anb_piracy.4.b"
		trigger = {
			ai = no
		}
		custom_tooltip = anb_piracy_port_palegold_tt
		hidden_effect = {
			1099 = {											#Release Pirate from Home Port
				owner = { release = J98 }
				change_province_name = "Port Palegold"			#Change Home Port name
				rename_capital = "Port Palegold"				#Change Home Port capital name
				change_culture = ROOT							#Accepted Culture capital
				change_religion = regent_court					#True Faith capital
			}
			J98 = {												#Pirate setup
				change_government = republic					##
				add_government_reform = pirate_republic_reform	##Pirate Republic
				adopt_reform_progress = ROOT					##
				change_primary_culture = ROOT					#Pirate culture
				change_religion = regent_court					#Pirate religion
				change_technology_group = tech_gerudian			#Pirate technology group
				add_republican_tradition = 50					#Starting with 100 RT
				define_ruler = {								#Legendary Pirate ruler
					name = "Adeline of Thiefgallows"
					age = 24
					adm = 2
					dip = 6
					mil = 3
					culture = nathalairey
					religion = regent_court
					female = yes
				}
				define_admiral = {
					name = "Maurise síl Ebenaire"
					shock = 4
					fire = 3
					manuever = 5
					siege = 2
				}
				add_ruler_personality = legendary_pirate_personality			
				add_ruler_personality = craven_personality
				add_ruler_personality = secretive_personality							
				pirate_republic_estate_crownland_setup = yes	#Pirate Crownland setup
				country_event = { id = anb_miscevents.22 }		#New Country Setup
				swap_non_generic_missions = yes					#Pirate Missions
				capital_scope = {								#Starting with some units
					build_to_forcelimit = {
						infantry = 0.8
						artillery = 0.2
						heavy_ship = 0.25
						light_ship = 0.25
						transport = 0.25
					}
				}
			}
		}
		switch_tag = J98
	}

	after = {													#Ruin Proper and Ruined Sea are discovered
		hidden_effect = {
			ruin_proper_superregion = {							
				discover_country = J98
			}
			ruined_sea_region = {
				discover_country = J98
			}
		}
	}
}