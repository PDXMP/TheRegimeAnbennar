namespace = bawa_simpat


country_event = {
    id = bawa_simpat.1
	title = bawa_simpat.1.t
	desc = bawa_simpat.1.d
	picture = LOOMING_DEATH_eventPicture

	is_triggered_only = yes
	trigger = {
		culture_group = yanglam
		OR = {
			ai = no
			NOT = { has_global_flag = human_player_yanglam }
		}
		NOT = { tag = Y75 }
		NOT = { has_country_flag = bawa_simpat_conversion_rejected }
		NOT = { has_global_flag = bawa_simpat_conversion_started }
		OR = {
			AND = {
				NOT = { stability = 0 }
				corruption = 2
				average_unrest = 2
			}
			crown_land_share = 15
		}
	}

	immediate = { }

	option = {
		name = bawa_simpat.1.a
		ai_chance = {
			factor = 20
			modifier = {
				factor = 1.5
				NOT = { stability = -1 }
			}
			modifier = {
				factor = 1.5
				corruption = 5
			}
			modifier = {
				factor = 1.5
				average_unrest = 4
			}
			modifier = {
				factor = 1.5
				crown_land_share = 5
			}
			modifier = {
				factor = 5
				has_global_flag = variant_conqueror
			}
			modifier = {
				factor = 0
				is_subject = yes
			}
		}
		custom_tooltip = bawa_simpat_warning.tt
		add_country_modifier = {
			name = bawa_simpat_what_are_you_doing
			duration = 3650
		}
		hidden_effect = { country_event = { id = bawa_simpat.3 days = 730 } }
		set_global_flag = bawa_simpat_conversion_started
	}
	option = {
		name = bawa_simpat.1.b
		ai_chance = { factor = 80 }
		add_prestige = 10
		add_adm_power = 50
		add_dip_power = 50
		add_mil_power = 50
		set_country_flag = bawa_simpat_conversion_rejected
	}
}

country_event = {
    id = bawa_simpat.2
	title = bawa_simpat.2.t
	desc = bawa_simpat.2.d
	picture = LOOMING_DEATH_eventPicture

	is_triggered_only = yes
	trigger = {
		culture_group = yanglam
		OR = {
			ai = no
			NOT = { has_global_flag = human_player_yanglam }
		}
		NOT = { tag = Y75 }
		NOT = { has_country_flag = bawa_simpat_conversion_rejected }
		NOT = { has_global_flag = bawa_simpat_conversion_started } 
		OR = {
			ruler_has_num_bad_personality = { amount = 2 }
			calc_true_if = {
				amount = 2
				NOT = { adm = 3 }
				NOT = { dip = 3 }
				NOT = { mil = 3 }
			}
		}
	}

	option = {
		name = bawa_simpat.2.a
		trigger = { 
			ruler_has_num_bad_personality = { amount = 2 }
		}
		ai_chance = {
			factor = 20
			modifier = {
				factor = 3
				ruler_has_num_bad_personality = { amount = 3 }
			}
			modifier = {
				factor = 3
				adm = 1
				dip = 1
				mil = 1
			}
			modifier = {
				factor = 5
				has_global_flag = variant_conqueror
			}
			modifier = {
				factor = 0
				is_subject = yes
			}
		}
		custom_tooltip = bawa_simpat_warning.tt
		random_list = {
			33 = { force_add_ruler_personality = { personality = architectural_visionary_personality } }
			34 = { force_add_ruler_personality = { personality = entrepreneur_personality } }
			33 = { force_add_ruler_personality = { personality = midas_touched_personality } }
		}
		hidden_effect = { country_event = { id = bawa_simpat.3 days = 730 } }
		set_global_flag = bawa_simpat_conversion_started
	}
	option = {
		name = bawa_simpat.2.b
		trigger = {
			calc_true_if = {
				amount = 2
				NOT = { adm = 3 }
				NOT = { dip = 3 }
				NOT = { mil = 3 }
			}
		}
		ai_chance = {
			factor = 20
			modifier = {
				factor = 3
				ruler_has_num_bad_personality = { amount = 3 }
			}
			modifier = {
				factor = 3
				adm = 1
				dip = 1
				mil = 1
			}
			modifier = {
				factor = 5
				has_global_flag = variant_conqueror
			}
			modifier = {
				factor = 0
				is_subject = yes
			}
		}
		custom_tooltip = bawa_simpat_warning.tt
		random_list = {
			33 = { increase_ruler_adm_effect = yes }
			34 = { increase_ruler_dip_effect = yes }
			33 = { increase_ruler_mil_effect = yes }
		}
		hidden_effect = { country_event = { id = bawa_simpat.3 days = 730 } }
		set_global_flag = bawa_simpat_conversion_started
	}
	option = {
		name = bawa_simpat.2.c
		ai_chance = { factor = 80 }
		add_prestige = 10
		add_adm_power = 50
		add_dip_power = 50
		add_mil_power = 50
		set_country_flag = bawa_simpat_conversion_rejected
	}
}

country_event = {
    id = bawa_simpat.3
	title = bawa_simpat.3.t
	desc = bawa_simpat.3.d
	picture = WOUNDED_SOLDIERS_eventPicture

	is_triggered_only = yes
	trigger = { }

	option = {
		name = bawa_simpat.3.a
		ai_chance = { factor = 50 }

		custom_tooltip = bawa_simpat_discover_activity.tt
		capital_scope = { 
			area = {
				limit = { owned_by = ROOT }
				add_province_modifier = {
					name = bawa_simpat_spirit_incursion
					duration = 1095
				}
			}
		}
		hidden_effect = { country_event = { id = bawa_simpat.4 days = 1095 } }
	}
	option = {
		name = bawa_simpat.3.b
		ai_chance = { factor = 50 }

		custom_tooltip = bawa_simpat_talk_with_the_spirit.tt
		add_country_modifier = {
			name = bawa_simpat_weary_populace
			duration = 1825
		}
		hidden_effect = { country_event = { id = bawa_simpat.4 days = 365 } }
	}
}

country_event = {
    id = bawa_simpat.4
	title = bawa_simpat.4.t
	desc = bawa_simpat.4.d
	picture = BIG_STAR_IN_SKY_eventPicture

	is_triggered_only = yes
	trigger = { }

	option = {
		name = bawa_simpat.4.a
		ai_chance = { factor = 100 }

		capital_scope = { 
			area = {
				limit = { owned_by = ROOT }
				add_province_modifier = {
					name = bawa_simpat_spirit_incursion
					duration = 730
				}
			}
		}
		hidden_effect = { country_event = { id = bawa_simpat.9 days = 730 } }
	}

	option = {
		name = bawa_simpat.4.b
		ai_chance = { factor = 0 }

		custom_tooltip = bawa_simpat_expel_spirit
		add_adm_power = -25
		add_dip_power = -25
		add_mil_power = -25
		capital_scope = {
			add_devastation = 10
		}
	}
}

country_event = {
    id = bawa_simpat.5
	title = bawa_simpat.5.t
	desc = bawa_simpat.5.d
	picture = AFRICAN_EXPLORER_eventPicture

	is_triggered_only = yes
	trigger = { }

	option = {
		name = bawa_simpat.5.a
		trigger = { owns = 4765 } #Tlagapatung
		highlight = yes
		ai_chance = { factor = 100 }

		custom_tooltip = bawa_simpat_last_warning.tt
		hidden_effect = { country_event = { id = bawa_simpat.6 days = 90 } }
	}
	option = {
		name = bawa_simpat.5.b
		trigger = { NOT = { owns = 4765 } } #Tlagapatung
		ai_chance = { factor = 100 }

		custom_tooltip = bawa_simpat_last_warning.tt
		4765 = { add_permanent_claim = ROOT }
		custom_tooltip = bawa_simpat_conquer_tlaga.tt
		set_country_flag = bawa_simpat_tlaga_conquest
	}
	option = {
		name = bawa_simpat.5.c
		ai_chance = { factor = 0 }

		clr_global_flag = bawa_simpat_conversion_started
		set_country_flag = bawa_simpat_conversion_rejected
		custom_tooltip = bawa_simpat_rejected_later.tt
		add_country_modifier = {
			name = bawa_simpat_semat_tad_angy
			duration = 3650
		}
	}
}

country_event = {
    id = bawa_simpat.6
	title = bawa_simpat.6.t
	desc = bawa_simpat.6.d
	picture = MAGE_MOON_ALTER_eventPicture

	is_triggered_only = yes
	trigger = { }

	option = {
		name = bawa_simpat.6.a
		ai_chance = { factor = 100 }

		hidden_effect = { country_event = { id = bawa_simpat.8 } }
		custom_tooltip = bawa_simpat_no_way_back.tt
	}
	option = {
		name = bawa_simpat.6.b
		ai_chance = { factor = 0 }

		hidden_effect = { country_event = { id = bawa_simpat.7 } }
		clr_global_flag = bawa_simpat_conversion_started
		set_country_flag = bawa_simpat_conversion_rejected
		custom_tooltip = bawa_simpat_rejected_later.tt
	}
}

country_event = {
    id = bawa_simpat.7
	title = bawa_simpat.7.t
	desc = bawa_simpat.7.d
	picture = DARK_FOREST_eventPicture

	is_triggered_only = yes
	trigger = { }

	option = {
		name = bawa_simpat.7.a
		ai_chance = { factor = 100 }

		remove_country_modifier = bawa_simpat_what_are_you_doing
		add_ruler_modifier = {
			name = bawa_simpat_cope
			duration = -1
		}
	}
}

country_event = {
    id = bawa_simpat.8
	title = bawa_simpat.8.t
	desc = bawa_simpat.8.d
	picture = THE_COVENANT_eventPicture

	is_triggered_only = yes
	trigger = { }

	major = yes
	major_trigger = {
		any_owned_province = {
			continent = asia
			NOT = { superregion = forbidden_lands_superregion }
			NOT = { superregion = gozengun_superregion }
		}
	}

	option = {
		name = bawa_simpat.8.a
		ai_chance = { factor = 100 }

		change_religion = devouring_path
		hidden_effect = {
			set_ruler_religion = devouring_path
			set_heir_religion = devouring_path
			set_consort_religion = devouring_path
			every_owned_province = {
				limit = { culture = ROOT }
				change_religion = devouring_path
			}
		}
		set_country_flag = bawa_simpat_embrace_stone_lady
		custom_tooltip = bawa_simpat_can_form.tt
		hidden_effect = { remove_country_modifier = bawa_simpat_what_are_you_doing }
		add_ruler_modifier = {
			name = bawa_simpat_what_are_you_doing
			duration = -1
		}
		if = {
			limit = {
				ai = yes
				has_global_flag = variant_conqueror
				NOT = { ruler_has_personality = mythical_conqueror_personality }
			}
			force_add_ruler_personality = { personality = mythical_conqueror_personality }
			add_ruler_modifier = {
				name = mythical_conqueror_modifier
				duration = -1
			}
		}
	}
}

country_event = {
    id = bawa_simpat.9
	title = bawa_simpat.9.t
	desc = bawa_simpat.9.d
	picture = DARK_FOREST_eventPicture

	is_triggered_only = yes
	trigger = { }

	option = {
		name = bawa_simpat.9.a
		ai_chance = { factor = 100 }

		custom_tooltip = bawa_simpat_working_with_muse.tt
		add_years_of_income = 1
		hidden_effect = { country_event = { id = bawa_simpat.5 days = 730 } }
	}
}