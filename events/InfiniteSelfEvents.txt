namespace = infinite_self
country_event = { #Pick a new deity when completing a practice
	id = infinite_self.1 
	title = infinite_self.1.t
	desc = infinite_self.1.d
	picture = PURITANS_eventPicture

	is_triggered_only = yes

	trigger = {
		religion = infinite_self
	}

	option = { 
		name = infinite_self.1.aa
		trigger = {
			has_country_modifier = vir_diligence_mastered
			has_country_modifier = vir_cooperation_mastered
			has_country_modifier = vir_forbearance_mastered
			has_country_modifier = vir_honesty_mastered
			has_country_modifier = vir_awareness_mastered
			NOT = { has_country_modifier = vir_total_mastery }
		}
		highlight = yes
		add_country_modifier = {
			name = vir_total_mastery
			duration = -1
		}
		country_event = {
			id = infinite_self.1
			days = 1
		}
	}

	option = {
		name = infinite_self.1.ab
		trigger = { 
			is_religion_enabled = molten_eternity
		}
		highlight = yes
		change_personal_deity = vir_acceptance
		if = {
			limit = { has_country_modifier = vir_acceptance_mastered }
			custom_tooltip = vir_stuck_tt
		}
		else = { 
			custom_tooltip = vir_acceptance_tt
		}
	}

	option = {
		name = infinite_self.1.ac
		trigger = {
			has_global_flag = vir_integration_allowed
		}
		highlight = yes
		change_personal_deity = vir_integration
		if = {
			limit = { has_country_modifier = vir_integration_mastered }
			custom_tooltip = vir_stuck_tt
		}
		else = { 
			custom_tooltip = vir_integration_tt
		}
	}

	option = {
		name = infinite_self.1.ad
		trigger = {
			has_global_flag = vir_transcendance_allowed
		}
		highlight = yes
		change_personal_deity = vir_transcendance
		if = {
			limit = { has_country_modifier = vir_integration_mastered }
			custom_tooltip = vir_stuck_tt
		}
		else = { 
			custom_tooltip = vir_transcendance_tt
		}
	}

	option = {
		name = infinite_self.1.ae
		trigger = {
			has_global_flag = vir_globalism_allowed
		}
		highlight = yes
		change_personal_deity = vir_globalism
		if = { 
			limit = {
				OR = { 
					has_country_modifier = vir_globalism_embraced
					has_country_modifier = vir_globalism_defeated
				}
			}
			custom_tooltip = vir_stuck_tt
		}
		else = { 
			custom_tooltip = vir_globalism_tt
		}
	}

	option = {
		name = infinite_self.1.b
		change_personal_deity = vir_diligence
		if = {
			limit = { has_country_modifier = vir_diligence_mastered }
			custom_tooltip = vir_stuck_tt
		}
		else = {
			custom_tooltip = vir_diligence_tt
		}
	}


	option = {
		name = infinite_self.1.e
		change_personal_deity = vir_cooperation
		if = {
			limit = { has_country_modifier = vir_cooperation_mastered }
			custom_tooltip = vir_stuck_tt
		}
		else = {
			custom_tooltip = vir_cooperation_tt
		}
	}

	option = {
		name = infinite_self.1.f
		change_personal_deity = vir_forbearance
		if = {
			limit = { has_country_modifier = vir_forbearance_mastered }
			custom_tooltip = vir_stuck_tt
		}
		else = {
			custom_tooltip = vir_forbearance_tt
		}
	}

	option = {
		name = infinite_self.1.g
		change_personal_deity = vir_honesty
		if = {
			limit = { has_country_modifier = vir_honesty_mastered }
			custom_tooltip = vir_stuck_tt
		}
		else = {
			custom_tooltip = vir_honesty_tt
		}
	}

	option = {
		name = infinite_self.1.h
		change_personal_deity = vir_awareness
		if = {
			limit = { has_country_modifier = vir_awareness_mastered }
			custom_tooltip = vir_stuck_tt
		}
		else = {
			custom_tooltip = vir_awareness_tt
		}
	}
}

country_event = { # Transcendance Virtue Unlock
	id = infinite_self.2
	title = infinite_self.2.t
	desc = infinite_self.2.d
	picture = PURITANS_eventPicture
	major = yes
	major_trigger = {
		religion = infinite_self
	}
	is_triggered_only = yes
	immediate = {
					set_global_flag = vir_transcendance_allowed
	}
	trigger = {
		NOT = { has_global_flag = vir_transcendance_allowed }
	}
	option = {
		name = infinite_self.2.a
	}
}

country_event = { # Integration Virtue Unlock
	id = infinite_self.3
	title = infinite_self.3.t
	desc = infinite_self.3.d
	picture = PURITANS_eventPicture
	major = yes
	major_trigger = {
		religion = infinite_self
	}
	is_triggered_only = yes
	trigger = {
		NOT = { has_global_flag = vir_integration_allowed }
	}
	immediate = { 
		set_global_flag = vir_integration_allowed
	}
	option = {
		name = infinite_self.3.a
	}
}

country_event = { #Globalism Virtue Unlock
	id = infinite_self.4
	title = infinite_self.4.t
	desc = infinite_self.4.d
	picture = PURITANS_eventPicture
	major = yes
	major_trigger = {
		religion = infinite_self
	}
	is_triggered_only = yes
	trigger = {
		NOT = { has_global_flag = vir_globalism_allowed }
		has_global_flag = insyaa_colony_possible
		owns = 3675
		calc_true_if = {
			oceania = {
				type = all
				owner = { NOT = { capital_scope = { continent = oceania } } }
			}
			amount = 5
		}
	}
	immediate = {
		set_global_flag = vir_globalism_allowed
	}
	option = {
		name = infinite_self.4.a

	}
}

country_event = { #Globalism Colonizer Check
	id = infinite_self.5
	title = infinite_self.5.t
	desc = infinite_self.5.d
	picture = PURITANS_eventPicture
	hidden = yes
	is_triggered_only = yes 
	option = {
		if = { 
			limit = {
				oceania = {
				type = all
						OR = {
							is_empty = yes
							is_wasteland = yes
							owner = { capital_scope = { continent = oceania } }
						}
				}
			}
			set_country_flag = vir_globalism_defeat_flag
		}
	}
}