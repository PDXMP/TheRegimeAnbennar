namespace = flavor_empire

# Empire Pulse Events
# Modifiers in anb_event_modifers under: Empire Pulse Event Modifiers (ctrl + f)
# Loc in flavour_eoa_reforms_I_english.yml: Empire Pulse Event Loc (ctrl + f)

country_event = { # Opportunistic Grandmaster!
	id = flavor_empire.1
	title = flavor_empire.1.t
	desc = flavor_empire.1.d
	picture = GENERALS_DISCUSSING_eventPicture

	fire_only_once = yes
	is_triggered_only = yes 

	trigger = {
    	is_emperor = yes 
    	# has_reform_passed = anbennar_expand_marquis_rank
		A77 = {
			exists = yes 
			has_opinion = {
				who = ROOT
				value = 0
			}
			OR = {
				ruler_has_personality = well_connected_personality
				ruler_has_personality = secretive_personality
				ruler_has_personality = intricate_web_weaver_personality
				ruler_has_personality = silver_tongue_personality
				ruler_has_personality = fierce_negotiator_personality
				ruler_has_personality = embezzler_personality
				ruler_has_personality = sinner_personality
			}
			NOT = {
				ruler_has_personality = incorruptible_personality
				ruler_has_personality = righteous_personality
			}
		}
	}

	mean_time_to_happen = {
		days = 1
	}

	option = {
		name = flavor_empire.1.a # 
		add_imperial_influence = -5
		every_known_country = {
			limit = { is_part_of_hre = yes }
			add_country_modifier = { 
				name = EOA_pulse_1_empire_wide_scandals
				duration = 3650
			}
		}
		A77 = { 
			add_favors = {
				who = ROOT
				amount = 10
			}
		}
	}

	option = {
		name = flavor_empire.1.b # 
		add_imperial_influence = -5

		every_known_country = {
			limit = { is_part_of_hre = yes }
			add_country_modifier = { 
				name = EOA_pulse_1_aldresian_administrators
				duration = 3650
			}
		}

		A77 = { 
			add_favors = {
				who = ROOT
				amount = 10
			}
		}
	}

	option = {
		name = flavor_empire.1.c # 
		add_imperial_influence = 5
		A77 = {
			add_opinion = {
				who  = ROOT
				modifier = EOA_pulse_1_reminded_of_our_place
			}
		}
	}

	option = {
		name = flavor_empire.1.e # 
		add_imperial_influence = -5

		A77 = { 
			add_favors = {
				who = ROOT
				amount = 10
			}
		}

		every_rival_country = {
			add_spy_network_from = {
				who = emperor
				value = 80
			}
		}
	}
}


country_event = { # Paladins Accuse Local of Heresy
	id = flavor_empire.2
	title = flavor_empire.2.t
	desc = flavor_empire.2.d
	picture = RELIGIOUS_TURMOIL_eventPicture

	is_triggered_only = yes 

	trigger = {
		is_part_of_hre = yes
		hre_heretic_religion = corinite
		any_owned_province = {
			religion = corinite
		}
		current_age = age_of_reformation
		estate_influence = {
			estate = estate_church
			influence = 50
		}
		NOT = {
			OR = {
				has_country_modifier = EOA_pulse_2_release_prisoners
				has_country_modifier = EOA_pulse_2_bless_paladins
				has_country_modifier = EOA_pulse_2_common_ground
			}
		}
	}

	mean_time_to_happen = {
		days = 1
	}

	option = {
		name = flavor_empire.2.a # 
		add_country_modifier = { 
			name = EOA_pulse_2_release_prisoners
			duration = 3650
		}	
	}

	option = {
		name = flavor_empire.2.b # 
		add_country_modifier = { 
			name = EOA_pulse_2_bless_paladins
			duration = 3650
		}
	}

	option = {
		name = flavor_empire.2.c # 
		trigger = { religion = infernal_court }
		highlight = yes
		add_army_professionalism = 0.02
		add_corruption = 2
	
	}

	option = {
		name = flavor_empire.2.e # 
		trigger = { 
			OR = {
				ruler_has_personality = silver_tongue_personality
				ruler_has_personality = tolerant_personality
			}
		}
		highlight = yes
		add_country_modifier = { 
			name = EOA_pulse_2_common_ground
			duration = 3650
		}
	}
}


country_event = { # Imperial Politicking
	id = flavor_empire.3
	title = flavor_empire.3.t
	desc = flavor_empire.3.d
	picture = CONSPIRACY_eventPicture

	is_triggered_only = yes 

	trigger = {
        is_part_of_hre = yes 
		NOT = { has_country_modifier = EOA_pulse_3_honest }
		any_elector = {
			OR = {
				alliance_with = ROOT
				is_rival = ROOT
			}
			NOT = {
				has_opinion_modifier = {
					who = ROOT
					modifier = EOA_pulse_3_spill_beans
				}
				has_opinion_modifier = {
					who = ROOT
					modifier = EOA_pulse_3_hidden_beans
				}
			}
		}
	}

	immediate = { 
		hidden_effect = {
			random_elector = {
				limit = {
					OR = {
						alliance_with = ROOT
						is_rival = ROOT
					}
					NOT = {
						has_opinion_modifier = {
							who = ROOT
							modifier = EOA_pulse_3_spill_beans
						}
						has_opinion_modifier = {
							who = ROOT
							modifier = EOA_pulse_3_hidden_beans
						}
					} 
				}
				save_event_target_as = elector_politicking
			}
		}
	}

	mean_time_to_happen = {
		days = 1
	}

	option = {
		name = flavor_empire.3.a # 
		trigger = { event_target:elector_politicking = { alliance_with = ROOT } }
		ai_chance = {
			factor = 33
		}
		if = {
			limit = { ai = yes }
			break_alliance = event_target:elector_politicking
		}
		event_target:elector_politicking = {
			add_opinion = {
				who  = ROOT
				modifier = EOA_pulse_3_spill_beans
			}
		}
		add_country_modifier = {
			name = EOA_pulse_3_honest
			duration = 1825
		}
	}

	option = {
		name = flavor_empire.3.b # 
		trigger = { event_target:elector_politicking = { is_rival = ROOT } }
		ai_chance = {
			factor = 33
		}
		event_target:elector_politicking = {
			add_opinion = {
				who  = ROOT
				modifier = EOA_pulse_3_spill_beans
			}
			add_casus_belli = {
				target = ROOT
				type = cb_insult
				months = 120
			}
		}
		add_power_projection = { 
			type = mission_rewards_power_projection 
			amount = 10
		}
	}

	option = {
		name = flavor_empire.3.c 
		ai_chance = {
			factor = 33
			modifier = {
				factor = 3
				historical_friend_with = event_target:elector_politicking
			}
		} 
		reverse_add_opinion = {
			who  = event_target:elector_politicking
			modifier = EOA_pulse_3_hidden_beans
		}
		
		event_target:elector_politicking = {
			add_favors = {
				who =  ROOT
				amount = 10
			}
		}
	}
}


country_event = { # Romeo and Juliet / Lilac Wars Edition
	id = flavor_empire.4
	title = flavor_empire.4.t
	desc = flavor_empire.4.d
	picture = THEATRE_eventPicture

	is_triggered_only = yes 

	trigger = {
		is_part_of_hre = yes 
		NOT = { is_year = 1500 }
		has_heir = yes
		heir_age = 15
		ai = no
		any_enemy_country = {
			OR = {
				has_opinion_modifier = {
					modifier = lilac_wars_rose_party_enemy
					who = ROOT
				}
				has_opinion_modifier = {
					modifier = lilac_wars_moon_party_enemy
					who = ROOT
				}
			}
			has_heir = yes
			heir_age = 15
			NOT = { has_country_modifier = EOA_4_taken_heir }
			NOT = { has_country_modifier = EOA_4_exiled_heir }
		}
		NOT = { has_country_modifier = EOA_4_exiled_heir }
		NOT = { has_country_modifier = EOA_4_taken_heir }
	}

	immediate = {
		hidden_effect = {
			random_enemy_country = {
				limit = {
					OR = {
						has_opinion_modifier = {
							modifier = lilac_wars_rose_party_enemy
							who = ROOT
						}
						has_opinion_modifier = {
							modifier = lilac_wars_moon_party_enemy
							who = ROOT
						}
					}
					NOT = { has_country_modifier = EOA_4_taken_heir }
					NOT = { has_country_modifier = EOA_4_exiled_heir }
				}
				save_event_target_as = sins_of_father
			}
		}
	}

	mean_time_to_happen = {
		days = 1
	}

	option = {
		name = flavor_empire.4.a # 
		ai_chance = {
			factor = 0
		}
		custom_tooltip = flavor_empire.4.a.tt
		add_opinion = {
			who  = event_target:sins_of_father
			modifier = EOA_pulse_4_sins_of_father
		}
		add_country_modifier = {
			name = EOA_4_exiled_heir 
			duration = 7300
			hidden = yes
		}
		exile_heir_as = EOA_4_pulse_sins_of_father_heir
		add_casus_belli = {
			type = cb_insult
			months = 240
			target =  event_target:sins_of_father
		}
		event_target:sins_of_father = {
			add_country_modifier = {
				name = EOA_4_taken_heir 
				duration = 7300
				hidden = yes
			}
		}
	}

	option = {
		name = flavor_empire.4.b # 
		ai_chance = {
			factor = 1 #AI will not understand they must go to war to get back heir so they auto choose b
		}
		add_opinion = {
			who  = event_target:sins_of_father
			modifier = EOA_pulse_4_sins_of_father_friend
		}
		add_legitimacy = -20
		create_marriage = event_target:sins_of_father
	}
}







country_event = { # Dockyard Gangs
	id = flavor_empire.5
	title = flavor_empire.5.t
	desc = flavor_empire.5.d
	picture = SOLDIER_INFIGHTING_eventPicture

	is_triggered_only = yes 

	trigger = {
        is_part_of_hre = yes
		any_owned_province = {
			OR = {
				region = west_dameshead_region
				region = east_dameshead_region
				region = damescrown_region
			}
			has_port = yes
		}
		is_year = 1480
	}

	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = { 
					OR = {
						region = west_dameshead_region
						region = east_dameshead_region
						region = damescrown_region
					}
					has_port = yes
				}
				save_event_target_as = dockyard_province
			}
		}
	}


	mean_time_to_happen = {
		days = 1
	}

	option = {
		name = flavor_empire.5.a # 
		event_target:dockyard_province = {
			add_province_modifier = {
				name = EOA_5_pulse_organized_gangs
				duration = 3650
			}
		}
		if = {
			limit = {
				OR = {
					ruler_has_personality = greedy_personality
					ruler_has_personality = fierce_negotiator_personality
					ruler_has_personality = embezzler_personality
				}
			}
			add_adm_power = -50
			add_treasury = 250
		} 
		else = {
			add_adm_power = -50
			add_treasury = 100
		}
	}

	option = {
		name = flavor_empire.5.b # 
		event_target:dockyard_province = {
			add_province_modifier = {
				name = EOA_5_pulse_port_guards
				duration = 3650
			}
		}
		if = {
			limit = {
				OR = {
					ruler_has_personality = lawgiver_personality 
					ruler_has_personality = strict_personality
					ruler_has_personality = zealot_personality
				}
			}
			add_mil_power = -25
			add_corruption = -3
		} else = {
			add_mil_power = -50
			add_corruption = -2
		}
	}
}





country_event = { # Intervice Rivalry
	id = flavor_empire.6
	title = flavor_empire.6.t
	desc = flavor_empire.6.d
	picture = KNIGHTS_eventPicture

	is_triggered_only = yes 

	trigger = {
        is_part_of_hre = yes
		exists = A77
		exists = A85
		NOT = {
			tag = A77
			tag = A85
		}
	}

	mean_time_to_happen = {
		days = 1
	}

	

	immediate = {
		hidden_effect = { 
			random_owned_province = {
				save_event_target_as = mage_clash_province
			}
		}
	}

	option = {
		name = flavor_empire.6.a # 
		event_target:mage_clash_province = {
			add_devastation = 30
		}
		A85 = {
			add_opinion = {
				who  = ROOT
				modifier = EOA_pulse_6_support 
			}
		}
		A77 = {
			add_opinion = {
				who  = ROOT
				modifier = EOA_pulse_6_assail
			}
		}
		define_advisor = {
			type = court_mage
			skill = 2
			discount = yes
		}
	}

	option = {
		name = flavor_empire.6.b # 
		event_target:mage_clash_province = {
			add_devastation = 30
		}
		A77 = {
			add_opinion = {
				who  = ROOT
				modifier = EOA_pulse_6_support 
			}
		}
		A85 = {
			add_opinion = {
				who  = ROOT
				modifier = EOA_pulse_6_assail
			}
		}
		define_advisor = {
			type = commandant
			skill = 2
			discount = yes
		}
	}

	option = {
		name = flavor_empire.6.c # 
		event_target:mage_clash_province = {
			add_devastation = 30
		}
		A85 = {
			add_opinion = {
				who  = ROOT
				modifier = EOA_pulse_6_assail
			}
		}
		A77 = {
			add_opinion = {
				who  = ROOT
				modifier = EOA_pulse_6_assail
			}
		}
		define_advisor = {
			type = diplomat
			skill = 2
			discount = yes
		}
		add_country_modifier = {
			name = EOA_6_pulse_stalwart
			duration = 1825
		}
	}
}

country_event = { #Crothani Chicanery
	id = flavor_empire.14
	title = flavor_empire.14.t
	desc = flavor_empire.14.d
	picture = NOBLE_ESTATE_eventPicture
	
	fire_only_once = yes
	is_triggered_only = yes

	trigger = {
		tag = A25
		is_emperor = no
		A54 = { is_a_free_city = yes }
		current_age = age_of_discovery
	}

	option = {
		name = flavor_empire.14.a
		ai_chance = { factor = 80 }
		add_prestige = 5
	}

	option = {
		name = flavor_empire.14.b
		ai_chance = { factor = 20 }
		emperor = {
			country_event = {
				id = flavor_empire.15
				days = 14
			}
		}
		custom_tooltip = damescrown_uncity_crothan_tt
		add_prestige = 5
	}
}

country_event = { #Damescrown's Ultimatum
	id = flavor_empire.15
	title = flavor_empire.15.t
	desc = flavor_empire.15.d
	picture = SEJM_eventPicture
	
	is_triggered_only = yes

	option = {
		name = flavor_empire.15.a
		ai_chance = { factor = 65 }
		add_imperial_influence = 5
		reverse_add_opinion = {
			who = A54
			modifier = damescrown_uncity_crothan_failed_emperor_good
		}
		reverse_add_opinion = {
			who = A25
			modifier = damescrown_uncity_crothan_failed_emperor_bad
		}
		A25 = {
			country_event = {
				id = flavor_empire.16
			}
		}
	}

	option = {
		name = flavor_empire.15.b
		ai_chance = { factor = 35 }
		add_imperial_influence = -5
		custom_tooltip = damescrown_uncity_crothan_actually_tt
		add_country_modifier = {
			name = EOA_15_uncitied_crothan
			duration = 1825
		}
		reverse_add_opinion = {
			who = A54
			modifier = damescrown_uncity_crothan_succeded_emperor_bad
		}
		reverse_add_opinion = {
			who = A25
			modifier = damescrown_uncity_crothan_succeded_emperor_good
		}
		hidden_effect = {
			A54 = {
				remove_government_reform = free_city
			}
		}
		A25 = {
			country_event = {
				id = flavor_empire.17
			}
		}
	}
}

country_event = { #Emperor Refuses
	id = flavor_empire.16
	title = flavor_empire.16.t
	desc = flavor_empire.16.d
	picture = OVEREXTENSION_eventPicture

	is_triggered_only = yes

	option = {
		name = flavor_empire.16.a
		reverse_add_opinion = {
			who = A54
			modifier = damescrown_uncity_crothan_failed
		}
		add_trust = {
			who = A54
			value = -20
		}
		add_prestige = -20
		add_country_modifier = {
			name = EOA_16_failed_to_uncity_crothan
			duration = 3650 #10 years
		}
	}

}

country_event = { #Emperor Accepts
	id = flavor_empire.17
	title = flavor_empire.17.t
	desc = flavor_empire.17.d
	picture = CORRUPTION_eventPicture

	is_triggered_only = yes

	option = {
		name = flavor_empire.17.a
		reverse_add_opinion = {
			who = A54
			modifier = damescrown_uncity_crothan
		}
		add_trust = {
			who = A54
			value = -100
		}
		add_permanent_claim = 915
		break_alliance = A54
		remove_guarantee = A54
		A54 = {
			country_event = {
				id = flavor_empire.18
			}
		}
	}
}

country_event = { #Crownsman Turnabout
	id = flavor_empire.18
	title = flavor_empire.18.t
	desc = flavor_empire.18.d
	picture = GENERALS_DISCUSSING_eventPicture

	is_triggered_only = yes

	option = {
		name = flavor_empire.18.a
		add_truce_with = A25
		add_country_modifier = {
			name = EOA_18_diplo_crothan
			duration = 3650
		}
		A25 = {
			country_event = {
				id = flavor_empire.19
				days = 7
			}
		}
		ai_chance = { factor = 55 }
	}

	option = {
		name = flavor_empire.18.b
		add_country_modifier = {
			name = EOA_18_military_crothan
			duration = 9125
		}
		capital_scope = {
			infantry = A54
			infantry = A54
			infantry = A54
			infantry = A54
			infantry = A54
		}
		ai_chance = { factor = 35 }
	}

	option = {
		name = flavor_empire.18.c
		915 = {
			cede_province = A25
		}
		ai_chance = { factor = 10 }
	}

}

country_event = { #A Minor Complication
	id = flavor_empire.19
	title = flavor_empire.19.t
	desc = flavor_empire.19.d
	picture = ACCUSATION_eventPicture

	is_triggered_only = yes

	option = {
		name = flavor_empire.19.a
		add_truce_with = A54
		add_country_modifier = {
			name = EOA_19_ae_crothan
			duration = 3650
		}
	}

}

country_event = { #Orcish Petitioners, orcs minorities seek entry to the EoA
	id = flavor_empire.20
	title = flavor_empire.20.t
	desc = flavor_empire.20.d
	picture = DIVERSE_COURT_eventPicture
	
	is_triggered_only = yes
	fire_only_once = yes
	major = yes

	trigger = {
		is_emperor = yes
		is_religion_enabled = corinite
	}

	option = {
		name = flavor_empire.20.a
		capital_scope = {
			add_orcish_minority_size_effect = yes
		}
		medium_increase_of_orcish_tolerance_effect = yes
		set_global_flag = EOA_orcish_rights_settlement
		custom_tooltip = EOA_20_pulse_accept_TT
		ai_chance = {
			factor = 5
			modifier = {
				factor = 4
				wants_to_increase_tolerance_orcish = yes
			}
			modifier = {
				factor = 4
				religion = corinite
			}
			modifier = {
				factor = 3
				OR = {
					ruler_has_personality = free_thinker_personality
					ruler_has_personality = tolerant_personality
					ruler_has_personality = kind_hearted_personality
				}
			}
		}
	}

	option = {
		name = flavor_empire.20.b
		add_country_modifier = {
			name = EOA_20_pulse_unrest
			duration = 7300
		}
		set_global_flag = EOA_20_pulse_orcs_denied
		add_imperial_influence = 5
		custom_tooltip = EOA_20_pulse_deny_TT
		hidden_effect = {
			country_event = {
				id = flavor_empire.20001
				days = 60
			}
		}
			250 = { 
				owner = { 
					country_event = {
						id = flavor_empire.21
						days = 30
					}
				}
			}
			215 = {
				owner = {
					country_event = {
						id = flavor_empire.21
						days = 30
					}
				}
			}
			303 = {
				owner = {
					country_event = {
						id = flavor_empire.21
						days = 30
					}
				}
			}
			260 = {
				owner = {
					country_event = {
						id = flavor_empire.21
						days = 30
					}
				}
			}
			270 = {
				owner = {
					country_event = {
						id = flavor_empire.21
						days = 30
					}
				}
			}
		
		ai_chance = {
			factor = 5
			modifier = {
				factor = 4
				wants_to_decrease_tolerance_orcish = yes
			}
			modifier = {
				factor = 4
				AND = {
					religion = regent_court
					hre_leagues_enabled = yes
				}
			}
			modifier = {
				factor = 3
				OR = {
					ruler_has_personality = strict_personality
					ruler_has_personality = cruel_personality
					ruler_has_personality = craven_personality
				}
			}
		}
	}
}

country_event = { #housekeeping event to clear denial flag, so flavor_empire.8 doesn't get fraudulently enabled if the orcs are turned away
	id = flavor_empire.20001
	title = flavor_empire.20001.t
	desc = flavor_empire.20001.d
	picture = COMET_SIGHTED_eventPicture

	is_triggered_only = yes
	fire_only_once = yes
	hidden = yes

	option = {
		name = flavor_empire.20001.a
		clr_global_flag = EOA_20_pulse_orcs_denied
	}
}

country_event = { #Orcish Settlers in the Empire
	id = flavor_empire.21
	title = flavor_empire.21.t
	desc = {
		trigger = {
			has_global_flag = EOA_orcish_rights_settlement
		}
		desc = flavor_empire.21.d1
	}
	desc = {
		trigger = {
			NOT = {
				has_global_flag = EOA_orcish_rights_settlement
			}
		}
		desc = flavor_empire.21.d2
	}
	picture = ORC_WITH_AXE_eventPicture

	is_triggered_only = yes

	trigger = {
		is_part_of_hre = yes
		OR = {
			has_global_flag = EOA_orcish_rights_settlement
			AND = {
				has_global_flag = EOA_20_pulse_orcs_denied
				is_emperor = no
			}
		}
		NOT = {
			has_country_modifier = EOA_21_pulse_cooldown
		}
		any_owned_province = {
			NOT = { fast_has_pop_of_race = { race = orcish } }
		}
	}

	immediate = {
		hidden_effect = {
			add_country_modifier = {
				name = EOA_21_pulse_cooldown
				duration = 3650
				hidden = yes
			}
			if = {
				limit = {
					owns_core_province = 250
					250 = { NOT = { fast_has_pop_of_race = { race = orcish } } }
				}
				250 = { save_event_target_as = eoa_21_pulse_target }
			}
			else_if = {
				limit = {
					owns_core_province = 215
					215 = { NOT = { fast_has_pop_of_race = { race = orcish } } }
				}
				215 = {
					save_event_target_as = eoa_21_pulse_target
				}
			}
			else_if = {
				limit = {
					owns_core_province = 303
					303 = { NOT = { fast_has_pop_of_race = { race = orcish } } }
				}
				303 = { save_event_target_as = eoa_21_pulse_target }
			}
			else_if = {
				limit = {
					owns_core_province = 260
					260 = { NOT = { fast_has_pop_of_race = { race = orcish } } }
				}
				260 = { save_event_target_as = eoa_21_pulse_target }
			}
			else_if = {
				limit = {
					owns_core_province = 270
					270 = { NOT = { fast_has_pop_of_race = { race = orcish } } }
				}
				270 = { save_event_target_as = eoa_21_pulse_target }
			}
			else = {
				random_owned_province = {
					limit = { NOT = { fast_has_pop_of_race = { race = orcish } } }
					save_event_target_as = eoa_21_pulse_target
				}
			}
		}
	}

	goto = eoa_21_pulse_target

	option = {
		name = flavor_empire.21.a
		trigger = {
			low_tolerance_orcish_race_trigger = yes
		}
		medium_increase_of_orcish_tolerance_effect = yes
		event_target:eoa_21_pulse_target = {
			add_orcish_minority_size_effect = yes
			add_local_autonomy = 10
			add_unrest = 4
		}
		ai_chance = {
			factor = 5
			modifier = {
				factor = 4
				wants_to_increase_tolerance_orcish = yes
			}
			modifier = {
				factor = 3
				OR = {
					ruler_has_personality = kind_hearted_personality
					ruler_has_personality = tolerant_personality
					ruler_has_personality = conqueror_personality
				}
			}
		}
	}

	option = {
		name = flavor_empire.21.b
		trigger = {
			OR = {
				medium_tolerance_orcish_race_trigger = yes
				high_tolerance_orcish_race_trigger = yes
			}
		}
		highlight = yes
		small_increase_of_orcish_tolerance_effect = yes
		event_target:eoa_21_pulse_target = {
			add_local_autonomy = 10
			add_orcish_minority_size_effect = yes
			add_random_development = 1
		}
		ai_chance = {
			factor = 40 #green event choice, of course they take it
		}
	}

	option = {
		name = flavor_empire.21.c
		event_target:eoa_21_pulse_target = {
			add_orcish_minority_size_effect = yes
			add_local_autonomy = 20
		}
		add_yearly_manpower = 0.5
		small_increase_of_orcish_tolerance_effect = yes
		ai_chance = {
			factor = 4
			modifier = {
				factor = 3
				NOT = {
					manpower_percentage = 0.51
				}
			}
			modifier = {
				factor = 5
				NOT = {
					manpower_percentage = 0.11
				}
			}
			modifier = {
				factor = 2
				personality = ai_militarist
			}
		}
	}

	option = {
		name = flavor_empire.21.e
		add_country_modifier = {
			name = EOA_20_pulse_unrest
			duration = 7200
		}
		if = {
			limit = {
				has_global_flag = EOA_orcish_rights_settlement
			}
			medium_decrease_of_orcish_tolerance_effect = yes
			add_opinion = {
				who = emperor
				modifier = EOA_broke_settlement_law
			}
			reverse_add_opinion = {
				who = emperor
				modifier = EOA_broke_settlement_law	
			}
		}
		ai_chance = {
			factor = 5
			modifier = {
				factor = 4
				wants_to_decrease_tolerance_orcish = yes
			}
			modifier = {
				factor = 4 
				OR = {
					ruler_has_personality = cruel_personality
					ruler_has_personality = craven_personality
					ruler_has_personality = careful_personality
				}
			}
		}
	}
}

country_event = { #On The Matter of Dragons -not quite an imperial pulse event, but related to the kobold migration events
	id = flavor_empire.22
	title = flavor_empire.22.t
	desc = flavor_empire.22.d
	picture = DRAGON_FLY_eventPicture

	is_triggered_only = yes
	fire_only_once = yes
	major = yes

	trigger = {
		capital_scope = {
			continent = europe
		}
		num_of_owned_provinces_with = {
			value = 5
			culture_group = kobold
		}
		NOT = {
			culture_group = kobold
		}
	}

	option = {
		name = flavor_empire.22.a
		medium_increase_of_kobold_tolerance_effect = yes
		every_owned_province = {
			limit = {
				culture_group = kobold
			}
			add_nationalism = -5
			add_local_autonomy = 30
		}
		ai_chance = {
			factor = 5
			modifier = {
				factor = 4
				wants_to_increase_tolerance_kobold = yes
			}
			modifier = {
				factor = 4
				OR = {
					tag = A19
					tag = A06
					tag = A80
				}
			}
		}
	}

	option = {
		name = flavor_empire.22.b
		custom_tooltip = flavor_empire.22.b_TT
		ai_chance = {
			factor = 5
			modifier = {
				factor = 4
				wants_to_maintain_tolerance_kobold = yes
			}
		}
	}

	option = {
		name = flavor_empire.22.c
		large_decrease_of_kobold_tolerance_effect = yes
		generic_start_purge = { race = kobold free = yes }
		hidden_effect = {
			set_global_flag = EOA_22_pulse_kobold_migration_flag
			189 = {
				province_event = { #to clear the flag after 50 years
					id = flavor_empire.22001 
					days = 18250
				} 
			}
			18 = {
				owner = {
					country_event = {
						id = flavor_empire.23
					}
				}
			}
			57 = {
				owner = {
					country_event = {
						id = flavor_empire.23
					}
				}
			}
			69 = {
				owner = {
					country_event = {
						id = flavor_empire.24
					}
				}
			}
			102 = {
				owner = {
					country_event = {
						id = flavor_empire.24
					}
				}
			}
		}
		ai_chance = {
			factor = 2
			modifier = {
				factor = 4
				wants_to_decrease_tolerance_kobold = yes
			}
			modifier = {
				factor = 10
				OR = {
					tag = A05
					tag = A52
				}
			}
		}
	}
}

province_event = { #housekeeping event
	id = flavor_empire.22001
	title = flavor_empire.22001.t
	desc = flavor_empire.22001.d
	picture = COMET_SIGHTED_eventPicture

	is_triggered_only = yes
	hidden = yes
	fire_only_once = yes

	option = {
		name = flavor_empire.22001.a
		clr_global_flag = EOA_22_pulse_kobold_migration_flag
		ai_chance = {
			factor = 1
		}
	}
}

country_event = { #strangers under our feet -kobolds into EoA
	id = flavor_empire.23
	title = flavor_empire.23.t
	desc = {
		trigger = {
			has_global_flag = EOA_kobold_rights_settlement
		}
		desc = flavor_empire.23.d1
	}
	desc = {
		trigger = {
			NOT = {
				has_global_flag = EOA_kobold_rights_settlement
			}
		}
		desc = flavor_empire.23.d2
	}
	picture = KOBOLD_SLAVE_eventPicture

	is_triggered_only = yes
	
	trigger = {
		is_part_of_hre = yes
		has_global_flag = EOA_22_pulse_kobold_migration_flag
		capital_scope = {
			OR = {
				region = damescrown_region
				region = west_dameshead_region
				region = alenic_frontier_region
				region = small_country_region
				region = lencenor_region
			}
		}
		NOT = { has_country_modifier = EOA_23_pulse_cooldown }
	}

	mean_time_to_happen = {
		days = 1
		modifier = {
			factor = 3
			has_global_flag = EOA_kobold_rights_settlement
		}
	}

	immediate = {
		hidden_effect = {
			add_country_modifier = {
				name = EOA_23_pulse_cooldown
				duration = 5475
				hidden = yes
			}
			emperor = {
				country_event = {
					id = flavor_empire.25
				}
			}
			if = {
				limit = {
					owns_core_province = 18
					18 = { NOT = { fast_has_pop_of_race = { race = kobold } } }
				}
			18 = {
				save_event_target_as = eoa_23_pulse_target
				add_kobold_minority_size_effect = yes
			}
			}
			else_if = {
				limit = {
					owns_core_province = 57
					57 = { NOT = { fast_has_pop_of_race = { race = kobold } } }
				}
				57 = {
					save_event_target_as = eoa_23_pulse_target
					add_kobold_minority_size_effect = yes
				}
			}
			else= {
				random_owned_province = {
					limit = { NOT = { fast_has_pop_of_race = { race = kobold } } }
					save_event_target_as = eoa_23_pulse_target
				}
			}
		}
	}

	option = {
		name = flavor_empire.23.a
		trigger = {
				low_tolerance_kobold_race_trigger = yes
		}
		medium_increase_of_kobold_tolerance_effect = yes
		event_target:eoa_23_pulse_target = {
			add_kobold_minority_size_effect = yes
			add_devastation = 5
			add_province_modifier = {
				name = EOA_23_pulse_kobold_unrest
				duration = 7300
			}
		}
		ai_chance = {
			factor = 5
			modifier = {
				factor = 4
				wants_to_increase_tolerance_kobold = yes
			}
			modifier = {
				factor = 4
				has_estate = estate_artificers
			}
			modifier = {
				factor = 2
				OR = {
					ruler_has_personality = kind_hearted_personality
					ruler_has_personality = tolerant_personality
					ruler_has_personality = naive_personality
				}
			}
		}
	}

	option = {
		name = flavor_empire.23.b
		trigger = {
			OR = {
				medium_tolerance_kobold_race_trigger = yes
				high_tolerance_kobold_race_trigger = yes
			}	
		}
		highlight = yes
		small_increase_of_kobold_tolerance_effect = yes
		event_target:eoa_23_pulse_target = {
			add_kobold_minority_size_effect = yes
			add_province_modifier = {
				name = EOA_23_pulse_craftsbolds
				duration = 3650
			}
		}
		ai_chance = {
			factor = 40 #green option
		}
	}

	option = {
		name = flavor_empire.23.c
		medium_decrease_of_kobold_tolerance_effect = yes
		event_target:eoa_23_pulse_target = {
			add_province_modifier = {
				name = EOA_23_pulse_secured_foundations
				duration = 1825
			}
		}
		if = {
			limit = {
				has_global_flag = EOA_kobold_rights_settlement
			}
			add_opinion = {
				who = emperor
				modifier = EOA_broke_settlement_law
			}
			reverse_add_opinion = {
				who = emperor
				modifier = EOA_broke_settlement_law
			}
		}
		ai_chance = {
			factor = 5
			modifier = {
				factor = 4
				wants_to_decrease_tolerance_kobold = yes
			}
			modifier = {
				factor = 2
				OR = {
					ruler_has_personality = cruel_personality
					ruler_has_personality = strict_personality
					ruler_has_personality = zealot_personality
				}
			}
		}
	}
}

country_event = { #flight into Lencenor
	id = flavor_empire.24
	title = flavor_empire.24.t
	desc = flavor_empire.24.d
	picture = DRAGON_FLY_eventPicture

	is_triggered_only = yes

	trigger = {
		capital_scope = { region = lencenor_region }
		has_global_flag = EOA_22_pulse_kobold_migration_flag
		NOT = { has_country_modifier = EOA_24_pulse_cooldown }
	}

	immediate = {
		hidden_effect = {
			add_country_modifier = {
				name = EOA_24_pulse_cooldown
				duration = 7300
				hidden = yes
			}
			if = {
				limit = {
					owns_core_province = 69
					69 = { NOT = { fast_has_pop_of_race = { race = kobold } } }
				}
				69 = {
					save_event_target_as = eoa_24_pulse_target
				}
			}
			else_if = {
				limit = {
					owns_core_province = 102
					102 = { NOT = { fast_has_pop_of_race = { race = kobold } } }
				}
				102 = {
					save_event_target_as = eoa_24_pulse_target
				}
			}
			else = {
				random_owned_province = {
					limit = { NOT = { fast_has_pop_of_race = { race = kobold } } }
					save_event_target_as = eoa_24_pulse_target
				}
			}
		}
	}

	option = {
		name = flavor_empire.24.a
		event_target:eoa_24_pulse_target = {
			add_kobold_minority_size_effect = yes
			add_province_modifier = {
				name = EOA_24_pulse_kobold_lair
				duration = 7300
			}
		}
		ai_chance = {
			factor = 5
			modifier = {
				factor = 4
				wants_to_maintain_tolerance_kobold = yes
			}
		}
	}

	option = {
		name = flavor_empire.24.b
		event_target:eoa_24_pulse_target = {
			add_kobold_minority_size_effect = yes
			add_local_autonomy = 20
		}
		medium_increase_of_kobold_tolerance_effect = yes
		ai_chance = {
			factor = 5
			modifier = {
				factor = 4
				wants_to_increase_tolerance_kobold = yes
			}
			modifier = {
				factor = 2
				OR = {
					ruler_has_personality = kind_hearted_personality
					ruler_has_personality = greedy_personality
					ruler_has_personality = tolerant_personality
				}
			}
		}
	}

	option = {
		name = flavor_empire.24.c
		medium_decrease_of_kobold_tolerance_effect = yes
		add_yearly_manpower = -0.1
		add_treasury = 25
		ai_chance = {
			factor = 4
			modifier = {
				factor = 4
				wants_to_decrease_tolerance_kobold = yes
			}
			modifier = {
				factor = 2
				OR = {
					ruler_has_personality = cruel_personality
					ruler_has_personality = strict_personality
					ruler_has_personality = architectural_visionary_personality
				}
			}
		}
	}

}

country_event = { #kobolds on imperial soil - kobold rights event
	id = flavor_empire.25
	title = flavor_empire.25.t
	desc = flavor_empire.25.d
	picture = DIVERSE_COURT_eventPicture

	is_triggered_only = yes
	major = yes
	fire_only_once = yes

	trigger = {
		is_emperor = yes
	}

	option = {
		name = flavor_empire.25.a
		hidden_effect = { set_global_flag = EOA_kobold_rights_settlement }
		add_country_modifier = {
			name = EOA_25_pulse_unrest
			duration = 7300
		}
		medium_increase_of_kobold_tolerance_effect = yes
		capital_scope = {
			add_kobold_minority_size_effect = yes
		}
		custom_tooltip = EOA_25_pulse_accept_tt
		ai_chance = {
			factor = 5
			modifier = {
				factor = 2
				wants_to_increase_tolerance_kobold = yes
			}
			modifier = {
				factor = 1.5
				OR = {
					ruler_has_personality = sinner_personality
					ruler_has_personality = kind_hearted_personality
					ruler_has_personality = tolerant_personality
				}
			}
			modifier = {
				factor = 1.5
				has_estate = estate_artificers
			}
			modifier = {
				factor = 0.75
				OR = {
					ruler_has_personality = cruel_personality
					ruler_has_personality = strict_personality
					ruler_has_personality = architectural_visionary_personality
				}
			}
			modifier = {
				factor = 0.5
				wants_to_decrease_tolerance_kobold = yes
			}
		}
	}

	option = {
		name = flavor_empire.25.b
		trigger = {
			OR = {
				medium_tolerance_kobold_race_trigger = yes
				high_tolerance_kobold_race_trigger = yes
			}
		}
		highlight = yes
		hidden_effect = { set_global_flag = EOA_kobold_rights_settlement }
		small_increase_of_kobold_tolerance_effect = yes
		if = {
			limit = {
				capital_scope = {
					NOT = {
						has_kobold_minority_trigger = yes
					}
				}
			}
			capital_scope = {
				add_kobold_minority_size_effect = yes
			}
		}
		custom_tooltip = EOA_25_pulse_accept_tt
		random_list = {
			33 = {
				define_advisor = {
					type = natural_scientist
					name = "Dheep Trapfang"
					skill = 2
					culture = greenscale_kobold
					religion = root
					cost_multiplier = 0.5
				}
			}
			33 = {
				define_advisor = {
					type = spymaster
					name = "Uho Hardwax"
					skill = 2
					culture = bluescale_kobold
					religion = root
					cost_multiplier = 0.5
				}
			}
			33 = {
				define_advisor = {
					type = fortification_expert
					name = "Grator Quickdagger"
					skill = 2
					culture = redscale_kobold
					religion = root
					cost_multiplier = 0.5
				}
			}
			1 = {
				define_advisor = {
					type = court_mage
					name = "Tayekar Dragontail"
					skill = 3
					culture = kobildzani_kobold
					religion = kobold_dragon_cult
					cost_multiplier = 0.5
				}
			}
		}
		ai_chance = {
			factor = 20 #greentext option, you know how this works
		}
	}

	option = {
		name = flavor_empire.25.c
		custom_tooltip = flavor_empire.25.c_TT
		ai_chance = {
			factor = 2
			modifier = {
				factor = 3
				wants_to_maintain_tolerance_kobold = yes
			}
			modifier = {
				factor = 2
				OR = {
					ruler_has_personality = naive_personality
					ruler_has_personality = charismatic_negotiator_personality
					ruler_has_personality = benevolent_personality
				}
			}
		}
	}

	option = {
		name = flavor_empire.25.e
		add_imperial_influence = 3
		ai_chance = {
			factor = 5
			modifier = {
				factor = 2
				wants_to_decrease_tolerance_kobold = yes
			}
			modifier = {
				factor = 1.5
				OR = {
					ruler_has_personality = cruel_personality
					ruler_has_personality = strict_personality
					ruler_has_personality = zealot_personality
				}
			}
			modifier = {
				factor = 0.75
				OR = {
					ruler_has_personality = kind_hearted_personality
					ruler_has_personality = tolerant_personality
					ruler_has_personality = greedy_personality
				}
			}
			modifier = {
				factor = 0.5
				wants_to_increase_tolerance_kobold = yes
			}
		}
	}

}

country_event = {
	id = flavor_empire.26
	title = flavor_empire.26.t
	desc = flavor_empire.26.d
	picture = ARTIFICE_GEAR_eventPicture

	is_triggered_only = yes

	trigger = {
		is_part_of_hre = yes
		hre_reform_passed = anbennar_nobles_of_the_wand
		has_estate = estate_artificers
		has_estate = estate_mages
		NOT = {
			has_country_modifier = EOA_26_pulse_cooldown
		}
	}

	immediate = {
		hidden_effect = {
			add_country_modifier = {
				name = EOA_26_pulse_cooldown
				duration = 18250
				hidden = yes
			}
		}
	}

	option = {
		name = flavor_empire.26.a
		hidden_effect = {
			set_country_flag = ANB_estate_artificers_loyalty_refund
		}
		add_estate_loyalty = {
			estate = estate_mages
			loyalty = 10
		}
		add_estate_influence_modifier = {
			estate = estate_mages
			influence = 5
			desc = flavor_empire.26.a_mages_desc
			duration = 3650
		}
		add_estate_loyalty = {
			estate = estate_artificers
			loyalty = -5
		}
		add_estate_influence_modifier = {
			estate = estate_artificers
			influence = -20
			desc = flavor_empire.26.a_artificers_desc
			duration = 3650
		}
		capital_scope = {
			spawn_rebels = {
				type = particularist_rebels
				size = 4
				estate = estate_artificers
				should_take_capital = yes
			}
		}
		custom_tooltip = ANB_estate_artificers_loyalty_refund_tt
		ai_chance = {
			factor = 5
			modifier = {
				factor = 3
				ruler_has_personality = mage_personality
			}
			modifier = {
				factor = 1.5
				OR = {
					ruler_has_personality = secretive_personality
					ruler_has_personality = drunkard_personality
					ruler_has_personality = strict_personality
				}
			}
		}
	}

	option = {
		name = flavor_empire.26.b
		add_estate_loyalty = {
			estate = estate_mages
			loyalty = -10
		}
		add_estate_loyalty = {
			estate = estate_artificers
			loyalty = -5
		}
		add_legitimacy = -10
		add_republican_tradition = -3
		add_devotion = -10
		change_government_reform_progress = 15
		ai_chance = {
			factor = 5
			modifier = {
				factor = 2
				tier_2_artificer_estate = yes
			}
			modifier = {
				factor = 1.5
				OR = {
					ruler_has_personality = industrious_personality
					ruler_has_personality = free_thinker_personality
					ruler_has_personality = greedy_personality
					ruler_has_personality = embezzler_personality
					ruler_has_personality = reformist_personality
				}
			}
		}
	}

}