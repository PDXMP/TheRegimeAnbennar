namespace = uelos_events

#The First Step
country_event = {
	id = uelos_events.1
	title = uelos_events.1.t
	desc = uelos_events.1.d
	picture = HARBOUR_eventPicture
	goto = uelos_province
	
	is_triggered_only = yes

	trigger = {
		capital_scope = { continent = europe }
		religion_group = cannorian
		NOT = { has_country_flag = stopped_uelos_cult }
		NOT = { religion = uelos_cult }
		NOT = { religion = infernal_court }
		NOT = { has_country_flag = supernaturally_bound_faith }
		any_owned_province = { 
			is_overseas = yes 
			NOT = { religion = uelos_cult } 
			is_city = yes 
			NOT = { continent = serpentspine } 
		}
	}

	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = { 
					is_overseas = yes
					NOT = { religion = uelos_cult }
					is_city = yes
					NOT = { continent = serpentspine }
				}
				save_event_target_as = uelos_province
			}
			event_target:uelos_province = {
				change_religion = uelos_cult
			}
		}
	}
	

	option = {
		name = uelos_events.1.a
		ai_chance = { factor = 2 }
		event_target:uelos_province = {
			owner = {
				add_treasury = -100
				set_country_flag = stopped_uelos_cult
			}
			spawn_rebels = {
				size = 2
				type = uelos_cult_rebels
			}
		}
	}
	option = {
		name = uelos_events.1.b
		ai_chance = { factor = 2 }
		custom_tooltip = uelos_cult_growth_slow_tt
		event_target:uelos_province = {
			add_unrest = 3
			owner = {
				add_treasury = -50
				hidden_effect = {
					if = {
						limit = { has_country_flag = uelos_cult_growth2 }
						if = {
							limit = { NOT = { has_country_flag = dealing_with_uelos_cult } }
							country_event = {
								id = uelos_events.2
								days = 150
							}
							set_country_flag = dealing_with_uelos_cult
						}
					}
					else_if = {
						limit = { has_country_flag = uelos_cult_growth1 }
						set_country_flag = uelos_cult_growth2
						clr_country_flag = uelos_cult_growth1
					}
					else = {
						set_country_flag = uelos_cult_growth1
					}
				}
			}
		}
	}
	option = {
		name = uelos_events.1.c
		ai_chance = { factor = 1 }
		custom_tooltip = uelos_cult_growth_tt
		event_target:uelos_province = {
			hidden_effect = {
				if = {
					limit = { owner = { NOT = { has_country_flag = dealing_with_uelos_cult } } }
					owner = {
						country_event = {
							id = uelos_events.2
							days = 150
						}
						set_country_flag = dealing_with_uelos_cult
					}
				}
			}
		}
	}
}

country_event = {
	id = uelos_events.2
	title = uelos_events.2.t
	desc = uelos_events.2.d
	picture = NAVAL_MILITARY_eventPicture

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			set_variable = {
				which = uelos_province_amount
				value = 0
			}
			every_owned_province = {
				limit = { religion = uelos_cult }
				ROOT = {
					change_variable = {
						which = uelos_province_amount
						value = 1
					}
				}
			}
		}
	}

	option = {
		name = uelos_events.2.a
		ai_chance = { factor = 1 }
		if = {
			limit = {
				check_variable = { which = uelos_province_amount value = 1 }
			}
			if = {
				limit = { 
					NOT = { check_variable = { which = uelos_province_amount value = 2 } }
				 }
				 add_treasury = -100
			}
			else_if = {
				limit = {
					NOT = { check_variable = { which = uelos_province_amount value = 3 } }
				}
				add_treasury = -200
			}
			else_if = {
				limit = {
					NOT = { check_variable = { which = uelos_province_amount value = 4 } }
				}
				add_treasury = -300
			}
			else_if = {
				limit = {
					NOT = { check_variable = { which = uelos_province_amount value = 5 } }
				 }
				 add_treasury = -400
			}
			else = {
				 add_treasury = -500
			}
		}
		every_owned_province = {
			limit = { religion = uelos_cult }
			change_religion = ROOT
			add_unrest = 10
		}
		set_country_flag = stopped_uelos_cult
	}

	option = {
		name = uelos_events.2.b
		ai_chance = { factor = 1 }
		for = {
			amount = 6
			effect = "
			random_owned_province = { 
				limit = { NOT = { religion = uelos_cult } is_overseas = yes } 
				change_religion = uelos_cult
				}"
		}
		
		custom_tooltip = uelos_cult_growth_tt
		hidden_effect = {
			country_event = {
				id = uelos_events.3
				days = 450
			}
		}
	}
}

country_event = {
	id = uelos_events.3
	title = uelos_events.3.t
	desc = uelos_events.3.d
	picture = PRAYING_eventPicture

	is_triggered_only = yes
	immediate = {
		hidden_effect = {
			set_variable = {
				which = uelos_province_amount
				value = 0
			}
			every_owned_province = {
				if = {
					limit = { 
						religion = uelos_cult 
					}
					ROOT = {
						change_variable = {
							which = uelos_province_amount
							value = 1
						}
					}
				}
			}
			divide_variable = {
				which = uelos_province_amount
				value = 2
			}
		}
	}

	option = {
		name = uelos_events.3.a
		ai_chance = { factor = 1 }
		if = {
			limit = {
				check_variable = { which = uelos_province_amount value = 1 }
			}
			if = {
				limit = { 
					NOT = { check_variable = { which = uelos_province_amount value = 2 } }
				 }
				 add_treasury = -200
			}
			else_if = {
				limit = {
					NOT = { check_variable = { which = uelos_province_amount value = 3 } }
				}
				add_treasury = -400
			}
			else_if = {
				limit = {
					NOT = { check_variable = { which = uelos_province_amount value = 4 } }
				}
				add_treasury = -600
			}
			else_if = {
				limit = {
					NOT = { check_variable = { which = uelos_province_amount value = 5 } }
				 }
				 add_treasury = -800
			}
			else = {
				 add_treasury = -1000
			}
		}
		every_owned_province = {
			limit = { religion = uelos_cult }
			change_religion = ROOT
			add_unrest = 10
		}
		set_country_flag = stopped_uelos_cult
		capital_scope = {
			spawn_rebels = {
				size = 1.5
				type = uelos_cult_rebels
				female = yes

			}
		}
	}
	option = {
		name = uelos_events.3.b
		ai_chance = { factor = 3 }
		random_owned_province = {
			limit = { 
				has_port = yes
				is_in_capital_area = yes
			 }
			 change_religion = uelos_cult
		}
		if = {
			limit = { has_estate = estate_church }
			set_country_flag = tolerates_cult
			set_estate_privilege = estate_church_uelos_cult_guaranteed_autonomy
		}
	}
	option = {
		name = uelos_events.3.c
		ai_chance = { factor = 1 }
		random_owned_province = {
			limit = { 
				has_port = yes
				is_in_capital_area = yes
			 }
			 change_religion = uelos_cult
		}
		
		custom_tooltip = uelos_cult_growth_tt
		hidden_effect = {
			country_event = {
				id = uelos_events.4
				days = 200
			}
		}
	}
}

country_event = {
	id = uelos_events.4
	title = uelos_events.4.t
	desc = uelos_events.4.d
	picture = RELIGIOUS_CONVERSION_eventPicture

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			set_variable = {
				which = uelos_province_amount
				value = 0
			}
			every_owned_province = {
				if = {
					limit = { 
						religion = uelos_cult 
						is_in_capital_area = yes
					}
					ROOT = {
						change_variable = {
							which = uelos_province_amount
							value = 1
						}
					}
				}
			}
		}
	}

	option = {
		name = uelos_events.4.a
		ai_chance = { factor = 2 }
		if = {
			limit = {
				check_variable = { which = uelos_province_amount value = 1 }
			}
			if = {
				limit = { 
					NOT = { check_variable = { which = uelos_province_amount value = 2 } }
				 }
				 add_treasury = -250
			}
			else_if = {
				limit = {
					NOT = { check_variable = { which = uelos_province_amount value = 3 } }
				}
				add_treasury = -500
			}
			else_if = {
				limit = {
					NOT = { check_variable = { which = uelos_province_amount value = 4 } }
				}
				add_treasury = -750
			}
			else_if = {
				limit = {
					NOT = { check_variable = { which = uelos_province_amount value = 5 } }
				 }
				 add_treasury = -1000
			}
			else = {
				 add_treasury = -1500
			}
		}
		every_owned_province = {
			limit = { religion = uelos_cult is_in_capital_area = yes }
			change_religion = ROOT
			add_unrest = 10
		}
		capital_scope = {
			spawn_rebels = {
				size = 2.5
				type = uelos_cult_rebels
			}
		}
		set_country_flag = stopped_uelos_cult
	}

	option = {
		name = uelos_events.4.b
		trigger = { NOT = { has_country_flag = supernaturally_bound_faith } NOT = { is_or_was_tag = { tag = A05 } } }
		ai_chance = { factor = 1 }
		add_stability = -3
		change_religion = uelos_cult
	}

	option = {
		name = uelos_events.4.c
		trigger = { is_or_was_tag = { tag = A05 } }
		ai_chance = { factor = 1 }
		highlight = yes

		custom_tooltip = reveria_hears_the_sea.tt
		hidden_effect = { set_country_flag = reveria_hears_the_sea }
		add_ruler_modifier = {
			name = reveria_questioning_the_wind
			duration = -1
		}
	}
}

country_event = { #Woe of Madness Hunt Start
	id = uelos_events.5
	title = uelos_events.5.t
	desc = uelos_events.5.d
	picture = RELIGIOUS_CONVERSION_eventPicture

	is_triggered_only = yes
	trigger = { }

	option = { #Start Hunt
		name = uelos_events.5.a
		ai_chance = { factor = 90 }

		custom_tooltip = uelos_woe_of_madness_hunt_trollface.tt
		hidden_effect = {
			random_list = {
				95 = {
					country_event = {
						id = uelos_events.6
						days = 12
					}
				}
				5 = {
					country_event = {
						id = uelos_events.9
						days = 12
					}
				}
			}
		}
	}

	option = { #Cancel Hunt
		name = uelos_events.5.b
		ai_chance = { factor = 10 }

		add_church_power = 100
		hidden_effect = { 
			clr_country_flag = woe_of_madness_cant_use
			clr_country_flag = uelos_woe_of_madness
		}
	}
}

country_event = { #Woe of Madness Beast Found
	id = uelos_events.6
	title = uelos_events.6.t
	desc = uelos_events.6.d
	picture = RELIGIOUS_CONVERSION_eventPicture

	is_triggered_only = yes
	trigger = { }

	option = { #Ruler Will Hunt It
		name = uelos_events.6.a
		ai_chance = { factor = 50 }

		country_event = {
			id = uelos_events.7
			days = 5
		}
	}

	option = { #Heir Will Hunt It
		name = uelos_events.6.b
		ai_chance = { factor = 50 }

		country_event = {
			id = uelos_events.8
			days = 5
		}
	}
}

country_event = { #Woe of Madness Beast Hunted Ruler
	id = uelos_events.7
	title = uelos_events.7.t
	desc = uelos_events.7.d
	picture = RELIGIOUS_CONVERSION_eventPicture

	is_triggered_only = yes
	trigger = { }

	option = { #admin
		name = uelos_events.7.a
		increase_ruler_adm_effect = yes
	}
	option = { #dip
		name = uelos_events.7.b
		increase_ruler_dip_effect = yes
	}
	option = { #mil
		name = uelos_events.7.c
		increase_ruler_mil_effect = yes
	}
}

country_event = { #Woe of Madness Beast Hunted Heir
	id = uelos_events.8
	title = uelos_events.8.t
	desc = uelos_events.8.d
	picture = RELIGIOUS_CONVERSION_eventPicture

	is_triggered_only = yes
	trigger = { }

	option = { #admin
		name = uelos_events.8.a
		if = {
			limit = { NOT = { heir_adm = 6 } }
			change_heir_adm = 1
		}
		else = {
			add_adm_power = 100
		}
	}
	option = { #dip
		name = uelos_events.8.b
		if = {
			limit = { NOT = { heir_dip = 6 } }
			change_heir_dip = 1
		}
		else = {
			add_dip_power = 100
		}
	}
	option = { #mil
		name = uelos_events.8.c
		if = {
			limit = { NOT = { heir_mil = 6 } }
			change_heir_mil = 1
		}
		else = {
			add_mil_power = 100
		}
	}
}


country_event = { #Woe of Madness Oh no.....
	id = uelos_events.9
	title = uelos_events.9.t
	desc = uelos_events.9.d
	picture = RELIGIOUS_CONVERSION_eventPicture

	is_triggered_only = yes
	trigger = { }

	option = {
		name = uelos_events.9.a
		ai_chance = { factor = 100 }
		trigger = {
			NOT = {
				full_idea_group = religious_ideas
				heir_has_personality = zealot_personality
			}
		}
		
		kill_ruler = yes

		add_ruler_modifier = {
			name = uelos_woe_of_madness_madness
			duration = -1
		}
	}

	option = {
		name = uelos_events.9.b
		ai_chance = { factor = 100 }

		trigger = {
			OR = {
				full_idea_group = religious_ideas
				heir_has_personality = zealot_personality
			}
		}
		
		kill_ruler = yes

		add_ruler_modifier = {
			name = uelos_woe_of_madness_wisdom
			duration = -1
		}
	}
}

country_event = { #Woe of Madness Re-Use
	id = uelos_events.10
	title = uelos_events.10.t
	desc = uelos_events.10.d
	picture = TRADE_GOODS_FURS_FISH_AND_SALT_eventPicture
	
	is_triggered_only = yes

	trigger = {
		religion = uelos_cult
		has_country_flag = reveria_uelos_cult_final_reward
		has_ruler_flag = woe_of_madness_cant_use
	}
	
	
	option = { #use opportunity
		name = uelos_events.10.a
		
		custom_tooltip = woe_of_madness_hunting_tooltip
		hidden_effect = { clr_ruler_flag  = woe_of_madness_cant_use }
	}
}