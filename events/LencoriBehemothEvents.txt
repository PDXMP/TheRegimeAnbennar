
namespace = lencori_behemoth
	
country_event = {
	id = lencori_behemoth.1 # The Duke's Outburst
	title = lencori_behemoth.1.t
	desc = lencori_behemoth.1.d
	picture = LARGE_SHIPYARD_eventPicture
	is_triggered_only = yes
	
	trigger = {
		NOT = { has_global_flag = lencori_behemoth }
		OR = {
			owns = 112
			lencori_qualifies_for_behemoths = yes
		}
	}
	
	option = {
		name = lencori_behemoth.1.a # These ships will help us dominate the sea
		highlight = yes
		trigger = {
			owns = 112
			lencori_qualifies_for_behemoths = yes
		}
		add_country_modifier = { name = lencori_behemoth_of_the_seas duration = -1 }
		112 = {
			add_building = grand_shipyard
			add_permanent_province_modifier = { name = lencori_shipyard_of_lament duration = -1 }
			man_of_war_heavy = ROOT
			man_of_war_heavy = ROOT
		}
		hidden_effect = {
			set_country_flag = have_behemoth
			lencori_behemoth_update_all_shipyards = yes
		}
	}

	option = {
		name = lencori_behemoth.1.b # Has he lost his mind?
		highlight = yes
		trigger = {
			NOT = { owns = 112 }
			lencori_qualifies_for_behemoths = yes
		}
		add_prestige = 5
	}

	option = {
		name = lencori_behemoth.1.c # Why should we care for one man's absurdity ?
		highlight = yes
		trigger = {
			owns = 112
			lencori_does_not_qualify_for_behemoths = yes
		}
		112 = {
			add_building = grand_shipyard
			add_permanent_province_modifier = { name = lencori_shipyard_of_lament duration = -1 }
		}
	}

	after = {
		hidden_effect = {
			set_global_flag = lencori_behemoth
		}
		112 = {
			province_event = {
				id = lencori_behemoth.10
				days = 3650
			}
		}
	}
}


country_event = {
	id = lencori_behemoth.2 # A Rare Sight
	title = lencori_behemoth.2.t
	desc = lencori_behemoth.2.d
	picture = NAVAL_MILITARY_eventPicture
	is_triggered_only = yes
	trigger = {
		lencori_qualifies_for_behemoths = yes
		had_global_flag = {
			flag = lencori_behemoth
			days = 3650
		}
	}

	immediate = {
		hidden_effect = {
			set_global_flag = first_wave_behemoth
		}
	}

	option = {
		name = lencori_behemoth.2.a # Maybe we judged it too harshly
		highlight = yes
		trigger = {
			NOT = { owns = 112 }
		}
		custom_tooltip = lencori_behemoth.2.a_tt
		complex_dynamic_effect_without_alternative = {
			first_custom_tooltip = lencori_behemoth.2.a_bonus_tt
			first_limit = "owns = 101"
			first_effect = "define_advisor = {
                                type = naval_reformer
								skill = 2
								culture = sea_elf
								religion = elven_forebears
								discount = yes
                            }"
		}
	}


	option = {
		name = lencori_behemoth.2.b # Of course, we are right
		highlight = yes
		trigger = {
			owns = 112
			has_country_flag = have_behemoth
		}
		add_prestige = 5
		complex_dynamic_effect_without_alternative = {
			first_custom_tooltip = lencori_behemoth.2.a_bonus_tt
			first_limit = "owns = 101"
			first_effect = "define_advisor = {
                                type = naval_reformer
								skill = 2
								culture = sea_elf
								religion = elven_forebears
								discount = yes
                            }"
		}
	}

	option = {
		name = lencori_behemoth.2.c # Put the infrastructure to use immediately
		highlight = yes
		trigger = {
			owns = 112
			NOT = { has_country_flag = have_behemoth }
			lencori_qualifies_for_behemoths = yes
		}
		add_country_modifier = { name = lencori_behemoth_of_the_seas duration = -1 }
		complex_dynamic_effect_without_alternative = {
			first_custom_tooltip = lencori_behemoth.2.a_bonus_tt
			first_limit = "owns = 101"
			first_effect = "define_advisor = {
                                type = naval_reformer
								skill = 2
								culture = sea_elf
								religion = elven_forebears
								discount = yes
                            }"
		}
		hidden_effect = {
			set_country_flag = have_behemoth
			lencori_behemoth_update_all_shipyards = yes
		}
	}
}


country_event = {
	id = lencori_behemoth.3 # The behemoth of the West
	title = lencori_behemoth.3.t
	desc = lencori_behemoth.3.d
	picture = CORSAIR_eventPicture
	is_triggered_only = yes
	trigger = {
		has_global_flag = first_wave_behemoth
		lencori_qualifies_for_behemoths = yes
		NOT = { has_country_flag = have_behemoth }
		112 = {
			OR = {
				owned_by = ROOT
				owner = {
					has_spy_network_from = { who = ROOT value = 25 }
				}
			}
		}
		navy_tradition = 25
	}
	option = {
		name = lencori_behemoth.3.a
		add_country_modifier = { name = lencori_behemoth_of_the_seas duration = -1 }
		hidden_effect = {
			set_country_flag = have_behemoth
			lencori_behemoth_update_all_shipyards = yes
		}
	}
}

country_event = {
	id = lencori_behemoth.4 # The Tragedy of the Ivrandir
	title = lencori_behemoth.4.t
	desc = lencori_behemoth.4.d
	picture = FLAGSHIP_SUNK_eventPicture
	is_triggered_only = yes
	fire_only_once = yes
	
	trigger = {
		owns_or_subject_of = 930
		930 = {
			is_city = yes
		}
		is_subject = no
		had_global_flag = {
			flag = first_wave_behemoth
			days = 365
		}
	}
	immediate = {
		hidden_effect = { set_global_flag = unlock_new_shipbuilding_technique }
	}
	option = {
		name = lencori_behemoth.4.a
		930 = { change_trade_goods = precursor_relics }
		custom_tooltip = lencori_behemoth.4.a_tt
		change_innovativeness = 5
		add_country_modifier = {
			name = precursor_shipbuilding_tecnique
			duration = 9125
		}
		hidden_effect = {
			set_country_flag = study_migrant_ship
		}
	}
}

province_event = {
	id = lencori_behemoth.10 # helper event for "A Rare Sight"
	title = lencori_behemoth.10.t
	desc = lencori_behemoth.10.d
	picture = NAVAL_MILITARY_eventPicture
	is_triggered_only = yes
	hidden = yes
	fire_only_once = yes

	immediate = {
		every_country = {
			limit = {
				lencori_qualifies_for_behemoths = yes
			}
			country_event = {
				id = lencori_behemoth.2
			}
		}
	}

	option = {
		name = lencori_behemoth.10.a
	}
}
