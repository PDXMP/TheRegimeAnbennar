#Segmentation:
#Events 1-9 - Generic flavour events (6-9 unused)
#Events 10-15 - Golodh events
#Events 16-21 - Gift Ring events
#Events 30-39 - Pachpalka events
#Events 40-49 - Mechanim flavour events
#Events 50-99 - Unused
#Events 100 - Mechanim Over Forcelimit event

namespace = insyaa_flavour

country_event = { #Whalefall
	id = insyaa_flavour.1
	title = insyaa_flavour.1.t
	desc = insyaa_flavour.1.d
	picture = COMET_SIGHTED_eventPicture

	is_triggered_only = yes

	trigger = { any_owned_province = { continent = oceania } }

	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = { continent = oceania }
				save_event_target_as = event_province
			}
		}
	}

	goto = event_province

	option = {
		name = insyaa_flavour.1.a
		event_target:event_province = {
			add_devastation = 50
			add_province_modifier = {
				name = insyaa_skywhale_carcass
				duration = 365 #1 year
			}
		}
	}

	option = {
		name = insyaa_flavour.1.b
		trigger = { has_estate = estate_mages }
		event_target:event_province = {
			add_devastation = 50
			add_province_modifier = {
				name = insyaa_skywhale_dames_dust
				duration = 365 #1 year
			}
		}
	}
}

#Termite Megopolis Event Chain, on 4 year pulse
country_event = { #The Colossal Anteaters
    id = insyaa_flavour.2
    title = insyaa_flavour.2.t
    desc = insyaa_flavour.2.d
    picture = VILLAGE_RAIDED_eventPicture
    
    is_triggered_only = yes
	fire_only_once = yes

    trigger = {
		capital_scope = { continent = oceania }
		num_of_colonies = 1
        any_owned_province = {
            region = titanoflora_savanna_region
            is_colony = yes
		}
        NOT = {
            culture_group = mechanim
        }
    }
    immediate = {
        hidden_effect = {
            random_owned_province = {
                limit = {
                    region = titanoflora_savanna_region
                    is_colony = yes
                }
                save_event_target_as = event_province
            }
        }
    }
    goto = event_province
    
    option = { #We must fell these giants
        name = insyaa_flavour.2.a
        ai_chance = { factor = 100 }
        add_manpower = -1
		hidden_effect = {
			country_event = {
				id = insyaa_flavour.3
				days = 180
				random = 100
			}
		}
    }
    option = { #Board over windows and dedicate more soldiers to watch duty.
        name = insyaa_flavour.2.b
        ai_chance = { factor = 0 }
		event_target:event_province = {
			add_province_modifier = {
				name = anteater_hysteria_colony_cost_increase
				duration = 1825
			}
        }
    }
}



country_event = { #The Termite Megapolis
    id = insyaa_flavour.3
    title = insyaa_flavour.3.t
    desc = insyaa_flavour.3.d
    picture = DARK_FOREST_eventPicture
    
    is_triggered_only = yes

    goto = event_province
    
    option = {
        name = insyaa_flavour.3.a #Order a raid on the megapolis!
        ai_chance = { factor = 1 }
        add_manpower = -5
        add_treasury = -150
		hidden_effect = {
			country_event = {
				id = insyaa_flavour.4
				days = 180
				random = 100
			}
		}
    }
    option = {
        name = insyaa_flavour.3.b #There is nothing we can do currently
        ai_chance = { factor = 0 }
		event_target:event_province = {
			add_devastation = 50
			add_unrest = 5
		}
    }
}

country_event = { #Battle for the Megapolis
    id = insyaa_flavour.4
    title = insyaa_flavour.4.t
    desc = insyaa_flavour.4.d
    picture = DARK_FOREST_eventPicture
    
    is_triggered_only = yes

    goto = event_province
    
    option = {
        name = insyaa_flavour.4.a #Let this dying megapolis stand as a testament to our people's domination over nature!
        ai_chance = { factor = 0 }
        add_army_tradition = 20
    }
    option = {
        name = insyaa_flavour.4.b #Perhaps we could make some use out of this mound...
        ai_chance = { factor = 1 }
		hidden_effect = {
			country_event = {
				id = insyaa_flavour.5
				days = 180
				random = 100
			}
		}
		event_target:event_province = {
			add_base_production = 2
			change_trade_goods = fungi
			add_province_modifier = {
				name = repurposed_termite_mound
				duration = -1
			}
        }
    }
}

country_event = { #Life in the Mound
    id = insyaa_flavour.5
    title = insyaa_flavour.5.t
    desc = insyaa_flavour.5.d
    picture = DARK_FOREST_eventPicture
    
    is_triggered_only = yes

    goto = event_province
    
    option = {
        name = insyaa_flavour.5.a #The fruits of conquest are sweet indeed.
        ai_chance = { factor = 1 }
		event_target:event_province = {
			add_base_tax = 1
		}
    }
}

province_event = { # Helper event for Golodh, Wandering
	id = insyaa_flavour.10
	title = insyaa_flavour.10.t
	desc = insyaa_flavour.10.d
	picture = MECHANIM_AWAKENING_eventPicture

	is_triggered_only = yes
	hidden = yes

	option = {
		name = insyaa_flavour.10.a
		ai_chance = { factor = 100 }
		if = {
			limit = { M15 = { exists = yes } }
			M15 = { country_event = { id = insyaa_flavour.15 } }
		}
		else = {
			random_country = {
				limit = { has_country_modifier = mechanim_administration }
				country_event = { id = insyaa_flavour.15 }
			}
		}
	}
}

province_event = { # Golodh, A Meeting
	id = insyaa_flavour.11
	title = insyaa_flavour.11.t
	desc = insyaa_flavour.11.d
	picture = ADVISOR_eventPicture

	is_triggered_only = yes

	trigger = {
		owner = {
			has_country_modifier = mechanim_administration
			NOT = { has_country_flag = met_golodh }
		}
	}

	immediate = {
		owner = { set_country_flag = met_golodh }
	}

	option = {
		name = insyaa_flavour.11.a
		ai_chance = { factor = 0 }
		remove_province_modifier = golodh_wandering
		owner = {
			random_list = {
				33 = { add_country_modifier = { name = golodh_tools_use duration = 3650 } }
				33 = { add_country_modifier = { name = golodh_tools_organization duration = 3650 } }
				33 = { add_country_modifier = { name = golodh_tools_construction duration = 3650 } }
			}
			country_event = {
				id = insyaa_flavour.12
				days = 1825
			}
		}
	}
	option = {
		name = insyaa_flavour.11.b
		ai_chance = { factor = 75 }
		golodh_wanders = yes
	}
	option = {
		name = insyaa_flavour.11.c
		ai_chance = { factor = 25 }
		golodh_wanders = yes
		owner = {
			add_manpower = -5
		}
		custom_tooltip = golodh_weakened_tt
		set_global_flag = golodh_weakened
	}
}

country_event = { # Golodh, Teaching
	id = insyaa_flavour.12
	title = insyaa_flavour.12.t
	desc = insyaa_flavour.12.d
	picture = INVENTION_eventPicture

	is_triggered_only = yes

	option = {
		name = insyaa_flavour.12.a
		ai_chance = { factor = 0 }
		define_ruler = {
			name = "Golodh"
			dynasty = "the Visionary"
			culture = sporewalker_mechanim
			adm = 3
			dip = 6
			mil = 3
			age = 99
		}
		add_ruler_personality = cruel_personality
		add_ruler_personality = zealot_personality
		add_ruler_personality = lawgiver_personality
		custom_tooltip = ""
		custom_tooltip = golodh_rules_tt
		set_country_flag = golodh_rules
		make_ruler_immortal = yes
	}
	option = {
		name = insyaa_flavour.12.b
		ai_chance = { factor = 100 }
		add_stability = -1
		remove_country_modifier = golodh_tools_use
		remove_country_modifier = golodh_tools_organization
		remove_country_modifier = golodh_tools_construction
		custom_tooltip = golodh_wanders_tt
		hidden_effect = {
			random_list = {
				33 = { 3517 = { add_permanent_province_modifier = { name = golodh_wandering duration = -1 } } }
				33 = { 3518 = { add_permanent_province_modifier = { name = golodh_wandering duration = -1 } } }
				33 = { 3519 = { add_permanent_province_modifier = { name = golodh_wandering duration = -1 } } }
			}
		}
	}
}

country_event = { # Golodh, at the End of the Beginning
	id = insyaa_flavour.13
	title = insyaa_flavour.13.t
	desc = insyaa_flavour.13.d
	picture = COUNTRY_COLLAPSE_eventPicture

	is_triggered_only = yes


	option = {
		name = insyaa_flavour.13.a
		add_country_modifier = { name = golodh_vision_unfurls duration = 9125 }
		if = {
			limit = { has_global_flag = golodh_weakened }
			add_country_modifier = { name = golodh_weakened_mod duration = 18250 }
		}
		# AI buffs for I-numbe, up to insyaa team to add later
	}
}

country_event = { # Golodh, Immortal
	id = insyaa_flavour.14
	title = insyaa_flavour.14.t
	desc = insyaa_flavour.14.d
	picture = MECHANIM_AWAKENING_eventPicture

	is_triggered_only = yes

	immediate = {
		set_country_flag = golodh_respawning
	}

	trigger = {
		has_country_flag = golodh_rules
		NOT = { has_country_flag = golodh_respawning }
	}

	option = {
		name = insyaa_flavour.14.a
		add_country_modifier = { name = golodh_new_tool duration = 1825 }
		# TODO: trigger somewhere else to stop the death completely? idk
		define_ruler = {
			name = "Golodh"
			dynasty = "the Visionary"
			culture = sporewalker_mechanim
			adm = 3
			dip = 6
			mil = 3
			age = 99
		}
		add_ruler_personality = cruel_personality
		add_ruler_personality = zealot_personality
		add_ruler_personality = lawgiver_personality
		make_ruler_immortal = yes
	}

	after = {
		clr_country_flag = golodh_respawning
	}
}

country_event = { # Golodh, Wandering
	id = insyaa_flavour.15
	title = insyaa_flavour.15.t
	desc = insyaa_flavour.15.d
	picture = MECHANIM_AWAKENING_eventPicture

	is_triggered_only = yes

	major = yes
	major_trigger = {
		has_country_modifier = mechanim_administration
	}

	option = {
		name = insyaa_flavour.15.a
		custom_tooltip = insyaa_flavour.15.a.tt
		3518 = {
			add_permanent_province_modifier = {
				name = golodh_wandering duration = -1
			}
		}
	}
}
#Gift Ring Events
country_event = { #Sending gift to next region
	id = insyaa_flavour.16
	title = insyaa_flavour.16.t
	desc = {
		trigger = {
			has_country_flag = insyaa_ring_sender_clock
		}
		desc = insyaa_flavour.16.desc1
	}
	desc = {
		trigger = {
			NOT = {
				has_country_flag = insyaa_ring_sender_clock
			}
		}
		desc = insyaa_flavour.16.desc2
	}
	picture = GIFTS_TO_EMPEROR_eventPicture

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			save_event_target_as = insyaa_ring_sender
		}
	}

	option = {
		name = insyaa_flavour.16.a
		goto = insyaa_ring_ally_capital
		ai_chance = { factor = 20 }
		trigger = {
			has_saved_event_target = insyaa_ring_ally
		}
		event_target:insyaa_ring_ally = {
			country_event = {
				id = insyaa_flavour.17
				days = 3
				random = 7
			}
		}
	}
	option = {
		name = insyaa_flavour.16.b
		goto = insyaa_ring_highest_dev_capital
		ai_chance = { factor = 2 }
		trigger = {
			has_saved_event_target = insyaa_ring_highest_dev
		}
		event_target:insyaa_ring_highest_dev = {
			country_event = {
				id = insyaa_flavour.17
				days = 3
				random = 7
			}
		}
	}
	option = {
		name = insyaa_flavour.16.c
		goto = insyaa_ring_highest_dev_regional_capital
		ai_chance = { factor = 6 }
		trigger = {
			has_saved_event_target = insyaa_ring_highest_dev_regional
		}
		event_target:insyaa_ring_highest_dev_regional = {
			country_event = {
				id = insyaa_flavour.17
				days = 3
				random = 7
			}
		}
	}
	option = {
		name = insyaa_flavour.16.d
		goto = insyaa_ring_random_capital
		ai_chance = { factor = 60 }
		trigger = {
			has_saved_event_target = insyaa_ring_random
		}
		event_target:insyaa_ring_random = {
			country_event = {
				id = insyaa_flavour.17
				days = 3
				random = 7
			}
		}
	}
}
country_event = { #Should we send something back?
	id = insyaa_flavour.17
	title = insyaa_flavour.17.t
	desc = {
		trigger = {
			event_target:insyaa_ring_highest_dev = {
				has_country_flag = insyaa_ring_sender_clock
			}
		}
		desc = insyaa_flavour.17.desc1
	}
	desc = {
		trigger = {
			event_target:insyaa_ring_highest_dev = {
				NOT = { has_country_flag = insyaa_ring_sender_clock }
			}
		}
		desc = insyaa_flavour.17.desc2
	}
	picture = GIFTS_TO_EMPEROR_eventPicture

	is_triggered_only = yes

	major = yes
	major_trigger = {
		tag = event_target:insyaa_ring_sender
	}

	immediate = {
		hidden_effect = {
			add_country_modifier = {
				name = insyaa_recently_recived_gift
				duration = 1825
				hidden = yes
			}
			export_to_variable = {
				which = insyaa_ring_manpower
				value = max_manpower
			}
			round_variable = {
				which = insyaa_ring_manpower
				value = -1
			}
			event_target:insyaa_ring_sender = {
				random_owned_province = {
					limit = {
						NOT = { development = 10 }
					}
					save_event_target_as = insyaa_ring_sender_province
				}
				if = {
					limit = { NOT = { has_saved_event_target = insyaa_ring_sender_province } }
					random_owned_province = {
						save_event_target_as = insyaa_ring_sender_province
					}
				}
				set_variable = {
					which = insyaa_ring_manpower
					which = PREV
				}
				divide_variable = { insyaa_ring_manpower = 10 }
			}
			multiply_variable = { insyaa_ring_manpower = 100 }
		}
	}

	option = {
		name = insyaa_flavour.17.a
		ai_chance = {
			factor = 10
			modifier = {
				factor = 0
				alliance_with = event_target:insyaa_ring_sender
			}
		}
		add_legitimacy_equivalent = { amount = -10 republican_tradition = -3 }
		reverse_add_opinion = {
			who = event_target:insyaa_ring_sender
			modifier = insulted
		}
	}
	option = {
		name = insyaa_flavour.17.b
		ai_chance = {
			factor = 10
			modifier = {
				factor = 10
				manpower_percentage = 0.9
			}
		}
		hidden_effect = {
			divide_variable = { insyaa_ring_manpower = 1000 }
			var_effect_granular = { effect = add_manpower var = insyaa_ring_manpower sign = - }
		}
		custom_tooltip = insyaa_flavour.17.send
		custom_tooltip = insyaa_flavour.17.recive_manpower
		hidden_effect = {
			event_target:insyaa_ring_sender = {
				var_effect_granular = { effect = add_manpower var = insyaa_ring_manpower sign = + }
			}
		}
		
	}
	option = {
		name = insyaa_flavour.17.c
		ai_chance = {
			factor = 10
			modifier = {
				factor = 0
				NOT = {
					has_opinion = {
						who = event_target:insyaa_ring_sender
						value = 20
					}
				}
			}
		}
		goto = insyaa_ring_sender_province
		add_adm_power = -50
		add_dip_power = -50
		add_mil_power = -50
		event_target:insyaa_ring_sender_province = {
			add_base_tax = 1
			add_base_production = 1
			add_base_manpower = 1
		}
	}
	option = {
		name = insyaa_flavour.17.d
		ai_chance = {
			factor = 10
			modifier = {
				factor = 2
				prestige = 20
			}
			modifier = {
				factor = 2
				prestige = 40
			}
			modifier = {
				factor = 2
				prestige = 60
			}
			modifier = {
				factor = 2
				prestige = 80
			}
		}
		add_prestige = -20
		custom_tooltip = insyaa_flavour.17.recive_legitymacy
		hidden_effect = {
			event_target:insyaa_ring_sender = {
				add_legitimacy_equivalent = { amount = 10 republican_tradition = 3 }
			}
		}
	}
	after = {
		hidden_effect = {
			event_target:insyaa_ring_sender = {
				clr_country_flag = insyaa_ring_sender_clock
			}
		}
	}
}
country_event = { #Gift From Population 
	id = insyaa_flavour.18
	title = insyaa_flavour.18.t
	desc = {
		trigger = {
			has_country_flag = insyaa_ring_sender_clock
		}
		desc = insyaa_flavour.18.desc1
	}
	desc = {
		trigger = {
			NOT = {
				has_country_flag = insyaa_ring_sender_clock
			}
		}
		desc = insyaa_flavour.18.desc2
	}
	picture = GIFTS_TO_EMPEROR_eventPicture

	trigger = {
		country_is_in_gift_ring_region = yes
	}

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			if = {
				limit = {
					NOT = { has_country_flag = insyaa_ring_sender_clock }
				}
				random = {
					chance = 50
					set_country_flag = insyaa_ring_sender_clock
				}
			}
		}
	}

	option = {
		name = insyaa_flavour.18.a
		ai_chance = {
			factor = 1
			modifier = {
				factor = 3
				ruler_has_personality = greedy_personality
			}
			modifier = {
				factor = 3
				ruler_has_personality = cruel_personality
			}
			modifier = {
				factor = 3
				ruler_has_personality = embezzler_personality
			}
		}
		add_legitimacy_equivalent = { amount = -15 republican_tradition = -5 }
		add_country_modifier = {
			name = insyaa_ring_unrest
			duration = 1095
		}
	}
	option = {
		name = insyaa_flavour.18.b
		ai_chance = {
			factor = 5
			modifier = {
				factor = 2
				manpower_percentage = 0.9
			}
		}
		add_legitimacy_equivalent = { amount = 15 republican_tradition = 5 }
		add_yearly_manpower = -1
		add_country_modifier = {
			name = insyaa_ring_peace
			duration = 1095
		}
	}
	option = {
		name = insyaa_flavour.18.c
		ai_chance = {
			factor = 0
		}
		add_legitimacy_equivalent = { amount = 15 republican_tradition = 5 }
		change_estate_land_share = {
			estate = all
			share = 2
		}
		add_country_modifier = {
			name = insyaa_ring_peace
			duration = 1095
		}
	}
	option = {
		name = insyaa_flavour.18.d
		ai_chance = {
			factor = 0
		}
		add_legitimacy_equivalent = { amount = 15 republican_tradition = 5 }
		custom_tooltip = insyaa_flavour.18.dtt
		hidden_effect = {
			every_owned_province = {
				add_local_autonomy = 5
			}
		}
		add_country_modifier = {
			name = insyaa_ring_peace
			duration = 1095
		}
	}
	option = {
		name = insyaa_flavour.18.e
		ai_chance = {
			factor = 10
		}
		add_legitimacy_equivalent = { amount = 15 republican_tradition = 5 }
		add_country_modifier = {
			name = insyaa_ring_lowtax
			duration = 1825
		}
		add_country_modifier = {
			name = insyaa_ring_peace
			duration = 1095
		}
	}
	after = {
		hidden_effect = {
			clr_country_flag = insyaa_ring_sender_clock
		}
	}
}
country_event = { #Gift To Population 
	id = insyaa_flavour.19
	title = insyaa_flavour.19.t
	desc = {
		trigger = {
			has_country_flag = insyaa_ring_sender_clock
		}
		desc = insyaa_flavour.19.desc1
	}
	desc = {
		trigger = {
			NOT = {
				has_country_flag = insyaa_ring_sender_clock
			}
		}
		desc = insyaa_flavour.19.desc2
	}
	picture = east_slavic_MERCHANTS_TALKING_eventPicture

	trigger = {
		country_is_in_gift_ring_region = yes
	}

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			if = {
				limit = {
					NOT = { has_country_flag = insyaa_ring_sender_clock }
				}
				random = {
					chance = 50
					set_country_flag = insyaa_ring_sender_clock
				}
			}
		}
	}

	option = {
		name = insyaa_flavour.19.a
		ai_chance = {
			factor = 10
			modifier = {
				factor = 4
				NOT = { legitimacy_equivalent = 60 }
			}
			modifier = {
				factor = 0
				legitimacy_equivalent = 95
			}
		}
		add_legitimacy_equivalent = { amount = 15 republican_tradition = 5 }
	}
	option = {
		name = insyaa_flavour.19.b
		ai_chance = {
			factor = 10
		}
		add_yearly_manpower = 0.2
	}
	option = {
		name = insyaa_flavour.19.c
		ai_chance = {
			factor = 0
		}
		trigger = {
			has_estate = estate_church
		}
		add_estate_loyalty = {
			estate = estate_church
			loyalty = 15
		}
	}
	option = {
		name = insyaa_flavour.19.d
		ai_chance = {
			factor = 0
		}
		trigger = {
			has_estate = estate_nobles
		}
		add_estate_loyalty = {
			estate = estate_nobles
			loyalty = 15
		}
	}
	option = {
		name = insyaa_flavour.19.e
		ai_chance = {
			factor = 0
		}
		trigger = {
			has_estate = estate_burghers
		}
		add_estate_loyalty = {
			estate = estate_burghers
			loyalty = 15
		}
	}
	option = {
		name = insyaa_flavour.19.f
		ai_chance = {
			factor = 0
		}
		custom_tooltip = random_2_discounted_advisor_tt
		hidden_effect = {
			random_list = {
				1 = { define_random_adm_advisor_effect = { skill = 2 cost_multiplier = 0.75 culture = ROOT } }
				1 = { define_random_dip_advisor_effect = { skill = 2 cost_multiplier = 0.75 culture = ROOT } }
				1 = { define_random_mil_advisor_effect = { skill = 2 cost_multiplier = 0.75 culture = ROOT } }
			}
		}
	}
	after = {
		hidden_effect = {
			clr_country_flag = insyaa_ring_sender_clock
		}
	}
}
country_event = { #Gift of Migration
	id = insyaa_flavour.20
	title = insyaa_flavour.20.t
	desc = {
		trigger = {
			has_country_flag = insyaa_ring_sender_clock
		}
		desc = insyaa_flavour.20.desc1
	}
	desc = {
		trigger = {
			NOT = {
				has_country_flag = insyaa_ring_sender_clock
			}
		}
		desc = insyaa_flavour.20.desc2
	}
	picture = AFRICAN_CARAVAN_eventPicture

	trigger = {
		country_is_in_gift_ring_region = yes
		calc_true_if = {
			amount = 2
			any_owned_province = {
				NOT = {
					fast_has_pop_of_race = { race = human }
				}
			}
			any_owned_province = {
				NOT = {
					fast_has_pop_of_race = { race = ogre }
				}
			}
			any_owned_province = {
				NOT = {
					fast_has_pop_of_race = { race = kobold }
				}
			}
		}
	}

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			random = {
				chance = 50
				set_country_flag = insyaa_ring_sender_clock
			}
			select_diffrent_if_possible_race_provinces = {
				race1 = human
				race2 = ogre
				race3 = kobold
			}
		}
	}

	option = {
		name = insyaa_flavour.20.a
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				low_tolerance_human_race_trigger = yes
			}
		}
		goto = event_target_human
		trigger = {
			has_saved_event_target = event_target_human
		}
		event_target:event_target_human = {
			add_human_minority_size_effect = yes
		}
		small_increase_of_human_tolerance_effect = yes
	}
	option = {
		name = insyaa_flavour.20.b
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				low_tolerance_ogre_race_trigger = yes
			}
		}
		goto = event_target_ogre
		trigger = {
			has_saved_event_target = event_target_ogre
		}
		event_target:event_target_ogre = {
			add_ogre_minority_size_effect = yes
		}
		small_increase_of_ogre_tolerance_effect = yes
	}
	option = {
		name = insyaa_flavour.20.c
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				low_tolerance_kobold_race_trigger = yes
			}
		}
		goto = event_target_kobold
		trigger = {
			has_saved_event_target = event_target_kobold
		}
		event_target:event_target_kobold = {
			add_kobold_minority_size_effect = yes
		}
		small_increase_of_kobold_tolerance_effect = yes
	}
	option = {
		name = insyaa_flavour.20.d
		ai_chance = {
			factor = 5
		}
	}
	after = {
		hidden_effect = {
			clr_country_flag = insyaa_ring_sender_clock
		}
	}
}
country_event = { #Event menager for insyaa_flavour.16
	id = insyaa_flavour.21
	title = insyaa_flavour.16.t
	desc = insyaa_flavour.16.desc1
	picture = kobold_hoard

	is_triggered_only = yes
	hidden = yes

	trigger = {
		country_is_in_gift_ring_region = yes
	}

	immediate = {
		random = {
			chance = 50
			set_country_flag = insyaa_ring_sender_clock
		}
		insyaa_ring_select_region = yes
	}

	option = {
		name = insyaa_flavour.21.a
		ai_chance = {
			factor = 100
		}
		if = {
			limit = {
				calc_true_if = {
					amount = 2
					has_saved_event_target = insyaa_ring_ally
					has_saved_event_target = insyaa_ring_highest_dev
					has_saved_event_target = insyaa_ring_highest_dev_regional
					has_saved_event_target = insyaa_ring_random
				}
			}
			country_event = {
				id = insyaa_flavour.16
			}
		}
		else = {
			random_list = {
				1 = {
					country_event = {
						id = insyaa_flavour.18
					}
				}
				1 = {
					country_event = {
						id = insyaa_flavour.19
					}
				}
			}
		}
	}
}


###Pachpalka Events (30-39)
country_event = { #Strange Kobold Theologian - Pachpalka
	id = insyaa_flavour.30
	title = insyaa_flavour.30.t
	desc = insyaa_flavour.30.d
	picture = BYZ_ADVISOR_eventPicture

	is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
			P30 = { save_event_target_as = pachpalka_origin } #Parmalchaa
			set_saved_name = {
				key = pachpalka_pseudonym
				type = advisor
				scope = event_target:pachpalka_origin
			}
		}
	}

	option = { #Let it never be said that we have no eye for talent.
		name = insyaa_flavour.30.a
		ai_chance = { factor = 85 }
		hire_pachpalka_effect = { type = theologian }
	}
	
	option = { #What a waste of resources!
		name = insyaa_flavour.30.b
		ai_chance = { factor = 15 }
		hidden_effect = { #Pachpalka will move in 5 years
			set_global_flag = pachpalka_on_the_move
		}
	}
	
	after = {
		clear_saved_name = pachpalka_pseudonym
	}
}

country_event = { #Kobold Theologian Departs - Pachpalka
	id = insyaa_flavour.31
	title = insyaa_flavour.31.t
	desc = insyaa_flavour.31.d
	picture = BYZ_ADVISOR_eventPicture

	is_triggered_only = yes

	option = { #If there is a highest good, let us strive for it.
		name = insyaa_flavour.31.a
		pachpalka_leaves_effect = {
			type = theologian
			effect = "
				increase_random_ruler_skill = yes
			"
		}
	}
}

country_event = { #Strange Kobold Merchant - Pachpalka
	id = insyaa_flavour.32
	title = insyaa_flavour.32.t
	desc = insyaa_flavour.32.d
	picture = ADVISOR_eventPicture

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			P30 = { save_event_target_as = pachpalka_origin } #Parmalchaa
			set_saved_name = {
				key = pachpalka_pseudonym
				type = advisor
				scope = event_target:pachpalka_origin
			}
		}
	}

	option = { #Let it never be said that we have no eye for talent.
		name = insyaa_flavour.32.a
		ai_chance = { factor = 85 }
		hire_pachpalka_effect = { type = trader }
	}
	
	option = { #What a waste of resources!
		name = insyaa_flavour.32.b
		ai_chance = { factor = 15 }
		hidden_effect = { #Pachpalka will move in 5 years
			set_global_flag = pachpalka_on_the_move
		}
	}
	
	after = {
		clear_saved_name = pachpalka_pseudonym
	}
}

country_event = { #Kobold Merchant Departs - Pachpalka
	id = insyaa_flavour.33
	title = insyaa_flavour.33.t
	desc = insyaa_flavour.33.d
	picture = ADVISOR_eventPicture

	is_triggered_only = yes

	option = { #Perhaps there is more to wealth than coin.
		name = insyaa_flavour.33.a
		pachpalka_leaves_effect = {
			type = trader
			effect = "
				if = {
					limit = {
						monthly_income = 33
					}
					add_treasury = 200
				}
				else = {
					add_years_of_income = 0.5
				}
			"
		}
	}
}

country_event = { #Strange Kobold Artist - Pachpalka
	id = insyaa_flavour.34
	title = insyaa_flavour.34.t
	desc = insyaa_flavour.34.d
	picture = PAINTER_ARTIST_eventPicture

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			P30 = { save_event_target_as = pachpalka_origin } #Parmalchaa
			set_saved_name = {
				key = pachpalka_pseudonym
				type = advisor
				scope = event_target:pachpalka_origin
			}
		}
	}

	option = { #Let it never be said that we have no eye for talent.
		name = insyaa_flavour.34.a
		ai_chance = { factor = 85 }
		hire_pachpalka_effect = { type = artist }
	}
	
	option = { #What a waste of resources!
		name = insyaa_flavour.34.b
		ai_chance = { factor = 15 }
		hidden_effect = { #Pachpalka will move in 5 years
			set_global_flag = pachpalka_on_the_move
		}
	}
	
	after = {
		clear_saved_name = pachpalka_pseudonym
	}
}

country_event = { #Kobold Artist Departs - Pachpalka
	id = insyaa_flavour.35
	title = insyaa_flavour.35.t
	desc = insyaa_flavour.35.d
	picture = PAINTER_ARTIST_eventPicture

	is_triggered_only = yes
	
	option = { #Change is not always to be feared.
		name = insyaa_flavour.35.a
		pachpalka_leaves_effect = {
			type = artist
			effect = "
				add_prestige_excess_to_splendour_effect = { VAL = 30 }
			"
		}
	}
}

country_event = { #Strange Kobold Philosopher - Pachpalka
	id = insyaa_flavour.36
	title = insyaa_flavour.36.t
	desc = insyaa_flavour.36.d
	picture = ADVISOR_eventPicture

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			P30 = { save_event_target_as = pachpalka_origin } #Parmalchaa
			set_saved_name = {
				key = pachpalka_pseudonym
				type = advisor
				scope = event_target:pachpalka_origin
			}
		}
	}

	option = { #Let it never be said that we have no eye for talent.
		name = insyaa_flavour.36.a
		ai_chance = { factor = 85 }
		hire_pachpalka_effect = { type = philosopher }
	}
	
	option = { #What a waste of resources!
		name = insyaa_flavour.36.b
		ai_chance = { factor = 15 }
		hidden_effect = { #Pachpalka will move in 5 years
			set_global_flag = pachpalka_on_the_move
		}
	}
	
	after = {
		clear_saved_name = pachpalka_pseudonym
	}
}

country_event = { #Kobold Philosopher Departs - Pachpalka
	id = insyaa_flavour.37
	title = insyaa_flavour.37.t
	desc = insyaa_flavour.37.d
	picture = ADVISOR_eventPicture

	is_triggered_only = yes

	option = { #Perhaps they will.
		name = insyaa_flavour.37.a
		pachpalka_leaves_effect = {
			type = philosopher
			effect = "
				add_stability_or_adm_power = yes
			"
		}
	}
}

###Mechanim events (40-49)
country_event = { # Poetry Ascendant
	id = insyaa_flavour.40
	title = insyaa_flavour.40.t
	desc = insyaa_flavour.40.d
	picture = BIG_BOOK_eventPicture

	is_triggered_only = yes

	trigger = {
		has_country_modifier = mechanim_administration
		NOT = {
			has_country_modifier = insyaa_poetry_ascendant
			has_country_modifier = insyaa_poetry_ascendant_cooldown
		}
	}

	option = {
		name = insyaa_flavour.40.a
		add_country_modifier = {
			name = insyaa_poetry_ascendant
			duration = 1825 # 5 years
		}
	}
	option = {
		name = insyaa_flavour.40.b
		add_country_modifier = {
			name = insyaa_poetry_ascendant_cooldown
			duration = 1825 # 5 years
			hidden = yes
		}
		if = {
			limit = {
				monthly_income = 333
			}
			add_treasury = -1000
		}
		else = {
			add_years_of_income = -0.25
		}
		add_prestige = 10
		add_dip_power = 50
	}
	option = {
		name = insyaa_flavour.40.c
		highlight = yes
		trigger = {
			OR = {
				ruler_has_personality = scholar_personality
				ruler_has_personality = patron_of_arts_personality
			}
		}
		add_country_modifier = {
			name = insyaa_poetry_ascendant_cooldown
			duration = 1825 # 5 years
			hidden = yes
		}
		add_prestige = 10
		add_dip_power = 50
	}
}

country_event = { #an issue in communication
	id = insyaa_flavour.41
	title = insyaa_flavour.41.t
	desc = insyaa_flavour.41.d
	picture = ACCUSATION_eventPicture

	is_triggered_only = yes

	trigger = {
		has_country_modifier = mechanim_administration
		any_neighbor_country = {
			NOT = {
				has_country_modifier = mechanim_administration
				has_opinion_modifier = {
					who = ROOT
					modifier = insyaa_communication_apologize
				}
				has_opinion_modifier = {
					who = ROOT
					modifier = insyaa_communication_neutral
				}
				has_opinion_modifier = {
					who = ROOT
					modifier = insyaa_communication_insult
				}
			}
		}
	}
	immediate = {
		hidden_effect = {
			random_neighbor_country = {
				limit = {
					NOT = {
						has_country_modifier = mechanim_administration
						has_opinion_modifier = {
							who = ROOT
							modifier = insyaa_communication_apologize
						}
						has_opinion_modifier = {
							who = ROOT
							modifier = insyaa_communication_neutral
						}
						has_opinion_modifier = {
							who = ROOT
							modifier = insyaa_communication_insult
						}
					}
				}
				save_event_target_as = communication_issue_target
			}
		}
	}

	option = {
		name = insyaa_flavour.41.a
		reverse_add_opinion = {
			who = event_target:communication_issue_target
			modifier = insyaa_communication_apologize
		}
		add_prestige = -10
	}
	option = {
		name = insyaa_flavour.41.b
		reverse_add_opinion = {
			who = event_target:communication_issue_target
			modifier = insyaa_communication_neutral
		}
		add_prestige = 10
	}
	option = {
		name = insyaa_flavour.41.c
		highlight = yes
		trigger = {
			ruler_has_personality = petty_personality
		}
		reverse_add_opinion = {
			who = event_target:communication_issue_target
			modifier = insyaa_communication_insult
		}
		add_treasury = 50
		reverse_add_casus_belli = {
			target = event_target:communication_issue_target
			type = cb_insult
			months = 12
		}
	}
}

country_event = { #soaring impression
	id = insyaa_flavour.42
	title = insyaa_flavour.42.t
	desc = insyaa_flavour.42.d
	picture = CULTURE_eventPicture

	is_triggered_only = yes

	trigger = {
		has_country_modifier = mechanim_administration
		NOT = {
			has_country_modifier = insyaa_soaring_impression
			has_country_modifier = insyaa_soaring_impression_cooldown
		}
	}

	option = {
		name = insyaa_flavour.42.a
		add_prestige = 10
		add_country_modifier = {
			name = insyaa_soaring_impression
			duration = 7300 # 20 years
		}
	}
	option = {
		name = insyaa_flavour.42.b
		add_prestige = -10
		if = {
			limit = {
				monthly_income = 333
			}
			add_treasury = 1000
		}
		else = {
			add_years_of_income = 0.25
		}
		add_country_modifier = {
			name = insyaa_soaring_impression_cooldown
			duration = 7300 # 20 years
			hidden = yes
		}
	}
	option = {
		name = insyaa_flavour.42.c
		highlight = yes
		trigger = {
			ruler_has_personality = entrepreneur_personality
		}
		add_prestige = 5
		if = {
			limit = {
				monthly_income = 250
			}
			add_treasury = 1000
		}
		else = {
			add_years_of_income = 0.34
		}
		add_country_modifier = {
			name = insyaa_soaring_impression_cooldown
			duration = 7300 # 20 years
			hidden = yes
		}
	}
}

country_event = { #Mechanim Over Forcelimit event
	id = insyaa_flavour.100
	title = insyaa_flavour.100.t
	desc = insyaa_flavour.100.d
	picture = OVEREXTENSION_eventPicture

	is_triggered_only = yes

	trigger = {
		ai = no
		has_country_modifier = mechanim_military
		army_size_percentage = 1.001
		NOT = { has_country_modifier = mechanim_over_forcelimit }
	}

	option = {
		name = insyaa_flavour.100.a
		if = {
			limit = { army_size_percentage = 1.001 }
			add_country_modifier = {
				name = mechanim_over_forcelimit
				duration = -1
			}
			custom_tooltip = mechanim_over_forcelimit_tt
		}
	}
}
