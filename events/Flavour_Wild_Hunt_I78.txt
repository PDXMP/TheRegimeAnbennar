#
namespace = flavour_wild_hunt

#0 - Startup event
#1-5 - mission-triggered events
#6-10 - Second Great Incursion events
#11-18 - Eye of the Storm events
#19-21 - Ending events
#22 - Call to arms

country_event = {
	id = flavour_wild_hunt.0
	title = flavour_wild_hunt.0.t
	desc = flavour_wild_hunt.0.d
	picture = LOOMING_DEATH_eventPicture
	is_triggered_only = yes
	fire_only_once = yes
	major = yes
	
	trigger = { tag = I78 }

	immediate = {
		hidden_effect = {
			add_disaster_progress = {
				disaster = eye_of_the_storm
				value = 100
			}
		}
	}
	
	option = {
		name = flavour_wild_hunt.0.a
		custom_tooltip = I78_start_tt
		add_country_modifier = {
			name = I78_the_lost_ones
			duration = -1
		}
		custom_tooltip = I78_do_not_expand_tt
		add_stability = -1
		add_horde_unity = -95
		add_prestige = -20
		custom_tooltip = I78_start_autonomy_tt
		hidden_effect = {
			set_country_flag = I78_block_KU_flag
			every_owned_province = { add_local_autonomy = 60 }
			every_known_country = {
				limit = {
					has_country_modifier = lake_federation_member
				}
				add_truce_with = ROOT
			}
			country_event = {
				id = flavour_wild_hunt.18
				days = 5475 #15 years
			}
		}
		remove_country_modifier = nomadic_capital_just_moved
	}
}

country_event = {
	id = flavour_wild_hunt.1
	title = flavour_wild_hunt.1.t
	desc = flavour_wild_hunt.1.d
	picture = VILLAGE_BURNING_eventPicture
	is_triggered_only = yes
	fire_only_once = yes

	trigger = {
		NOT = {
			offensive_war_with = I50
			defensive_war_with = I50
		}
	}

	option = {
		name = flavour_wild_hunt.1.a
		ai_chance = { factor = 100 }
		add_prestige = -10
		add_opinion = {
			who = I50
			modifier = I78_refused_to_aid_ruin_bringer
		}
		set_country_flag = I78_refused_to_aid_ruin_bringer_flag
	}
	
	option = {
		name = flavour_wild_hunt.1.b
		ai_chance = { factor = 0 }
		join_all_defensive_wars_of = I50
		join_all_offensive_wars_of = I50
		add_opinion = {
			who = I50
			modifier = I78_aided_ruin_bringer
		}
		every_subject_country = { add_liberty_desire = -20 }
		set_country_flag = I78_aided_ruin_bringer_flag
	}
}

country_event = {
	id = flavour_wild_hunt.2
	title = flavour_wild_hunt.2.t
	desc = flavour_wild_hunt.2.d
	picture = MONGOL_BANNERS_eventPicture
	is_triggered_only = yes
	
	option = {
		name = flavour_wild_hunt.2.a
		end_disaster = eye_of_the_storm
		set_country_flag = I78_stop_disaster
		remove_country_modifier = I78_the_lost_ones
		add_country_modifier = {
			name = I78_sons_of_the_fallen
			duration = -1
		}
		custom_tooltip = I78_caehns_authority_enable_tt
		if = {
			limit = { has_ruler_flag = I78_starting_ruler_flag }
			add_ruler_modifier = {
				name = exceptional_willpower_100
				duration = -1
			}
			change_adm = 2
			change_dip = 2
			change_mil = 2
		}
		hidden_effect = {
			if = {
				limit = { ai = no }
				set_country_flag = I78_caehns_authority_enabled
			}
			add_country_modifier = {
				name = I78_caehns_authority
				duration = -1
			}
		}
		custom_tooltip = I78_do_not_expand_tt
	}
}

country_event = {
	id = flavour_wild_hunt.3
	title = flavour_wild_hunt.3.t
	desc = flavour_wild_hunt.3.d
	picture = HUSSARS_eventPicture
	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			select_highest_dev_known_country_with_limit = {
				index = 0
				limit = "
				has_country_modifier = centaur_administration
				NOT = { tag = ROOT }
				NOT = { is_subject_of = ROOT }
				"
				effect = "save_event_target_as = I78_enemy_centaur_target"
			}
		}
	}

	option = {
		name = flavour_wild_hunt.3.a
		event_target:I78_enemy_centaur_target = {
			hidden_effect = {
				if = {
					limit = { ai = yes }
					every_war_enemy_country = {
						white_peace = PREV 
					}
				}
			}
			add_manpower = 5
			add_country_modifier = {
				name = I78_against_the_old_dogs
				duration = -1
			}
			set_country_flag = I78_biggest_dog
		}
		declare_war_with_cb = {
			casus_belli = cb_humiliate
			who = event_target:I78_enemy_centaur_target
		}
	}

	option = {
		name = flavour_wild_hunt.3.b
		add_prestige = -10
	}
}

country_event = {
	id = flavour_wild_hunt.4
	title = flavour_wild_hunt.4.t
	desc = flavour_wild_hunt.4.d
	picture = MAGE_MOON_eventPicture
	is_triggered_only = yes
	major = yes

	immediate = {
		hidden_effect = {
			random_country = {
				limit = { is_lake_federation_leader = yes }
				save_event_target_as = event_country
			}
		}
	}
	
	option = {
		name = flavour_wild_hunt.4.a
		hidden_effect = {
			every_country = {
				limit = {
					OR = {
						has_country_modifier = centaur_administration
						culture_group = triunic
					}
				}
				every_war_enemy_country = {
					white_peace = PREV
				}
			}
		}
		declare_war_with_cb = {
			casus_belli = cb_the_great_invasion
			who = event_target:event_country
		}
		custom_tooltip = I78_lake_fed_join_tt
		hidden_effect = {
			every_country = {
				limit = { has_country_modifier = lake_federation_member }
				join_all_defensive_wars_of = event_target:event_country
			}
		}
		add_country_modifier = {
			name = I78_the_great_hunt
			duration = -1
		}
		random_known_country = {
			limit = { 
				has_country_modifier = centaur_administration 
				ai = yes 
			}
			country_event = { id = flavour_wild_hunt.5 }
		}
		set_global_flag = I78_caehns_authority_double_no_war
		if = {
			limit = { has_country_flag = I78_tooled_the_mages }
			create_war_wizard = yes
			select_highest_dev_known_country_with_limit = {
				index = 0
				limit = "
				has_country_modifier = centaur_administration
				NOT = { tag = ROOT }
				NOT = { is_subject_of = ROOT }
				"
				effect = "create_war_wizard = yes"
			}
		}
	}
}

country_event = {
	id = flavour_wild_hunt.5
	title = flavour_wild_hunt.5.t
	desc = flavour_wild_hunt.5.d
	picture = MAGE_MOON_eventPicture
	is_triggered_only = yes
	major = yes
	
	option = {
		name = flavour_wild_hunt.5.a

		join_all_offensive_wars_of = I78
		add_manpower = 5
		add_country_modifier = {
			name = I78_call_of_the_caehn
			duration = -1
		}
		every_known_country = {
			limit = { has_country_modifier = centaur_administration ai = yes NOT = { is_subject_of = I78 } }
			join_all_offensive_wars_of = I78
			add_manpower = 5
			add_country_modifier = {
				name = I78_call_of_the_caehn
				duration = -1
			}
		}		
	}
}

country_event = {
	id = flavour_wild_hunt.6
	title = flavour_wild_hunt.6.t
	desc = flavour_wild_hunt.6.d
	picture = UNDEAD_ARMY_eventPicture
	is_triggered_only = yes
	fire_only_once = yes
	
	option = {
		name = flavour_wild_hunt.6.a
		add_prestige = 10
		add_country_modifier = {
			name = I78_spirits_in_the_army
			duration = 1825 #5 years
		}
	}
}

country_event = {
	id = flavour_wild_hunt.7
	title = flavour_wild_hunt.7.t
	desc = flavour_wild_hunt.7.d
	picture = VILLAGE_BURNING_eventPicture
	is_triggered_only = yes
	fire_only_once = yes
	
	option = {
		name = flavour_wild_hunt.7.a
		add_prestige = 10
		5239 = { change_controller = ROOT }
		custom_tooltip = I78_garrison_tt
		hidden_effect = {
			every_known_country = {
				limit = { has_country_modifier = human_administration }
				5239 = { kill_units = { who = PREV } }
			}
		}
	}
}

country_event = {
	id = flavour_wild_hunt.8
	title = flavour_wild_hunt.8.t
	desc = flavour_wild_hunt.8.d
	picture = CENTAUR_CAMPFIRE_eventPicture
	is_triggered_only = yes
	fire_only_once = yes

	immediate = {
		hidden_effect = {
			random_province = {
				limit = {
					superregion = forbidden_lands_superregion
					sieged_by = ROOT
					owner = { has_country_modifier = human_administration }
				}
				save_event_target_as = event_province
			}
		}
	}
	
	option = {
		name = flavour_wild_hunt.8.a
		event_target:event_province = {
			change_controller = ROOT
		}
	}
}

country_event = {
	id = flavour_wild_hunt.9
	title = flavour_wild_hunt.9.t
	desc = flavour_wild_hunt.9.d
	picture = VILLAGE_RAIDED_eventPicture
	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = flavour_wild_hunt.9.a

		custom_tooltip = I78_wild_hunt_blood_prestige_tt
		hidden_effect = {
			every_known_country = {
				limit = { has_country_modifier = centaur_administration }
				add_prestige = 10
				add_horde_unity = 10
			}
			add_prestige = 10
			add_horde_unity = 10
		}
	}
}

country_event = {
	id = flavour_wild_hunt.10
	title = flavour_wild_hunt.10.t
	desc = flavour_wild_hunt.10.d
	picture = MAGE_MOON_ALTER_eventPicture
	is_triggered_only = yes
	fire_only_once = yes
	
	option = {
		name = flavour_wild_hunt.10.a
		add_prestige = 20
		add_horde_unity = 10
		add_church_power = 200
		add_ruler_modifier = {
			name = I78_aspect_of_irdaeos
			duration = -1
		}
	}
}

country_event = {
	id = flavour_wild_hunt.11
	title = flavour_wild_hunt.11.t
	desc = flavour_wild_hunt.11.d
	picture = FARMING_WIFE_eventPicture
	is_triggered_only = yes
	
	immediate = { hidden_effect = { random_owned_province = { save_event_target_as = event_province } } }

	option = {
		name = flavour_wild_hunt.11.a
		event_target:event_province = { add_local_autonomy = 20 }
	}

	option = {
		name = flavour_wild_hunt.11.b
		event_target:event_province = { add_base_manpower = -1 }
	}
}

country_event = {
	id = flavour_wild_hunt.12
	title = flavour_wild_hunt.12.t
	desc = flavour_wild_hunt.12.d
	picture = PRIEST_PHANTOM_eventPicture
	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = flavour_wild_hunt.12.a
		add_stability = -1
	}
}

country_event = {
	id = flavour_wild_hunt.13
	title = flavour_wild_hunt.13.t
	desc = flavour_wild_hunt.13.d
	picture = CENTAUR_CAMPFIRE_eventPicture
	is_triggered_only = yes

	trigger = {
		NOT = {
			has_country_modifier = I78_locals_fucked
			has_country_flag = I78_block_shamans
		}
	}

	option = {
		name = flavour_wild_hunt.13.a
		reduce_estate_monstrous_tribes_loyalty_effect = yes
		reduce_estate_mages_loyalty_effect = yes
		add_adm_power = -50
	}

	option = {
		name = flavour_wild_hunt.13.b
		add_country_modifier = {
			name = I78_locals_fucked
			duration = 3650 #10 years
		}
		add_prestige = -20
	}
}

country_event = {
	id = flavour_wild_hunt.14
	title = flavour_wild_hunt.14.t
	desc = flavour_wild_hunt.14.d
	picture = ACCUSATION_eventPicture
	is_triggered_only = yes

	trigger = {
		is_year = 1449
		NOT = { has_country_flag = I78_block_subject_challenge }
	}

	option = {
		name = flavour_wild_hunt.14.a
		every_subject_country = {
			add_country_modifier = {
				name = I78_pathetic_overlord
				duration = 3650 #10 years
			}
			if = {
				limit = {
					liberty_desire = 80
					NOT = { has_country_flag = I78_subject_rebelled }
				}
				declare_war_with_cb = {
					casus_belli = cb_independence_war
					who = ROOT
				}
				set_country_flag = I78_subject_rebelled
			}
		}
	}
}

country_event = {
	id = flavour_wild_hunt.15
	title = flavour_wild_hunt.15.t
	desc = flavour_wild_hunt.15.d
	picture = DEBATE_REPUBLICAN_eventPicture
	is_triggered_only = yes

	trigger = { any_owned_province = { NOT = { has_province_modifier = I78_ratioed_jordans } } }
	
	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = { NOT = { has_province_modifier = I78_ratioed_jordans } }
				save_event_target_as = event_province
			}
		}
	}

	option = {
		name = flavour_wild_hunt.15.a
		event_target:event_province = {
			add_province_modifier = {
				name = I78_ratioed_jordans
				duration = 1825 #5 years
			}
			add_base_tax = -1
		}
	}

	option = {
		name = flavour_wild_hunt.15.b
		add_prestige = -10
		add_church_power = -25
	}
}

country_event = {
	id = flavour_wild_hunt.16
	title = flavour_wild_hunt.16.t
	desc = flavour_wild_hunt.16.d
	picture = BORDER_TENSION_eventPicture
	is_triggered_only = yes

	trigger = { num_of_total_ports = 1 }
	
	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = { has_port = yes }
				save_event_target_as = event_province
			}
		}
	}

	option = {
		name = flavour_wild_hunt.16.a
		add_treasury = -50
		add_prestige = -10
	}

	option = {
		name = flavour_wild_hunt.16.b
		event_target:event_province = { add_devastation = 20 }
		add_horde_unity = -10
	}
}

country_event = {
	id = flavour_wild_hunt.17
	title = flavour_wild_hunt.17.t
	desc = flavour_wild_hunt.17.d
	picture = RELIGIOUS_TURMOIL_eventPicture
	is_triggered_only = yes

	trigger = { NOT = { has_country_flag = I78_block_irdaeos } }

	option = {
		name = flavour_wild_hunt.17.a
		add_horde_unity = -10
		irdaeos_worship_remove_random_aspect = yes
	}
}

country_event = {
	id = flavour_wild_hunt.18
	title = flavour_wild_hunt.18.t
	desc = flavour_wild_hunt.18.d
	picture = DEATH_OF_HEIR_eventPicture
	is_triggered_only = yes

	trigger = { has_disaster = eye_of_the_storm }

	option = {
		name = flavour_wild_hunt.18.a
		kill_ruler = yes
		custom_tooltip = I78_10_claims_cores_tt
		hidden_effect = {
			for = {
				amount = 10
				effect = "random_owned_province = {
					random_country = {
						limit = {
							has_country_modifier = lake_federation_member
							capital_scope = { superregion = forbidden_lands_superregion }
						}
						PREV = { add_claim = PREV }
					}
				}"
			}
			for = {
				amount = 10
				effect = "random_owned_province = {
					random_country = {
						limit = {
							has_country_modifier = centaur_administration
							capital_scope = { superregion = forbidden_lands_superregion }
							NOT = { tag = I78 }
						}
						PREV = { add_core = PREV }
					}
				}"
			}
		}
	}
}

country_event = {
	id = flavour_wild_hunt.19
	title = flavour_wild_hunt.19.t
	desc = flavour_wild_hunt.19.d
	picture = HORDE_ON_HORSEBACK_eventPicture
	is_triggered_only = yes

	option = {
		name = flavour_wild_hunt.19.a
		south_yarikhoi_region = {
			add_devastation = 20
			if = {
				limit = { has_terrain = city_terrain }
				add_base_tax = -2
				add_base_production = -2
				add_base_manpower = -2
			}
		}
		north_yarikhoi_region = {
			add_devastation = 20
			if = {
				limit = { has_terrain = city_terrain }
				add_base_tax = -2
				add_base_production = -2
				add_base_manpower = -2
			}
		}
		bocenvokin_area = {
			cede_province = ROOT
		}
		prikoyol_area = {
			cede_province = ROOT
		}
		remove_country_modifier = I78_the_heirs_to_the_hunt
		clr_country_flag = I78_caehns_authority_enabled
		clr_country_flag = I78_block_KU_flag
		add_country_modifier = {
			name = I78_the_great_caehnate
			duration = -1
		}	
		custom_tooltip = I78_ascendancy_of_the_wild_hunt_tt
		hidden_effect = {
			every_known_country = {
				limit = {
					OR = {
						religious_school = {
							group = centaur_religion
							school = filustkhuga_school
						}
						religious_school = {
							group = centaur_religion
							school = malukhuga_school
						}
					}
				}
				ROOT = { inherit = PREV }
			}
			every_known_country = {
				limit = {
					OR = {
						religious_school = {
							group = centaur_religion
							school = maslekhuga_school
						}
						religious_school = {
							group = centaur_religion
							school = irdukhuga_school
						}
					}
				}
				ROOT = { vassalize = PREV }
				add_liberty_desire = -100
			}
		}

		if = {
			limit = { has_ruler_flag = I78_starting_ruler_flag adm = 5 dip = 5 mil = 5 }
			hidden_effect = {
				change_adm = 1
				change_dip = 1
				change_mil = 1
				remove_ruler_personality = drunkard_personality
				add_ruler_personality = legendary_conqueror_personality
				set_ruler_flag = I78_caehn_of_the_storm_title
				set_country_flag = I78_swell_guy
			}
			custom_tooltip = I78_chad_alive_yes_tt
		}
		else = { custom_tooltip = I78_chad_alive_no_tt }
		tooltip = {
			change_adm = 1
			change_dip = 1
			change_mil = 1
			remove_ruler_personality = drunkard_personality
			add_ruler_personality = legendary_conqueror_personality
		}
		if = {
			limit = { has_ruler_flag = I78_starting_ruler_flag NOT = { AND = { adm = 5 dip = 5 mil = 5 } } }
			hidden_effect = {
				change_adm = 1
				change_dip = 1
				change_mil = 1
				remove_ruler_personality = drunkard_personality
				add_ruler_personality = conqueror_personality
			}
			custom_tooltip = I78_else_alive_yes_tt
		}
		else = { custom_tooltip = I78_else_alive_no_tt }
		tooltip = {
			change_adm = 1
			change_dip = 1
			change_mil = 1
			remove_ruler_personality = drunkard_personality
			add_ruler_personality = conqueror_personality
		}
		clr_global_flag = I78_caehns_authority_double_no_war
	}
}

country_event = {
	id = flavour_wild_hunt.20
	title = flavour_wild_hunt.20.t
	desc = flavour_wild_hunt.20.d
	picture = COUNTRY_COLLAPSE_eventPicture
	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			random_country = {
				limit = {
					is_lake_federation_leader = yes
				}
				save_event_target_as = event_country
			}
		}
	}

	option = {
		name = flavour_wild_hunt.20.a
		remove_country_modifier = I78_the_heirs_to_the_hunt
		remove_country_modifier = I78_the_great_hunt
		clr_country_flag = I78_livestock_upgrade
		clr_country_flag = I78_tooled_the_mages
		clr_country_flag = I78_caehns_authority_enabled
		clr_country_flag = I78_caehns_authority_hre
		clr_global_flag = I78_caehns_authority_no_war
		clr_global_flag = I78_caehns_authority_double_no_war
		kill_ruler = yes
		
		custom_tooltip = I78_the_end_is_here_tt
		hidden_effect = {
			set_capital = 5136
			every_known_country = {
				remove_country_modifier = I78_call_of_the_caehn
			}
			release_all_subjects = yes
			release_all_possible_countries = yes
			every_owned_province = {
				limit = { NOT = { province_id = 5136 } }
				cede_province = event_target:event_country
			}
		}
	}
}

country_event = {
	id = flavour_wild_hunt.21
	title = flavour_wild_hunt.21.t
	desc = flavour_wild_hunt.21.d
	picture = DEATH_OF_HEIR_eventPicture
	is_triggered_only = yes
	fire_only_once = yes

	trigger = {
		has_country_flag = I78_swell_guy
	}

	option = {
		name = flavour_wild_hunt.21.a
		add_country_modifier = {
			name = I78_one_thousand
			duration = 3650 #10 years
		}
		if = {
			limit = { NOT = { has_country_flag = centaur_no_zeal } }
			custom_tooltip = centaur_zeal_5_tooltip
			hidden_effect = { change_variable = { centaur_zeal = 5 } }
		}
		clr_country_flag = I78_swell_guy
	}
}

country_event = {
	id = flavour_wild_hunt.22
	title = flavour_wild_hunt.22.t
	desc = flavour_wild_hunt.22.d
	picture = MONGOL_BANNERS_eventPicture
	is_triggered_only = yes

	option = {
		name = flavour_wild_hunt.22.a
		join_all_defensive_wars_of = event_target:event_country
		increase_caehns_authority = yes
		change_variable = {
			which = CaehnsProtection
			value = 1
		}
	}

	option = {
		name = flavour_wild_hunt.22.b
	}
}

country_event = {
	id = flavour_wild_hunt.24
	title = flavour_wild_hunt.23.t
	desc = flavour_wild_hunt.23.d
	picture = CONQUEST_eventPicture
	is_triggered_only = yes
	hidden = yes

	option = {
		name = flavour_wild_hunt.23.a
		clr_country_flag = I78_biggest_dog
		release_all_possible_countries = yes
		every_owned_province = { cede_province = I78 }
		I78 = {
			increase_caehns_authority = yes
			increase_caehns_authority = yes
		}
	}
}

country_event = {
	id = flavour_wild_hunt.25
	title = flavour_wild_hunt.23.t
	desc = flavour_wild_hunt.23.d
	picture = CONQUEST_eventPicture
	is_triggered_only = yes
	hidden = yes

	trigger = {
		tag = I78
		has_global_flag = I78_caehns_authority_double_no_war
	}

	option = {
		name = flavour_wild_hunt.23.a
		random_list = {
			4 = {
				trigger = {
					forbidden_lands_superregion = {
						sieged_by = ROOT
						owner = { has_country_modifier = human_administration }
					}
				}
				country_event = {
					id = flavour_wild_hunt.8
				}
			}
			4 = {
				trigger = {
					war_score = 1
				}
				country_event = {
					id = flavour_wild_hunt.9
				}
			}
			1 = {
				trigger = {
					war_score = 50
				}
				country_event = {
					id = flavour_wild_hunt.10
				}
			}
			9 = {}
		}
	}
}