#Segmentation:
#Event 0 - Religion spawn event
#Event 1 - Ruler Death Event
#Events 2-100 - Unused

namespace = molten_eternity

#Religion spawn event
country_event = {
	id = molten_eternity.0
	title = molten_eternity.0.t
	desc = molten_eternity.0.d
	picture = ARTWORK_eventPicture

	is_triggered_only = yes
	major = yes

	option = { #Convert
		name = molten_eternity.0.a
		ai_chance = { factor = 70 }

		enable_religion = molten_eternity
		change_religion = molten_eternity
		set_ruler_religion = molten_eternity
		set_heir_religion = molten_eternity
		set_consort_religion = molten_eternity

		add_country_modifier = {
			name = molten_eternity_convert_buff
			duration = 7300
		}

		6919 = {
			change_religion = molten_eternity
			add_reform_center = molten_eternity
			add_permanent_province_modifier = {
				name = "religious_zeal_at_conv"
				duration = 9000
			}
		}
	}

	option = { #Ok
		name = molten_eternity.0.b
		ai_chance = { factor = 30 }

		enable_religion = molten_eternity
		6919 = {
			change_religion = molten_eternity
			add_reform_center = molten_eternity
			add_permanent_province_modifier = {
				name = "religious_zeal_at_conv"
				duration = 9000
			}
		}
	}
}

#Ruler death event
country_event = {
	id = molten_eternity.1
	title = molten_eternity.1.t
	desc = molten_eternity.1.d
	picture = ARTWORK_eventPicture

	is_triggered_only = yes

	trigger = { religion = molten_eternity }

	immediate = {
		hidden_effect = {
			set_country_flag = molten_eternity_ruler_recently_died
			remove_country_modifier = molten_eternity_smr_0
			remove_country_modifier = molten_eternity_smr_1
			remove_country_modifier = molten_eternity_smr_2
			remove_country_modifier = molten_eternity_smt_0
			remove_country_modifier = molten_eternity_smt_1
			remove_country_modifier = molten_eternity_smt_2
			remove_country_modifier = molten_eternity_isg_0
			remove_country_modifier = molten_eternity_isg_1
			remove_country_modifier = molten_eternity_isg_2
			remove_country_modifier = molten_eternity_ise_0
			remove_country_modifier = molten_eternity_ise_1
			remove_country_modifier = molten_eternity_ise_2
			remove_country_modifier = molten_eternity_vtz_0
			remove_country_modifier = molten_eternity_vtz_1
			remove_country_modifier = molten_eternity_vtz_2
			remove_country_modifier = molten_eternity_vtp_0
			remove_country_modifier = molten_eternity_vtp_1
			remove_country_modifier = molten_eternity_vtp_2
			remove_country_modifier = molten_eternity_empty_1
			remove_country_modifier = molten_eternity_empty_2
			if = {
				limit = {
					OR = {
						has_country_flag = molten_eternity_smr_flag
						has_country_flag = molten_eternity_smt_flag
					}
				}
				every_owned_province = {
					limit = { holy_order = kihokamalama_order }
					owner = {
						change_variable = {
							which = moltenEternityProvinceVar
							value = 1
						}
					}
				}
			}
			else_if = {
				limit = {
					OR = {
						has_country_flag = molten_eternity_isg_flag
						has_country_flag = molten_eternity_ise_flag
					}
				}
				every_owned_province = {
					limit = { holy_order = tumirbedi_order }
					owner = {
						change_variable = {
							which = moltenEternityProvinceVar
							value = 1
						}
					}
				}
			}
			else_if = {
				limit = {
					OR = {
						has_country_flag = molten_eternity_vtz_flag
						has_country_flag = molten_eternity_vtp_flag
					}
				}
				every_owned_province = {
					limit = { holy_order = tlokopinaztica_order }
					owner = {
						change_variable = {
							which = moltenEternityProvinceVar
							value = 1
						}
					}
				}
			}
			if = {
				limit = {
					check_variable = {
						which = moltenEternityObligationVar
						value = 2400
					}
				}
				multiply_variable = {
					which = moltenEternityProvinceVar
					value = 2
				}
			}
		}
	}

	option = { #Exceeded
		name = molten_eternity.1.a
		trigger = {
			check_variable = {
				which = moltenEternityObligationVar
				value = 2400
			}
		}
		if = {
			limit = { has_country_flag = molten_eternity_smr_flag }
			hidden_effect = {
				every_owned_province = {
					limit = { holy_order = kihokamalama_order }
					add_base_tax = 2
				}
				every_owned_province = {
					limit = { holy_order = kihokamalama_order }
					holy_order = no_holy_order
				}
			}
			add_country_modifier = {
				name = molten_eternity_smr_2
				duration = -1
			}
		}
		else_if = {
			limit = { has_country_flag = molten_eternity_smt_flag }
			hidden_effect = {
				every_owned_province = {
					limit = { holy_order = kihokamalama_order }
					add_base_tax = 2
				}
				every_owned_province = {
					limit = { holy_order = kihokamalama_order }
					holy_order = no_holy_order
				}
			}
			add_country_modifier = {
				name = molten_eternity_smt_2
				duration = -1
			}
		}
		else_if = {
			limit = { has_country_flag = molten_eternity_isg_flag }
			hidden_effect = {
				every_owned_province = {
					limit = { holy_order = tumirbedi_order }
					add_base_production = 2
				}
				every_owned_province = {
					limit = { holy_order = tumirbedi_order }
					holy_order = no_holy_order
				}
			}
			add_country_modifier = {
				name = molten_eternity_isg_2
				duration = -1
			}
		}
		else_if = {
			limit = { has_country_flag = molten_eternity_ise_flag }
			hidden_effect = {
				every_owned_province = {
					limit = { holy_order = tumirbedi_order }
					add_base_production = 2
				}
				every_owned_province = {
					limit = { holy_order = tumirbedi_order }
					holy_order = no_holy_order
				}
			}
			add_country_modifier = {
				name = molten_eternity_ise_2
				duration = -1
			}
		}
		else_if = {
			limit = { has_country_flag = molten_eternity_vtz_flag }
			hidden_effect = {
				every_owned_province = {
					limit = { holy_order = tlokopinaztica_order }
					add_base_manpower = 2
				}
				every_owned_province = {
					limit = { holy_order = tlokopinaztica_order }
					holy_order = no_holy_order
				}
			}
			add_country_modifier = {
				name = molten_eternity_vtz_2
				duration = -1
			}
		}
		else_if = {
			limit = { has_country_flag = molten_eternity_vtp_flag }
			hidden_effect = {
				every_owned_province = {
					limit = { holy_order = tlokopinaztica_order }
					add_base_manpower = 2
				}
				every_owned_province = {
					limit = { holy_order = tlokopinaztica_order }
					holy_order = no_holy_order
				}
			}
			add_country_modifier = {
				name = molten_eternity_vtp_2
				duration = -1
			}
		}
		custom_tooltip = molten_eternity_dev_tt
	}
	option = { #Fulfilled
		name = molten_eternity.1.b
		trigger = {
			check_variable = {
				which = moltenEternityObligationVar
				value = 1200
			}
			NOT = {
				check_variable = {
					which = moltenEternityObligationVar
					value = 2400
				}
			}
		}
		if = {
			limit = { has_country_flag = molten_eternity_smr_flag }
			hidden_effect = {
				every_owned_province = {
					limit = { holy_order = kihokamalama_order }
					add_base_tax = 1
				}
				every_owned_province = {
					limit = { holy_order = kihokamalama_order }
					holy_order = no_holy_order
				}
			}
			add_country_modifier = {
				name = molten_eternity_smr_1
				duration = -1
			}
		}
		else_if = {
			limit = { has_country_flag = molten_eternity_smt_flag }
			hidden_effect = {
				every_owned_province = {
					limit = { holy_order = kihokamalama_order }
					add_base_tax = 1
				}
				every_owned_province = {
					limit = { holy_order = kihokamalama_order }
					holy_order = no_holy_order
				}
			}
			add_country_modifier = {
				name = molten_eternity_smt_1
				duration = -1
			}
		}
		else_if = {
			limit = { has_country_flag = molten_eternity_isg_flag }
			hidden_effect = {
				every_owned_province = {
					limit = { holy_order = tumirbedi_order }
					add_base_production = 1
				}
				every_owned_province = {
					limit = { holy_order = tumirbedi_order }
					holy_order = no_holy_order
				}
			}
			add_country_modifier = {
				name = molten_eternity_isg_1
				duration = -1
			}
		}
		else_if = {
			limit = { has_country_flag = molten_eternity_ise_flag }
			hidden_effect = {
				every_owned_province = {
					limit = { holy_order = tumirbedi_order }
					add_base_production = 1
				}
				every_owned_province = {
					limit = { holy_order = tumirbedi_order }
					holy_order = no_holy_order
				}
			}
			add_country_modifier = {
				name = molten_eternity_ise_1
				duration = -1
			}
		}
		else_if = {
			limit = { has_country_flag = molten_eternity_vtz_flag }
			hidden_effect = {
				every_owned_province = {
					limit = { holy_order = tlokopinaztica_order }
					add_base_manpower = 1
				}
				every_owned_province = {
					limit = { holy_order = tlokopinaztica_order }
					holy_order = no_holy_order
				}
			}
			add_country_modifier = {
				name = molten_eternity_vtz_1
				duration = -1
			}
		}
		else_if = {
			limit = { has_country_flag = molten_eternity_vtp_flag }
			hidden_effect = {
				every_owned_province = {
					limit = { holy_order = tlokopinaztica_order }
					add_base_manpower = 1
				}
				every_owned_province = {
					limit = { holy_order = tlokopinaztica_order }
					holy_order = no_holy_order
				}
			}
			add_country_modifier = {
				name = molten_eternity_vtp_1
				duration = -1
			}
		}
		custom_tooltip = molten_eternity_dev_tt
	}
	option = { #Unfulfilled
		name = molten_eternity.1.c
		trigger = {
			NOT = {
				check_variable = {
					which = moltenEternityObligationVar
					value = 1200
				}
			}
		}
		if = {
			limit = { has_country_flag = molten_eternity_smr_flag }
			every_owned_province = {
				limit = { holy_order = kihokamalama_order }
				holy_order = no_holy_order
			}
			add_country_modifier = {
				name = molten_eternity_smr_0
				duration = -1
			}
		}
		else_if = {
			limit = { has_country_flag = molten_eternity_smt_flag }
			every_owned_province = {
				limit = { holy_order = kihokamalama_order }
				holy_order = no_holy_order
			}
			add_country_modifier = {
				name = molten_eternity_smt_0
				duration = -1
			}
		}
		else_if = {
			limit = { has_country_flag = molten_eternity_isg_flag }
			every_owned_province = {
				limit = { holy_order = tumirbedi_order }
				holy_order = no_holy_order
			}
			add_country_modifier = {
				name = molten_eternity_isg_0
				duration = -1
			}
		}
		else_if = {
			limit = { has_country_flag = molten_eternity_ise_flag }
			every_owned_province = {
				limit = { holy_order = tumirbedi_order }
				holy_order = no_holy_order
			}
			add_country_modifier = {
				name = molten_eternity_ise_0
				duration = -1
			}
		}
		else_if = {
			limit = { has_country_flag = molten_eternity_vtz_flag }
			every_owned_province = {
				limit = { holy_order = tlokopinaztica_order }
				holy_order = no_holy_order
			}
			add_country_modifier = {
				name = molten_eternity_vtz_0
				duration = -1
			}
		}
		else_if = {
			limit = { has_country_flag = molten_eternity_vtp_flag }
			every_owned_province = {
				limit = { holy_order = tlokopinaztica_order }
				holy_order = no_holy_order
			}
			add_country_modifier = {
				name = molten_eternity_vtp_0
				duration = -1
			}
		}
		else = {
			add_country_modifier = {
				name = molten_eternity_empty_2
				duration = -1
			}
		}
	}

	after = {
		hidden_effect = {
			set_variable = {
				which = moltenEternityObligationVar
				value = 0
			}
			clr_country_flag = molten_eternity_smr_flag
			clr_country_flag = molten_eternity_smt_flag
			clr_country_flag = molten_eternity_isg_flag
			clr_country_flag = molten_eternity_ise_flag
			clr_country_flag = molten_eternity_vtz_flag
			clr_country_flag = molten_eternity_vtp_flag
			clr_country_flag = molten_eternity_ruler_recently_died
		}
	}
}