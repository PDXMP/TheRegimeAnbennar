namespace = utubodi_unification

country_event = { #We all want Kakunor!
	id = utubodi_unification.0
	title = utubodi_unification.0.t
	desc = utubodi_unification.0.d
	picture = COMET_SIGHTED_eventPicture

	is_triggered_only = yes

	goto = 3675

	option = { #We want Kakunor NOW!
		name = utubodi_unification.0.a
		trigger = { NOT = { owns = 3675 } }
		custom_tooltip = utubodi_unification_explanation_tt
	}

	option = { #Wait, shit, that's us!
		name = utubodi_unification.0.b
		trigger = { owns = 3675 }
		custom_tooltip = utubodi_unification_explanation_tt
	}
}

province_event = { #We got Kakunor
	id = utubodi_unification.1
	title = utubodi_unification.1.t
	desc = utubodi_unification.1.d
	picture = COMET_SIGHTED_eventPicture

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			if = {
				limit = {
					OR = {
						AND = {
							has_province_flag = kakunorTier3flag
							NOT = {
								has_great_project = {
									type = kakunor_cloud_city
									tier = 3
								}
							}
						}
						AND = {
							has_province_flag = kakunorTier2flag
							NOT = {
								has_great_project = {
									type = kakunor_cloud_city
									tier = 2
								}
							}
						}
						AND = {
							has_province_flag = kakunorTier1flag
							NOT = {
								has_great_project = {
									type = kakunor_cloud_city
									tier = 1
								}
							}
						}
					}
				}
				country_event = {
					id = utubodi_unification.2
				}
			}
		}
	}

	option = {
		name = utubodi_unification.1.a
	}
}

province_event = { #Actually upgrade, necessary because add_great_project_tier doesn't work unless FROM is the country.
	id = utubodi_unification.2
	title = utubodi_unification.2.t
	desc = utubodi_unification.2.d
	picture = COMET_SIGHTED_eventPicture

	is_triggered_only = yes
	hidden = yes

	immediate = {
		hidden_effect = {
			add_great_project_tier = {
				type = kakunor_cloud_city
				tier = 1
			}
		}
	}

	option = {
		name = utubodi_unification.1.a
	}
}

country_event = { #Collapsed Scaffold
	id = utubodi_unification.3
	title = utubodi_unification.3.t
	desc = utubodi_unification.3.d
	picture = COMET_SIGHTED_eventPicture

	is_triggered_only = yes

	trigger = {
		3675 = {
			owned_by = ROOT
			has_construction = kakunor_cloud_city
		}
	}

	option = { #Double the shifts
		name = utubodi_unification.3.a
		reduce_stability_or_adm_power = yes
		capital_scope = {
			add_province_modifier = {
				name = utubodi_unification_unrest
				duration = -1
			}
		}
		change_utubodi_unification_leaning = { value = 15 }
	}

	option = { #Train the workers
		name = utubodi_unification.3.b
		add_stability_or_adm_power = yes
		change_utubodi_unification_leaning = { value = -15 }
	}
}

country_event = { #Vision of the Old Ways
	id = utubodi_unification.4
	title = utubodi_unification.4.t
	desc = utubodi_unification.4.d
	picture = COMET_SIGHTED_eventPicture

	is_triggered_only = yes

	trigger = {
		3675 = {
			owned_by = ROOT
			has_construction = kakunor_cloud_city
		}
	}

	option = { #Ignore superstitions
		name = utubodi_unification.4.a
		change_utubodi_unification_leaning = { value = 10 }
	}

	option = { #Inscribe Teachings
		name = utubodi_unification.4.b
		change_utubodi_unification_leaning = { value = -10 }
	}
}
