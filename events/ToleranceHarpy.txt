namespace = harpy_tolerance_events

# Event organizer for the harpy tolerance events - should be a huge improvement to performance - having 1 overall check for having the minority instead of one for EACH new event that gets added
country_event = {
	id = harpy_tolerance_events.0
	title = race_setup_events.1.d
	desc = race_setup_events.1.d
	picture = BORDER_TENSION_eventPicture

	hidden = yes
	is_triggered_only = yes

	trigger = {
		fast_owns_num_pops_of_race = { race = harpy amount = 1 }
		NOT = { has_country_modifier = harpy_administration }
	}
	
	mean_time_to_happen = {
		days = 1
		modifier = {
			factor = 10
			has_country_modifier = racial_focus_harpy
		}
		modifier = {
			factor = 1.5
			has_government_attribute = more_migration_and_tolerance
		}
	}

	option = {
		random_list = {
			1 = { }
			# ensure there's an empty option first in case none of the others are available
			# and also because it seems this one might be picked rarely even if the others are available...

			#generic demand autonomy
			10 = {
				trigger = {
					any_owned_province = {
						NOT = { local_autonomy = 50 }
						is_capital = no
						has_harpy_minority_trigger = yes
					}
				}
				country_event = { id = harpy_tolerance_events.1 }
			}
			#generic tolerance increase
			10 = {
				trigger = {
					OR = {
						stability = 1
						in_golden_age = yes
						ruler_has_personality = tolerant_personality
						ruler_has_personality = kind_hearted_personality
						ruler_has_personality = benevolent_personality
						has_idea_group = humanist_ideas
						
						any_ally = {
							has_country_modifier = harpy_administration
						}
					}
				}
				country_event = { id = harpy_tolerance_events.2 }
			}
			#generic tolerance decrease
			10 = {
				trigger = {
					OR = {
						NOT = { stability = 0 }
						is_bankrupt = yes
						inflation = 25
						AND = {
							is_at_war = yes
							NOT = { war_score = 20 }
						}
						war_exhaustion = 10
						ruler_has_personality = cruel_personality
						ruler_has_personality = malevolent_personality
						ruler_has_personality = conqueror_personality
						
						any_rival_country = {
							has_country_modifier = harpy_administration
						}
					}
				}
				country_event = { id = harpy_tolerance_events.3 }
			}
			# Harpies abduct well-known person
			10 = {
				trigger = {
					employed_advisor = { is_female = no }
				}
				country_event = {
					id = harpy_tolerance_events.4
				}
			}
			# Harpy romance
			10 = {
				modifier = {
					factor = 3
					high_tolerance_harpy_race_trigger = yes
				}
				modifier = {
					factor = 2
					medium_tolerance_harpy_race_trigger = yes
				}
				modifier = {
					factor = 3
					has_country_modifier = harpy_romance_encouraged_flag 
				}
				country_event = {
					id = harpy_tolerance_events.5
				}
			}
			# Harpy clans provide tribute
			10 = {
				modifier = {
					factor = 2
					high_tolerance_harpy_race_trigger = yes
				}
				modifier = {
					factor = 2
					low_tolerance_harpy_race_trigger = yes
				}
				country_event = {
					id = harpy_tolerance_events.6
				}
			}
			# Harpy village raid
			10 = {
				trigger = {
					any_owned_province = {
						has_harpy_minority_trigger = yes
					}
					NOT = { capital_scope = { continent = serpentspine }}
				}
				modifier = {
					factor = 2
					low_tolerance_harpy_race_trigger = yes
				}
				modifier = {
					factor = 2
					NOT = { stability = 0 }
				}
				modifier = {
					factor = 2
					any_owned_province = {
						has_large_harpy_minority_trigger = yes
					}
				}
				country_event = {
					id = harpy_tolerance_events.7
				}
			}
			# Harpies killing travellers
			10 = {
				trigger = {
					any_owned_province = {
						has_harpy_minority_trigger = yes
						NOT = { has_province_modifier = harpy_killing_travellers }
					}
				}
				modifier = {
					factor = 2
					low_tolerance_harpy_race_trigger = yes
				}
				modifier = {
					factor = 2
					NOT = { stability = 0 }
				}
				country_event = {
					id = harpy_tolerance_events.8
				}
			}
			# Famous harpy singer (advisor)
			10 = {
				modifier = {
					factor = 1.5
					medium_tolerance_harpy_race_trigger = yes
				}
				modifier = {
					factor = 2
					high_tolerance_harpy_race_trigger = yes
				}
				country_event = {
					id = harpy_tolerance_events.9
				}
			}
			# Harpy builders
			10 = {
				trigger = {
					any_owned_province = {
						fast_has_pop_of_race = { race = harpy }
						NOT = { has_province_modifier = harpy_builders }
					}
				}
				modifier = {
					factor = 0.8
					low_tolerance_harpy_race_trigger = yes
				}
				modifier = {
					factor = 1.5
					high_tolerance_harpy_race_trigger = yes
				}
				country_event = {
					id = harpy_tolerance_events.10
				}
			}
			# Mages killing harpies for ingredients
			10 = {
				trigger = {
					has_estate = estate_mages
				}
				modifier = {
					factor = 1.5
					low_tolerance_harpy_race_trigger = yes
				}
				modifier = {
					factor = 3
					has_estate_privilege = estate_mages_reduced_research_regulations
				}
				country_event = {
					id = harpy_tolerance_events.11
				}
			}
			10 = { #Mountain Calls
				trigger = {
					any_owned_province = {
						fast_has_pop_of_race = { race = harpy }
						NOT = {
							has_terrain = mountain
							has_terrain = highlands
							has_terrain = hills
						}
					}
					any_owned_province = {
						OR = {
							has_terrain = mountain
							has_terrain = highlands
							has_terrain = hills
						}
						NOT = { 
							fast_has_pop_of_race = { race = harpy } 
						}
					}
					all_owned_province = {
						NOT = {
							has_province_modifier = harpy_tolerance_happy_harpies
							has_province_modifier = harpy_tolerance_stacked_roosts
						}
					}
					NOT = {
						has_country_modifier = harpy_tolerance_drive_out_winged
						has_country_modifier = harpy_tolerance_fighting_for_new_home
					}
				}
				country_event = {
					id = harpy_tolerance_events.12
				}
			}
			10 = { #Woman or white meat
				trigger = {
					religion = feast_of_the_gods
					NOT = {
						has_country_flag = harpy_tolerance_womanwhitemeat
					}
					any_owned_province = {
						NOT = {
							fast_has_pop_of_race = { race = harpy }
						}
					}
				}
				country_event = {
					id = harpy_tolerance_events.14
				}
			}
			5 = { #Aerial Explosives
				trigger = {
					NOT = {
						has_country_flag = harpy_tolerance_aerial_explosives
						ai = yes 
					}
					OR = {
						has_country_modifier = goblin_administration
						has_country_modifier = kobold_administration
					}
					OR = {
						has_country_modifier = goblin_military
						has_country_modifier = kobold_military
					}
					employed_advisor = {
						category = MIL
					}
					has_country_flag = artificery_unlocked
				}
				country_event = {
					id = harpy_tolerance_events.17
				}
			}
			10 = { #Fly Fishing
				trigger = {
					any_owned_province = {
						trade_goods = fish
						has_port = yes
						NOT = {
							fast_has_pop_of_race = { race = harpy }
						}
					}
					any_owned_province = {
						fast_has_pop_of_race = { race = harpy }
						NOT = {
							has_port = yes
						}
					}
					all_owned_province = {
						NOT = {
							has_province_modifier = harpy_tolerance_harpy_fisherwomen_superior
							has_province_modifier = harpy_tolerance_stopped_harpy_fishing
							has_province_modifier = harpy_tolerance_regulated_waters
						}
					}
				}
				country_event = {
					id = harpy_tolerance_events.18
				}
			}
			10 = { #Hunted
				trigger = {
					NOT = {
						religion = the_hunt
						has_country_flag = harpy_tolerance_hunted_fired
					}
					fast_owns_num_pops_of_race = { race = harpy amount = 5 }
				}
				country_event = {
					id = harpy_tolerance_events.19
				}
			}
			10 = { #Fur vs Feathers
				trigger = {
					has_country_modifier = gnollish_administration
					NOT = {
						has_country_modifier = harpy_tolerance_fur_beat_feathers
						has_country_modifier = harpy_tolerance_feathers_beat_fur
					}
				}
				country_event = {
					id = harpy_tolerance_events.20
				}
			}
			10 = { #Harpy Wife, Happy Life
				trigger = {
					any_neighbor_country = {
						has_country_modifier = harpy_administration
						NOT = {
							is_rival = ROOT
							is_enemy = ROOT
							historical_rival_with = ROOT
							war_with = ROOT
						}
					}
					OR = {
						has_country_modifier = elven_administration
						has_country_modifier = human_administration
						has_country_modifier = goblin_administration
						has_country_modifier = hobgoblin_administration
						has_country_modifier = orcish_administration
						has_country_modifier = ruinborn_administration
					}
					NOT = {
						has_consort = yes
						has_heir = yes
						has_country_modifier = harpy_tolerance_harpy_wife
						has_country_flag = harpy_tolerance_harpy_wife_happy_life
						has_country_flag = disabled_consort_events
						has_country_flag = disabled_heir_events
						is_female = yes
					}
					has_government_attribute = queen
					has_government_attribute = heir
					ruler_age = 50
					has_estate = estate_nobles
				}
				country_event = {
					id = harpy_tolerance_events.21
				}
			}
			2 = { #Doctrines to Delight
				trigger = {
					has_consort = yes
					consort_religion = the_hunt
					consort_is_harpy = yes
					NOT = {
						has_country_modifier = harpy_tolerance_crane_doctrine
						has_country_modifier = harpy_tolerance_gull_doctrine
						has_country_modifier = harpy_tolerance_sparrow_doctrine
						has_country_modifier = harpy_tolerance_owl_doctrine
						has_country_modifier = harpy_tolerance_eagle_doctrine
						has_country_modifier = harpy_tolerance_myna_doctrine
						has_country_modifier = harpy_tolerance_osprey_doctrine
						has_country_modifier = harpy_tolerance_neglected_consort
					}
				}
				country_event = {
					id = harpy_tolerance_events.22
				}
			}
			30 = {
				trigger = {
					ai = no
					OR = {
						has_country_modifier = just_lost_war_timer
						average_unrest = 10
						is_bankrupt = yes
						NOT = { stability = 0 }
					}
					NOT = { high_tolerance_harpy_race_trigger = yes }
					is_not_purging_or_expelling_any_race_trigger = yes
				}
				set_country_flag = propflag_harpy
				country_event = { id = tolerance_generic.1 }
			}
		}
	}
}

#Demand Representation
country_event = {
	id = harpy_tolerance_events.1
	title = harpy_tolerance_events.1.t
	desc = harpy_tolerance_events.1.d
	picture = DEBATE_REPUBLICAN_eventPicture
	goto = racial_pop_province_target
	
	is_triggered_only = yes
	
	mean_time_to_happen = {
		days = 1
	}
	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = {
					has_harpy_minority_trigger = yes
					is_capital = no
				}
				save_event_target_as = racial_pop_province_target
			}
			random_owned_province = {
				limit = {
					NOT = { local_autonomy = 50 }
					is_capital = no
					has_harpy_minority_trigger = yes
				}
				save_event_target_as = racial_pop_province_target
			}
			random_owned_province = {
				limit = {
					NOT = { local_autonomy = 50 }
					is_capital = no
					has_harpy_minority_trigger = yes
					development = 10
				}
				save_event_target_as = racial_pop_province_target
			}
		}
	}
	
	option = {		#Granted!
		name = harpy_tolerance_events.1.a
		ai_chance = {
			factor = 50
			modifier = {
				factor = 1.5
				wants_to_increase_tolerance_harpy = yes
			}
		}
		
		add_adm_power = -40
		
		medium_increase_of_harpy_tolerance_effect = yes
		
		event_target:racial_pop_province_target = {
			add_local_autonomy = 25
		}
	}
	
	option = {		#Make some concessions
		name = harpy_tolerance_events.1.b
		ai_chance = {
			factor = 50
			modifier = {
				factor = 1.5
				wants_to_maintain_tolerance_harpy = yes
			}
			modifier = {
				factor = 0.5
				average_autonomy = 10
			}
		}
		
		add_adm_power = -20
		
		event_target:racial_pop_province_target = {
			add_local_autonomy = 10
		}

	}
	
	option = {		#No. Haven't we given them enough?!
		name = harpy_tolerance_events.1.c
		ai_chance = {
			factor = 50
			modifier = {
				factor = 1.5
				wants_to_decrease_tolerance_harpy = yes
			}
		}
		
		medium_decrease_of_harpy_tolerance_effect = yes
		
	}
	
	option = {		#Special: Make empty promises
		name = harpy_tolerance_events.1.e
		trigger = { ruler_has_personality = charismatic_negotiator_personality }
		highlight = yes
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0.25
				wants_to_decrease_tolerance_harpy = yes
			}
			modifier = {
				factor = 1.5
				average_autonomy = 10
			}
		}
		
		add_dip_power = -10
		
		small_increase_of_harpy_tolerance_effect = yes
		
		event_target:racial_pop_province_target = {
			add_local_autonomy = 1
		}
		
	}
}


#Tolerance Increase
country_event = {
	id = harpy_tolerance_events.2
	title = harpy_tolerance_events.2.t
	desc = harpy_tolerance_events.2.d
	picture = GOOD_WITH_MONARCH_eventPicture
	
	is_triggered_only = yes
	
	mean_time_to_happen = {
		days = 1
	}
	immediate = {
		hidden_effect = {
		
			random_list = {
				75 = {
					set_country_flag = racial_pop_small_increase
				}
				25 = {
					set_country_flag = racial_pop_medium_increase
				}
			}
		}
	}
	
	option = {		#Good for them
		name = harpy_tolerance_events.2.a
		ai_chance = {
			factor = 50
		}
		
		trigger_switch = {
			on_trigger = has_country_flag
			racial_pop_small_increase = { small_increase_of_harpy_tolerance_effect = yes }
			racial_pop_medium_increase = { medium_increase_of_harpy_tolerance_effect = yes }
		}
		
		clear_racial_pop_tolerance_chance_flags = yes
		
	}
	
}


#Tolerance Decrease
country_event = {
	id = harpy_tolerance_events.3
	title = harpy_tolerance_events.3.t
	desc = harpy_tolerance_events.3.d
	picture = BAD_WITH_MONARCH_eventPicture
	
	is_triggered_only = yes
	
	mean_time_to_happen = {
		days = 1
	}
	immediate = {
		hidden_effect = {
		
			random_list = {
				75 = {
					set_country_flag = racial_pop_small_decrease
				}
				25 = {
					set_country_flag = racial_pop_medium_decrease
				}
			}
		}
	}
	
	option = {		#That's unfortunate
		name = harpy_tolerance_events.3.a
		ai_chance = {
			factor = 50
		}
		
		trigger_switch = {
			on_trigger = has_country_flag
			racial_pop_small_decrease = { small_decrease_of_harpy_tolerance_effect = yes }
			racial_pop_medium_decrease = { medium_decrease_of_harpy_tolerance_effect = yes }
		}
		
		clear_racial_pop_tolerance_chance_flags = yes
		
	}
	
}

# Harpies abduct well-known person
country_event = {
	id = harpy_tolerance_events.4
	title = harpy_tolerance_events.4.t
	desc = harpy_tolerance_events.4.d
	picture = PIRATES_CAPTURED_eventPicture

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			random_list = {
				1 = {
					trigger = {
						employed_advisor = { category = ADM is_female = no }
					}
					set_country_flag = advisor_events_adm
				}
				1 = {
					trigger = {
						employed_advisor = { category = DIP is_female = no }
					}
					set_country_flag = advisor_events_dip
				}
				1 = {
					trigger = {
						employed_advisor = { category = MIL is_female = no }
					}
					set_country_flag = advisor_events_mil
				}
			}
		}
	}
	
	# Fuck em
	option = {
		name = harpy_tolerance_events.4.a
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0.8
				wants_to_decrease_tolerance_harpy = yes
			}
		}
		small_increase_of_harpy_tolerance_effect = yes
		add_prestige = -10
		trigger_switch = {
			on_trigger = has_country_flag
			advisor_events_adm = {
				remove_advisor_by_category = ADM
			}
			advisor_events_dip = {
				remove_advisor_by_category = DIP
			}
			advisor_events_mil = {
				remove_advisor_by_category = MIL
			}
		}
	}
	# Send out a search party
	option = {
		name = harpy_tolerance_events.4.b
		ai_chance = {
			factor = 50
			modifier= {
				factor = 2
				wants_to_maintain_tolerance_harpy = yes
			}
		}
		add_mil_power = -25
	}
	# Interrogate local harpies
	option = {
		name = harpy_tolerance_events.4.c
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0.1
				wants_to_increase_tolerance_harpy = yes
			}
		}
		small_decrease_of_harpy_tolerance_effect = yes
		random = {
			chance = 50
			trigger_switch = {
				on_trigger = has_country_flag
				advisor_events_adm = {
					remove_advisor_by_category = ADM
				}
				advisor_events_dip = {
					remove_advisor_by_category = DIP
				}
				advisor_events_mil = {
					remove_advisor_by_category = MIL
				}
			}
		}
	}
	# Cut a deal with them
	option = {
		name = harpy_tolerance_events.4.e
		trigger = {
			OR = {
				ruler_has_personality = charismatic_negotiator_personality
				ruler_has_personality = silver_tongue_personality
			}
		}
		highlight = yes
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0.1
				wants_to_decrease_tolerance_harpy = yes
			}
			modifier = {
				factor = 0.1
				NOT = { years_of_income = 0.3 }
			}
			modifier = {
				factor = 0.8
				NOT = { years_of_income = 0.6 }
			}
		}
		small_increase_of_harpy_tolerance_effect = yes
		add_years_of_income = -0.3
	}
	after = {
		hidden_effect = {
			trigger_switch = {
				on_trigger = has_country_flag
				advisor_events_adm = { clr_country_flag = advisor_events_adm }
				advisor_events_dip = { clr_country_flag = advisor_events_dip }
				advisor_events_mil = { clr_country_flag = advisor_events_mil }
			}
		}
	}
}

# Harpy romance
country_event = {
	id = harpy_tolerance_events.5
	title = harpy_tolerance_events.5.t
	desc = harpy_tolerance_events.5.d
	picture = DIPLOMACY_eventPicture

	is_triggered_only = yes

	# Bully for them
	option = {
		name = harpy_tolerance_events.5.a
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0.5
				wants_to_decrease_tolerance_harpy = yes
			}
		}
		add_prestige = -5
		medium_increase_of_harpy_tolerance_effect = yes
	}
	# Encourage the official to rethink their choices
	option = {
		name = harpy_tolerance_events.5.b
		ai_chance = {
			factor = 50
		}
		small_decrease_of_harpy_tolerance_effect = yes
	}
	# Kill the harpy and make an example of the official
	option = {
		name = harpy_tolerance_events.5.c
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0.5
				wants_to_increase_tolerance_harpy = yes
			}
		}
		medium_decrease_of_harpy_tolerance_effect = yes
		every_owned_province = {
			limit = { fast_has_pop_of_race = { race = harpy } }
			add_unrest = 5
		}
	}
	# Encourage this type of behavior
	option = {
		name = harpy_tolerance_events.5.e
		trigger = {
			OR = {
				ruler_has_personality = tolerant_personality
				full_idea_group = humanist_ideas
			}
		}
		large_increase_of_harpy_tolerance_effect = yes
		add_prestige = -10
		add_country_modifier = {
			name = harpy_romance_encouraged_flag
			hidden = yes
			duration = 7300
		}
	}
}

# Harpy clans provide tribute
country_event = {
	id = harpy_tolerance_events.6
	title = harpy_tolerance_events.6.t
	desc = harpy_tolerance_events.6.d
	picture = TRADEGOODS_eventPicture

	is_triggered_only = yes
	
	# Send them a gift in return
	option = {
		name = harpy_tolerance_events.6.a
		ai_chance = {
			factor = 50
		}
		add_years_of_income = -0.3
		add_prestige = 5
		small_increase_of_harpy_tolerance_effect = yes
		
	}
	# Cool
	option = {
		name = harpy_tolerance_events.6.b
		ai_chance = {
			factor = 50
		}
		add_prestige = 10
		
	}
	# Bar them from moving
	option = {
		name = harpy_tolerance_events.6.c
		ai_chance = {
			factor = 50
		}
		small_decrease_of_harpy_tolerance_effect = yes
		add_prestige = 5
	}
}

# Harpy village raid
country_event = {
	id = harpy_tolerance_events.7
	title = harpy_tolerance_events.7.t
	desc = harpy_tolerance_events.7.d
	picture = VILLAGE_RAIDED_eventPicture
	goto = harpy_raid_province

	is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = {
					has_harpy_minority_trigger = yes
				}
				save_event_target_as = harpy_raid_province
			}
			random_owned_province = {
				limit = {
					has_large_harpy_minority_trigger = yes
				}
				save_event_target_as = harpy_raid_province
			}
		}
	}
	
	# Retaliating will only anger them more
	option = {
		name = harpy_tolerance_events.7.a
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0.5
				wants_to_decrease_tolerance_harpy = yes
			}
		}
		small_increase_of_harpy_tolerance_effect = yes
		event_target:harpy_raid_province = {
			add_devastation = 25
		}
	}
	# Focus on repairing the province
	option = {
		name = harpy_tolerance_events.7.b
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0.5
				wants_to_decrease_tolerance_harpy = yes
			}
		}
		add_years_of_income = -0.25
	}
	# Send a force in retaliation
	option = {
		name = harpy_tolerance_events.7.c
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0.5
				wants_to_increase_tolerance_harpy = yes
			}
		}
		add_mil_power = -40
		event_target:harpy_raid_province = {
			add_devastation = 25
		}
		largest_decrease_of_harpy_tolerance_effect = yes
	}
}

# Harpy killing travellers
#TODO: Troy's monster system
country_event = {
	id = harpy_tolerance_events.8
	title = harpy_tolerance_events.8.t
	desc = harpy_tolerance_events.8.d
	picture = WHITE_MOUNTAIN_eventPicture
	goto = harpy_killing_travellers_province

	is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = {
					has_harpy_minority_trigger = yes
					NOT = { has_province_modifier = harpy_killing_travellers }	
				}
				save_event_target_as = harpy_killing_travellers_province
			}
		}
	}
	
	# Appease them to stop their attacks
	option = {
		name = harpy_tolerance_events.8.a
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0.5
				NOT = { years_of_income = 0.4 }
			}
			modifier = {
				factor = 0.8
				NOT = { years_of_income = 0.8 }
			}
			modifier = {
				factor = 0.5
				wants_to_decrease_tolerance_harpy = yes
			}
		}
		add_years_of_income = -0.4
		small_increase_of_harpy_tolerance_effect = yes
		event_target:harpy_killing_travellers_province = {
			add_province_modifier = {
				name = harpy_killing_travellers
				duration = 365
			}
		}
	}
	# Some patrols will do the work
	option = {
		name = harpy_tolerance_events.8.b
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0.8
				wants_to_increase_tolerance_harpy = yes
			}
		}
		add_mil_power = -25
		small_decrease_of_harpy_tolerance_effect = yes
		event_target:harpy_killing_travellers_province = {
			add_province_modifier = {
				name = harpy_killing_travellers
				duration = 1825
			}
		}
	}
	# Build watchtowers along the roads
	option = {
		name = harpy_tolerance_events.8.c
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0.5
				wants_to_increase_tolerance_harpy = yes
			}
			modifier = {
				factor = 0.5
				NOT = { years_of_income = 0.4 }
			}
			modifier = {
				factor = 0.8
				NOT = { years_of_income = 0.8 }
			}
		}
		add_mil_power = -50
		add_years_of_income = -0.4
		medium_decrease_of_harpy_tolerance_effect = yes
		
	}
	# Wipe them all out and take their things
	option = {
		name = harpy_tolerance_events.8.e
		trigger = {
			OR = {
				ruler_has_personality = malevolent_personality
				ruler_has_personality = cruel_personality
			}
		}
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0.1
				wants_to_increase_tolerance_harpy = yes
			}
			modifier = {
				factor = 0.5
				NOT = { years_of_income = 0.4 }
			}
			modifier = {
				factor = 0.8
				NOT = { years_of_income = 0.8 }
			}
			modifier = {
				factor = 0.5
				NOT = { manpower_percentage = 0.8 }
			}
		}
		highlight = yes
						add_mil_power = -50
		if = {
			limit = {
				max_manpower = 10
			}
			add_manpower = -1
		}
		else = {
			add_yearly_manpower = -1
		}
		add_years_of_income = 0.4
		largest_decrease_of_harpy_tolerance_effect = yes
		event_target:harpy_killing_travellers_province = {
			remove_harpy_minority_size_effect = yes
		}
	}
}

# Harpy minister - famous harpy singer
country_event = {
	id = harpy_tolerance_events.9
	title = harpy_tolerance_events.9.t
	desc = harpy_tolerance_events.9.d
	picture = wihgfx_FEMALES_eventPicture
	
	is_triggered_only = yes

	# If you have a harpy culture province, that's the one the advisor comes from
	immediate = {
		hidden_effect = {
			if = {
				limit = {
					any_owned_province = {
						culture_group = harpy
					}
				}
				random_owned_province = {
					limit = { culture_group = harpy }
					save_event_target_as = harpy_advisor_culture_province
				}
				set_country_flag = harpy_advisor_culture_set
			}
		}
	}

	# Recruit the harpy
	option = {
		name = harpy_tolerance_events.9.a
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0.5
				wants_to_maintain_tolerance_harpy = yes
			}
			modifier = {
				factor = 0.1
				wants_to_decrease_tolerance_harpy = yes
			}
		}
		small_increase_of_harpy_tolerance_effect = yes
		if = {
			limit = { has_country_flag = harpy_advisor_culture_set }
			if = {
				limit = { monthly_income = 50 }
				random_list = {
					1 = {
						define_advisor = {
							type = artist
							culture = event_target:harpy_advisor_culture_province
							religion = event_target:harpy_advisor_culture_province
							skill = 3
							female = yes
							discount = yes
						}
					}
					1 = {
						define_advisor = {
							type = spymaster
							culture = event_target:harpy_advisor_culture_province
							religion = event_target:harpy_advisor_culture_province
							skill = 3
							female = yes
							discount = yes
						}
					}
				}
			}
			else_if = {
				limit = { monthly_income = 25 }
				random_list = {
					1 = {
						define_advisor = {
							type = artist
							culture = event_target:harpy_advisor_culture_province
							religion = event_target:harpy_advisor_culture_province
							skill = 2
							female = yes
							discount = yes
						}
					}
					1 = {
						define_advisor = {
							type = spymaster
							culture = event_target:harpy_advisor_culture_province
							religion = event_target:harpy_advisor_culture_province
							skill = 2
							female = yes
							discount = yes
						}
					}
				}
			}
			else = {
				random_list = {
					1 = {
						define_advisor = {
							type = artist
							culture = event_target:harpy_advisor_culture_province
							religion = event_target:harpy_advisor_culture_province
							skill = 1
							female = yes
							discount = yes
						}
					}
					1 = {
						define_advisor = {
							type = spymaster
							culture = event_target:harpy_advisor_culture_province
							religion = event_target:harpy_advisor_culture_province
							skill = 1
							female = yes
							discount = yes
						}
					}
				}
			}
		}
		else_if = {
			limit = { 
				capital_scope = {
					OR = {
						AND = {
							superregion = vimdatrong_superregion
							NOT = {
								province_id = 6300
								culture = hinphat
							}
						}
						region = shamakhad_region
						region = dhujat_region
						region = jade_mines_region
					}
				} 
			}
			if = {
				limit = { monthly_income = 50 }
				random_list = {
					1 = {
						define_advisor = {
							type = artist
							culture = pezarangi_harpy
							skill = 3
							female = yes
							discount = yes
						}
					}
					1 = {
						define_advisor = {
							type = spymaster
							culture = pezarangi_harpy
							skill = 3
							female = yes
							discount = yes
						}
					}
				}
			}
			else_if = {
				limit = { monthly_income = 25 }
				random_list = {
					1 = {
						define_advisor = {
							type = artist
							culture = pezarangi_harpy
							skill = 2
							female = yes
							discount = yes
						}
					}
					1 = {
						define_advisor = {
							type = spymaster
							culture = pezarangi_harpy
							skill = 2
							discount = yes
						}
					}
				}
			}
			else = {
				random_list = {
					1 = {
						define_advisor = {
							type = artist
							culture = pezarangi_harpy
							skill = 1
							female = yes
							discount = yes
						}
					}
					1 = {
						define_advisor = {
							type = spymaster
							culture = pezarangi_harpy
							skill = 1
							discount = yes
						}
					}
				}
			}
		}
		else_if = {
			limit = { 
				capital_scope = {
					OR = {
						superregion = yanshen_superregion
						province_id = 6300
						culture = hinphat
					}
				} 
			}
			if = {
				limit = { monthly_income = 50 }
				random_list = {
					1 = {
						define_advisor = {
							type = artist
							culture = semifire_harpy
							skill = 3
							female = yes
							discount = yes
						}
					}
					1 = {
						define_advisor = {
							type = spymaster
							culture = semifire_harpy
							skill = 3
							female = yes
							discount = yes
						}
					}
				}
			}
			else_if = {
				limit = { monthly_income = 25 }
				random_list = {
					1 = {
						define_advisor = {
							type = artist
							culture = semifire_harpy
							skill = 2
							female = yes
							discount = yes
						}
					}
					1 = {
						define_advisor = {
							type = spymaster
							culture = semifire_harpy
							skill = 2
							discount = yes
						}
					}
				}
			}
			else = {
				random_list = {
					1 = {
						define_advisor = {
							type = artist
							culture = semifire_harpy
							skill = 1
							female = yes
							discount = yes
						}
					}
					1 = {
						define_advisor = {
							type = spymaster
							culture = semifire_harpy
							skill = 1
							discount = yes
						}
					}
				}
			}
		}
		else_if = {
			limit = { 
				capital_scope = {
					OR = {
						superregion = gozengun_superregion
					}
				} 
			}
			if = {
				limit = { monthly_income = 50 }
				random_list = {
					1 = {
						define_advisor = {
							type = artist
							culture = nuzenapu_harpy
							skill = 3
							female = yes
							discount = yes
						}
					}
					1 = {
						define_advisor = {
							type = spymaster
							culture = nuzenapu_harpy
							skill = 3
							female = yes
							discount = yes
						}
					}
				}
			}
			else_if = {
				limit = { monthly_income = 25 }
				random_list = {
					1 = {
						define_advisor = {
							type = artist
							culture = nuzenapu_harpy
							skill = 2
							female = yes
							discount = yes
						}
					}
					1 = {
						define_advisor = {
							type = spymaster
							culture = nuzenapu_harpy
							skill = 2
							discount = yes
						}
					}
				}
			}
			else = {
				random_list = {
					1 = {
						define_advisor = {
							type = artist
							culture = nuzenapu_harpy
							skill = 1
							female = yes
							discount = yes
						}
					}
					1 = {
						define_advisor = {
							type = spymaster
							culture = nuzenapu_harpy
							skill = 1
							discount = yes
						}
					}
				}
			}
		}
		else_if = {
			limit = { 
				capital_scope = {
					OR = {
						region = rahen_coast_region
						region = rakhadesh_region
						region = tree_of_stone_region
						region = middle_dwarovar_region
						region = far_salahad_region
						region = far_bulwar_region
					}
				} 
			}
			if = {
				limit = { monthly_income = 50 }
				random_list = {
					1 = {
						define_advisor = {
							type = artist
							culture = siadunan_harpy
							skill = 3
							female = yes
							discount = yes
						}
					}
					1 = {
						define_advisor = {
							type = spymaster
							culture = siadunan_harpy
							skill = 3
							female = yes
							discount = yes
						}
					}
				}
			}
			else_if = {
				limit = { monthly_income = 25 }
				random_list = {
					1 = {
						define_advisor = {
							type = artist
							culture = siadunan_harpy
							skill = 2
							female = yes
							discount = yes
						}
					}
					1 = {
						define_advisor = {
							type = spymaster
							culture = siadunan_harpy
							skill = 2
							female = yes
							discount = yes
						}
					}
				}
			}
			else = {
				random_list = {
					1 = {
						define_advisor = {
							type = artist
							culture = siadunan_harpy
							skill = 1
							female = yes
							discount = yes
						}
					}
					1 = {
						define_advisor = {
							type = spymaster
							culture = siadunan_harpy
							skill = 1
							female = yes
							discount = yes
						}
					}
				}
			}
		}
		else = {
			if = {
				limit = { monthly_income = 50 }
				random_list = {
					1 = {
						define_advisor = {
							type = artist
							culture = firanyan_harpy
							skill = 3
							female = yes
							discount = yes
						}
					}
					1 = {
						define_advisor = {
							type = spymaster
							culture = firanyan_harpy
							skill = 3
							female = yes
							discount = yes
						}
					}
				}
			}
			else_if = {
				limit = { monthly_income = 25 }
				random_list = {
					1 = {
						define_advisor = {
							type = artist
							culture = firanyan_harpy
							skill = 2
							female = yes
							discount = yes
						}
					}
					1 = {
						define_advisor = {
							type = spymaster
							culture = firanyan_harpy
							skill = 2
							female = yes
							discount = yes
						}
					}
				}
			}
			else = {
				random_list = {
					1 = {
						define_advisor = {
							type = artist
							culture = firanyan_harpy
							skill = 1
							female = yes
							discount = yes
						}
					}
					1 = {
						define_advisor = {
							type = spymaster
							culture = firanyan_harpy
							skill = 1
							female = yes
							discount = yes
						}
					}
				}
			}
		}
	}

	# A true exemplar of their race
	option = {
		name = harpy_tolerance_events.9.b
		ai_chance = {
			factor = 50
			modifier = {
				factor = 2
				wants_to_increase_tolerance_harpy = yes
			}
		}
		medium_increase_of_harpy_tolerance_effect = yes
	}

	# We dun give a shit
	option = {
		name = harpy_tolerance_events.9.c
		ai_chance = {
			factor = 50
			modifier = {
				factor = 2
				wants_to_decrease_tolerance_harpy = yes
			}
		}
		add_prestige = 10
		small_decrease_of_harpy_tolerance_effect = yes
	}

	after = {
		clr_country_flag = harpy_advisor_culture_set
	}
}

# Harpy builders
country_event = {
	id = harpy_tolerance_events.10
	title = harpy_tolerance_events.10.t
	desc = harpy_tolerance_events.10.d
	picture = INCA_CITY_eventPicture
	goto = harpy_builders_province
	
	is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = {
					NOT = { has_province_modifier = harpy_builders }
					fast_has_pop_of_race = { race = harpy }
				}
				save_event_target_as = harpy_builders_province
			}
		}
	}
	
	# We could use their natural abilities
	option = {	
		name = harpy_tolerance_events.10.a
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0.5
				wants_to_maintain_tolerance_harpy = yes
			}
			modifier = {
				factor = 0.1
				wants_to_increase_tolerance_harpy = yes
			}
		}
		add_years_of_income = -0.3
		small_increase_of_harpy_tolerance_effect = yes
		event_target:harpy_builders_province = {
			area = {
				limit = {
					NOT = { has_province_modifier = harpy_builders }
				}
				add_province_modifier = {
					name = harpy_builders
					duration = 1825
				}
			}
		}
	}
	
	# Thanks but no thanks
	option = {
		name = harpy_tolerance_events.10.b
		small_decrease_of_harpy_tolerance_effect = yes
	}
	
	# We don't need you or your wings
	option = {
		name = harpy_tolerance_events.10.c
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0.5
				wants_to_increase_tolerance_harpy = yes
			}
		}
		medium_decrease_of_harpy_tolerance_effect = yes
		add_prestige = 5
	}
}

# Mages killing harpies for ingredients
country_event = {
	id = harpy_tolerance_events.11
	title = harpy_tolerance_events.11.t
	desc = harpy_tolerance_events.11.d
	picture = SCOTTISH_MERCENARIES_eventPicture
	
	
	
	is_triggered_only = yes
		
	# Force the mages to pay reparations
	option = {	
		name = harpy_tolerance_events.11.a
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0.1
				wants_to_increase_tolerance_harpy = yes
			}
		}
		reduce_estate_mages_loyalty_effect = yes
		medium_increase_of_harpy_tolerance_effect = yes
	}
	
	# Well, the mages should probably stop...
	option = {
		name = harpy_tolerance_events.11.b
		ai_chance = {
			factor = 50
		}
		small_increase_of_harpy_tolerance_effect = yes
	}
	
	# These ingredients are essential to our nation - its hunting season!
	option = {
		name = harpy_tolerance_events.11.c
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0.5
				wants_to_increase_tolerance_harpy = yes
			}
		}
		largest_decrease_of_harpy_tolerance_effect = yes
		add_estate_mages_loyalty_effect = yes
		every_owned_province = {
			limit = { has_harpy_minority_trigger = yes }
			add_unrest = 5
		}
		every_owned_province = {
			limit = { has_harpy_majority_trigger = yes }
			add_unrest = 10
		}
		add_adm_power = 20
		add_dip_power = 20
		add_mil_power = 20
	}
}

#The Mountain Calls
country_event = {
	id = harpy_tolerance_events.12
	title = harpy_tolerance_events.12.t
	desc = harpy_tolerance_events.12.d
	picture = HARPY_TOWN_eventPicture

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = {
					fast_has_pop_of_race = { race = harpy }
					NOT = {
						has_terrain = mountain
						has_terrain = highlands
						has_terrain = hills
					}
				}
				save_event_target_as = harpy_tolerance_mountaincalls_harpies_here
			}
			random_owned_province = {
				limit = {
					OR = { 
						has_terrain = mountain
						has_terrain = highlands
						has_terrain = hills
					}
					NOT = { 
						fast_has_pop_of_race = { race = harpy } 
					}
				}
				save_event_target_as = harpy_tolerance_mountaincalls_harpies_go
			}
			random_neighbor_country = {
				limit = {
					any_owned_province = {
						is_neighbor_of = ROOT
						OR = { 
							has_terrain = mountain
							has_terrain = highlands
							has_terrain = hills
						}
						NOT = {
							is_claim = ROOT
							is_core = ROOT
							fast_has_pop_of_race = { race = harpy }
						}
					}
				}
				random_owned_province = {
					limit = {
						is_neighbor_of = ROOT
						OR = { 
							has_terrain = mountain
							has_terrain = highlands
							has_terrain = hills
						}
						NOT = {
							is_claim = ROOT
							is_core = ROOT
							fast_has_pop_of_race = { race = harpy }
						}
					}
					save_event_target_as = harpy_tolerance_mountaincalls_harpies_attack
				}
			}
		}
	}

	goto = harpy_tolerance_mountaincalls_harpies_here

	option = { #Help them move
		name = "harpy_tolerance_events.12.a"
		goto = harpy_tolerance_mountaincalls_harpies_go
		ai_chance = {
			factor = 20
			modifier = {
				factor = 3
				wants_to_increase_tolerance_harpy = yes
			}
			modifier = {
				factor = 0.25
				OR = {
					wants_to_decrease_tolerance_harpy = yes
					ruler_has_personality = greedy_personality
					NOT = { treasury = 50 }
				}
			}
		}
		if = { #Lose 3 months of income or 50 ducats, whichever is less
			limit = {
				monthly_income = 17
			}
			add_treasury = -50
		}
		else = {
			add_years_of_income = -0.25
		}
		medium_increase_of_harpy_tolerance_effect = yes
		event_target:harpy_tolerance_mountaincalls_harpies_go = {
			generic_add_race_minority_size_effect = { race = harpy }
			add_province_modifier = { #+10% Local Defensiveness, -2 Unrest, +5% Local Tax
				name = harpy_tolerance_happy_harpies
				duration = 3650
			}
		}
	}

	option = { #Not gonna deal with it
		name = "harpy_tolerance_events.12.b"
		ai_chance = {
			factor = 20
			modifier = {
				factor = 0.75
				wants_to_increase_tolerance_harpy = yes
			}
		}
		goto = harpy_tolerance_mountaincalls_harpies_go
		small_decrease_of_harpy_tolerance_effect = yes
		random = {
			chance = 30

			event_target:harpy_tolerance_mountaincalls_harpies_go = {
				generic_add_race_minority_size_effect = { race = harpy }
			}
			event_target:harpy_tolerance_mountaincalls_harpies_here = {
				generic_remove_race_minority_size_effect = { race = harpy }
			}
		}
	}

	option = { #GET OUT
		name = "harpy_tolerance_events.12.c"
		goto = harpy_tolerance_mountaincalls_harpies_here
		ai_chance = {
			factor = 20
			modifier = {
				factor = 10
				wants_to_decrease_tolerance_harpy = yes
			}
		}
		medium_decrease_of_harpy_tolerance_effect = yes
		event_target:harpy_tolerance_mountaincalls_harpies_here = {
			generic_remove_race_minority_size_effect = { race = harpy }
		}
		add_country_modifier = { #20% Rebel Suppression Efficiency
			name = harpy_tolerance_drive_out_winged
			duration = 7300
		}
	}

	option = { #What if you helped us kill your neighbors
		name = "harpy_tolerance_events.12.e"
		ai_chance = {
			factor = 20
			modifier = {
				factor = 2
				wants_to_increase_tolerance_harpy = yes
			}
			modifier = {
				factor = 3
				OR = {
					ruler_has_personality = greedy_personality
					ruler_has_personality = cruel_personality
					ruler_has_personality = expansionist_personality
					ruler_has_personality = great_conqueror_personality
					ruler_has_personality = conqueror_personality
				}
			}
		}
		trigger = {
			hidden_trigger = {
				has_saved_event_target = harpy_tolerance_mountaincalls_harpies_attack
			}
		}
		goto = harpy_tolerance_mountaincalls_harpies_attack
		highlight = yes
		event_target:harpy_tolerance_mountaincalls_harpies_attack = {
			add_claim = ROOT
		}
		country_event = { #If you conquered it, add a harpy minority + Happy Harpies Bonus (+10% Local Defensiveness, -2 Unrest, +5% Local Tax)
			id = harpy_tolerance_events.13
			days = 9125
		}

		medium_increase_of_harpy_tolerance_effect = yes
		add_country_modifier = { #+5% Siege Ability, +5% Movespeed
			name = harpy_tolerance_fighting_for_new_home
			duration = 9125
		}
	}

	option = { #Design better buildings
		name = "harpy_tolerance_events.12.f"
		highlight = yes
		goto = harpy_tolerance_mountaincalls_harpies_here
		trigger = {
			OR = {
				ruler_has_personality = free_thinker_personality
				ruler_has_personality = scholar_personality
				ruler_has_personality = patron_of_arts_personality
				any_owned_province = {
					OR = {
						has_province_modifier = ananoma_dilapidated
						has_province_modifier = ananoma_standart
						has_province_modifier = ananoma_improved
					}
				}
			}
		}
		ai_chance = {
			factor = 40
			modifier = {
				factor = 3
				wants_to_increase_tolerance_harpy = yes
			}
			modifier = {
				factor = 0.25
				OR = {
					wants_to_decrease_tolerance_harpy = yes
					ruler_has_personality = greedy_personality
					NOT = { treasury = 50 }
				}
			}
		}
		if = { #Lose 3 months of income or 50 ducats, whichever is less
			limit = {
				monthly_income = 17
			}
			add_treasury = -50
		}
		else = {
			add_years_of_income = -0.25
		}
		medium_increase_of_harpy_tolerance_effect = yes
		event_target:harpy_tolerance_mountaincalls_harpies_here = {
			add_province_modifier = { #+33% Local Defensiveness, -5 Unrest, -10% local development cost, +7.5 Local Trade Value and -5 Local Governing Cost Increase
				name = harpy_tolerance_stacked_roosts
				duration = 7300
			}
		}
	}
}

province_event = {
	id = harpy_tolerance_events.13
	title = harpy_tolerance_events.13.t
	desc = harpy_tolerance_events.13.d
	picture = HARPY_TOWN_eventPicture
	goto = harpy_tolerance_mountaincalls_harpies_attack

	trigger = {
		event_target:harpy_tolerance_mountaincalls_harpies_attack = {
			owned_by = ROOT
		}
	}

	is_triggered_only = yes

	option = {
		name = "harpy_tolerance_events.13.a"
		event_target:harpy_tolerance_mountaincalls_harpies_attack = {
			generic_add_race_minority_size_effect = { race = harpy }
			add_province_modifier = { #+10% Local Defensiveness, -2 Unrest, +5% Local Tax
				name = harpy_tolerance_happy_harpies
				duration = 7300
			}
		}
	}
}

country_event = {
	id = harpy_tolerance_events.14
	title = harpy_tolerance_events.14.t
	desc = harpy_tolerance_events.14.d
	picture = OGRE_FEAST_eventPicture

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = {
					NOT = {
						fast_has_pop_of_race = { race = harpy }
					}
				}
				save_event_target_as = harpy_tolerance_woman_whitemeat_addharpies
			}
			set_country_flag = harpy_tolerance_womanwhitemeat
		}
	}

	option = { #harpies are friends not food
		name = "harpy_tolerance_events.14.a"
		ai_chance = {
			factor = 30
			modifier = {
				factor = 3
				wants_to_increase_tolerance_harpy = yes
			}
			modifier = {
				factor = 0.2
				OR = {
					wants_to_decrease_tolerance_harpy = yes
					doom = 50
				}
			}
		}
		medium_increase_of_harpy_tolerance_effect = yes
		add_doom = 10
	}

	option = { #Tastes like chicken
		name = "harpy_tolerance_events.14.b"
		ai_chance = {
			factor = 30
			modifier = {
				factor = 3
				wants_to_decrease_tolerance_harpy = yes
			}
			modifier = {
				factor = 3
				doom = 50
			}
			modifier = {
				factor = 0.2
				wants_to_increase_tolerance_harpy = yes
			}
		}
		medium_decrease_of_harpy_tolerance_effect = yes
		add_doom = -10
	}

	option = { #Delayed gratification
		name = "harpy_tolerance_events.14.c"
		ai_chance = {
			factor = 100
			modifier = {
				factor = 2
				wants_to_increase_tolerance_harpy = yes
			}
		}
		trigger = {
			OR = {
				full_idea_group = innovativeness_ideas
				employed_advisor = {
					skill = 2
				}
				ruler_has_personality = free_thinker_personality
				ruler_has_personality = well_advised_personality
				ruler_has_personality = scholar_personality
			}
		}
		highlight = yes
		goto = harpy_tolerance_woman_whitemeat_addharpies
		small_increase_of_harpy_tolerance_effect = yes
		add_doom = 10
		event_target:harpy_tolerance_woman_whitemeat_addharpies = {
			generic_add_race_minority_size_effect = { race = harpy }
			custom_tooltip = harpy_tolerance_woman_whitemeat_10years_tt
			hidden_effect = {
				province_event = { #Increase size in 10 years
					id = harpy_tolerance_events.15
					days = 3650
				}
			}
		}
		country_event = { #Two Drumsticks??
			id = harpy_tolerance_events.16
			days = 7300
		}
	}
}

province_event = { #Called from .14 option 3
	id = harpy_tolerance_events.15
	title = harpy_tolerance_events.15.t
	desc = harpy_tolerance_events.15.d
	picture = HARPY_TOWN_eventPicture

	hidden = yes
	is_triggered_only = yes
	trigger = {
		owned_by = FROM
	}

	option = {
		generic_add_race_minority_size_effect = { race = harpy }
	}
}

country_event = { #Called from .14 option 3
	id = harpy_tolerance_events.16
	title = harpy_tolerance_events.16.t
	desc = harpy_tolerance_events.16.d
	picture = HARPY_TOWN_eventPicture
	goto = harpy_tolerance_woman_whitemeat_addharpies

	is_triggered_only = yes
	trigger = {
		event_target:harpy_tolerance_woman_whitemeat_addharpies = {
			owned_by = ROOT
		}
	}

	option = { #Aw, they learned to love
		name = "harpy_tolerance_events.16.a"
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0.1
				OR = {
					wants_to_decrease_tolerance_harpy = yes
					doom = 50
				}
			}
		}
		medium_increase_of_harpy_tolerance_effect = yes
		add_doom = 10
		every_known_country = {
			limit = {
				has_country_modifier = harpy_administration
			}
			add_opinion = { #+25 opinion, -1/year
				who = ROOT
				modifier = harpy_tolerance_friends_not_food
			}
			reverse_add_opinion = { #+25 opinion, -1/year
				who = ROOT
				modifier = harpy_tolerance_friends_not_food
			}
		}
	}

	option = { #The women and children... only?
		name = "harpy_tolerance_events.16.b"
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0.1
				wants_to_increase_tolerance_harpy = yes
			}
		}
		large_decrease_of_harpy_tolerance_effect = yes
		add_doom = -25
		event_target:harpy_tolerance_woman_whitemeat_addharpies = {
			remove_harpy_minority_size_effect = yes
			remove_harpy_minority_size_effect = yes
		}
		every_known_country = {
			limit = {
				has_country_modifier = harpy_administration
			}
			add_opinion = { #-25 opinion, +1/year
				who = ROOT
				modifier = harpy_tolerance_culled_herd
			}
			reverse_add_opinion = { #-25 opinion, +1/year
				who = ROOT
				modifier = harpy_tolerance_culled_herd
			}
		}
	}
}	

country_event = { #Aerial Explosives
	id = harpy_tolerance_events.17
	title = harpy_tolerance_events.17.t
	desc = harpy_tolerance_events.17.d
	picture = GOBLIN_AMBUSH_eventPicture

	is_triggered_only = yes

	immediate = { #Once per country
		hidden_effect = {
			set_country_flag = harpy_tolerance_aerial_explosives
		}
	}

	option = { #This is the worst idea I've ever heard
		name = "harpy_tolerance_events.17.a"
		add_mil_power = 25
		small_decrease_of_harpy_tolerance_effect = yes
	}

	option = { #This is the best idea I've ever heard
		name = "harpy_tolerance_events.17.b"
		medium_increase_of_harpy_tolerance_effect = yes
		if = {
			limit = {
				monthly_income = 33
			}
			add_years_of_income = -0.5
		}
		else = {
			add_treasury = -200
		}
		add_country_modifier = { #+25% Assault Fort Ability  +10% siege ability
			name = harpy_tolerance_aerial_blitz
			duration = 3650
		}
	}

	option = { #For the truly insane who think 'You know, there's not enough ways to swap my racial mil'
		name = "harpy_tolerance_events.17.c"
		trigger = {
			OR = {
				army_reformer = 3
				ruler_has_personality = naive_personality
				ruler_has_personality = tactical_genius_personality
				ruler_has_personality = free_thinker_personality
				full_idea_group = humanist_ideas #Tolerance
			}
		}
		highlight = yes
		large_increase_of_harpy_tolerance_effect = yes
		remove_country_modifier = goblin_military
		remove_country_modifier = kobold_military
		custom_tooltip = racial_modifiers.6.m
		add_country_modifier = {
			name = harpy_military
			duration = -1
			hidden = yes
		}
		if = {
			limit = {
				OR = {
					capital_scope = { superregion = yanshen_superregion }
					capital_scope = { superregion = vimdatrong_superregion }
					capital_scope = { superregion = gozengun_superregion }
					primary_culture = pezarangi_harpy
					primary_culture = reishao_harpy
					primary_culture = semifire_harpy
					AND = {
						accepted_culture = pezarangi_harpy
						NOT = { culture_group = harpy }
					}
					AND = {
						accepted_culture = reishao_harpy
						NOT = { culture_group = harpy }
					}
					AND = {
						accepted_culture = semifire_harpy
						NOT = { culture_group = harpy }
					}
				}
			}
			change_unit_type = tech_pezarangi_harpy
		}
		else_if = {
			limit = {
				OR = {
					capital_scope = { superregion = north_salahad_superregion }
					capital_scope = { superregion = tanib_dajek_superregion }
					capital_scope = { superregion = fangaula_superregion }
					primary_culture = nzeri_harpy
					AND = {
						accepted_culture = nzeri_harpy
						NOT = { culture_group = harpy }
					}
				}
			}
			change_unit_type = tech_nzeri_harpy
		}
		else_if = {
			limit = {
				OR = {
					capital_scope = { superregion = gozengun_superregion }
					primary_culture = nuzenapu_harpy
					AND = {
						accepted_culture = nuzenapu_harpy
						NOT = { culture_group = harpy }
					}
				}
			}
			change_unit_type = tech_nuzenapu_harpy
		}
		else = {
			change_unit_type = tech_firanyan_harpy
		}
		custom_tooltip = swap_to_harpy_sprites_tooltip
		hidden_effect = { apply_sprite_pack = harpy_sprite_pack }
	}
}

country_event = { #Fly Fishing
	id = harpy_tolerance_events.18
	title = harpy_tolerance_events.18.t
	desc = harpy_tolerance_events.18.d
	picture = ANGRY_MOB_eventPicture

	is_triggered_only = yes
	goto = harpy_tolerance_fishprovince

	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = {
					trade_goods = fish
					has_port = yes
					NOT = {
						fast_has_pop_of_race = { race = harpy }
					}
				}
				save_event_target_as = harpy_tolerance_fishprovince
			}
			random_owned_province = {
				limit = {
					fast_has_pop_of_race = { race = harpy }
					NOT = {
						has_port = yes
					}
				}
				save_event_target_as = harpy_tolerance_notfishprovince
			}
		}
	}

	option = { #Let harpies settle there
		name = "harpy_tolerance_events.18.a"
		goto = harpy_tolerance_fishprovince
		ai_chance = {
			factor = 25
			modifier = {
				factor = 3
				wants_to_increase_tolerance_harpy = yes
			}
			modifier = {
				factor = 0.25
				num_of_rebel_armies = 1
			}
		}
		medium_increase_of_harpy_tolerance_effect = yes
		event_target:harpy_tolerance_fishprovince = {
			generic_add_race_minority_size_effect = { race = harpy }
			add_province_modifier = { #+1 LOCAL Goods Produced
				name = harpy_tolerance_harpy_fisherwomen_superior
				duration = 3650
			}
			leadered_peasant_rebels = 2
		}
	}

	option = { #Harpies should stay on their lands
		name = "harpy_tolerance_events.18.b"
		goto = harpy_tolerance_notfishprovince
		ai_chance = {
			factor = 25
			modifier = {
				factor = 3
				wants_to_decrease_tolerance_harpy = yes
			}
			modifier = {
				factor = 0.25
				num_of_rebel_armies = 1
			}
		}
		medium_decrease_of_harpy_tolerance_effect = yes
		event_target:harpy_tolerance_notfishprovince = {
			the_hunt_rebels = 1
		}
		event_target:harpy_tolerance_fishprovince = {
			add_province_modifier = { #+10% Local Tax Income
				name = harpy_tolerance_stopped_harpy_fishing
				duration = 3650
			}
		}
	}

	option = { #Establish fishing quotas
		name = "harpy_tolerance_events.18.c"
		goto = harpy_tolerance_fishprovince
		ai_chance = {
			factor = 25
			modifier = {
				factor = 3
				num_of_rebel_armies = 1
			}
			modifier = {
				factor = 1.5
				wants_to_increase_tolerance_harpy = yes
			}
			modifier = {
				factor = 0.5
				NOT = {
					OR = {
						adm_power = 25
						dip_power = 25
					}
				}
			}
		}
		small_increase_of_harpy_tolerance_effect = yes
		add_dip_power = -25
		add_adm_power = -25
		event_target:harpy_tolerance_fishprovince = {
			add_province_modifier = { #Local -2 Unrest and +20% Supply Limit Modifier
				name = harpy_tolerance_regulated_waters
				duration = 7300
			}
		}
	}

	option = { #Harpy Explorer
		name = "harpy_tolerance_events.18.e"
		highlight = yes
		trigger = {
			OR = {
				ruler_has_personality = navigator_personality
				naval_reformer = 2
			}
		}
		ai_chance = {
			factor = 25
			modifier = {
				factor = 3
				wants_to_increase_tolerance_harpy = yes
			}
			modifier = {
				factor = 2
				NOT = {
					sailors_percentage = 0.20
				}
			}
			modifier = {
				factor = 3
				NOT = {
					num_of_explorers = 1
				}
			}
		}
		medium_increase_of_harpy_tolerance_effect = yes
		add_yearly_sailors = 2
		if = {
			limit = {
				high_tolerance_harpy_race_trigger = yes
			}
			create_explorer = {
				tradition = 90
				culture = firanyan_harpy
				female = yes
			}
		}
		else_if = {
			limit = {
				medium_tolerance_harpy_race_trigger = yes
			}
			create_explorer = {
				tradition = 60
				culture = firanyan_harpy
				female = yes
			}
		}
		else_if = {
			limit = {
				low_tolerance_harpy_race_trigger = yes
			}
			create_explorer = {
				tradition = 30
				culture = firanyan_harpy
				female = yes
			}
		}
	}
}

country_event = { #Hunted
	id = harpy_tolerance_events.19
	title = harpy_tolerance_events.19.t
	desc = harpy_tolerance_events.19.d
	picture = KINGS_CHOICE_eventPicture

	is_triggered_only = yes

	immediate = {
		hidden_effect = { #Can only fire once per tag
			set_country_flag = harpy_tolerance_hunted_fired
		}
	}

	option = { #Inspiration?
		name = "harpy_tolerance_events.19.a"
		ai_chance = {
			factor = 30
		}
		medium_increase_of_harpy_tolerance_effect = yes
		add_country_modifier = { #+5% All Estate Loyalty Equilibrium
			name = harpy_tolerance_harpy_inspiration
			duration = 5475
		}
	}

	option = { #Seek out a Rivaltu
		name = "harpy_tolerance_events.19.b"
		ai_chance = {
			factor = 30
			modifier = {
				factor = 0.25
				employed_advisor = {
					category = ADM
				}
			}
		}
		medium_increase_of_harpy_tolerance_effect = yes
		define_advisor = {
			type = philosopher
			skill = 2
			cost_multiplier = 0.5
			culture = firanyan_harpy
			religion = the_hunt
			female = yes
		}
	}

	option = { #Use their teachings in your provinces
		name = "harpy_tolerance_events.19.c"
		ai_chance = {
			factor = 30
			modifier = {
				factor = 3
				num_of_provinces_owned_or_owned_by_subjects_with = {
					value = 10
					fast_has_pop_of_race = { race = harpy }
				}
			}
		}
		medium_increase_of_harpy_tolerance_effect = yes
		every_owned_or_subject_province = {
			limit = {
				fast_has_pop_of_race = { race = harpy }
			}
			add_province_modifier = { #-2.5 Local unrest, -25% Local Regiment Recruit Speed, +25% Local Friendly Movespeed
				name = harpy_tolerance_edified_songs
				duration = 3650
			}
		}
	}
}

country_event = { #Fur vs Feathers
	id = harpy_tolerance_events.20
	title = harpy_tolerance_events.20.t
	desc = harpy_tolerance_events.20.d
	picture = CORRUPTION_eventPicture

	is_triggered_only = yes

	option = { #Bet on the harpy
		name = "harpy_tolerance_events.20.a"
		ai_chance = {
			factor = 25
			modifier = {
				factor = 2
				wants_to_increase_tolerance_harpy = yes
			}
			modifier = {
				factor = 2
				ruler_has_personality = sinner_personality
			}
		}
		small_increase_of_harpy_tolerance_effect = yes
		if = {
			limit = {
				monthly_income = 100
			}
			add_treasury = -200
		}
		else = {
			add_years_of_income = -0.166
		}
		random = {
			chance = 50
			
			if = {
				limit = {
					monthly_income = 100
				}
				add_treasury = 400
			}
			else = {
				add_years_of_income = 0.33
			}
		}
	}

	option = { #Bet on the gnoll
		name = "harpy_tolerance_events.20.b"
		ai_chance = {
			factor = 25
			modifier = {
				factor = 2
				wants_to_decrease_tolerance_harpy = yes
			}
			modifier = {
				factor = 2
				ruler_has_personality = sinner_personality
			}
		}
		small_decrease_of_harpy_tolerance_effect = yes
		if = {
			limit = {
				monthly_income = 100
			}
			add_treasury = -200
		}
		else = {
			add_years_of_income = -0.166
		}
		random = {
			chance = 50
			
			if = {
				limit = {
					monthly_income = 100
				}
				add_treasury = 400
			}
			else = {
				add_years_of_income = 0.33
			}
		}
	}

	option = { #Take the pot
		name = "harpy_tolerance_events.20.c"
		ai_chance = {
			factor = 25
			modifier = {
				factor = 3
				wants_to_decrease_tolerance_harpy = yes
			}
			modifier = {
				factor = 2
				ruler_has_personality = greedy_personality
			}
			modifier = {
				factor = 2
				NOT = {
					treasury = 50
				}
			}
		}
		medium_decrease_of_harpy_tolerance_effect = yes
		if = {
			limit = {
				monthly_income = 100
			}
			add_treasury = 400
		}
		else = {
			add_years_of_income = 0.33
		}
	}

	option = { #Wish for a fair fight
		name = "harpy_tolerance_events.20.e"
		highlight = yes
		trigger = {
			OR = {
				ruler_has_personality = righteous_personality
				ruler_has_personality = just_personality
				ruler_has_personality = kind_hearted_personality
				ruler_has_personality = calm_personality
				ruler_has_personality = tolerant_personality
				ruler_has_personality = benevolent_personality
				ruler_has_personality = pious_personality
				ruler_has_personality = incorruptible_personality
				ruler_has_personality = zealot_personality
			}
		}
		ai_chance = {
			factor = 25
			modifier = {
				factor = 3
				wants_to_increase_tolerance_harpy = yes
			}
		}
		small_increase_of_harpy_tolerance_effect = yes
		random_list = {
			50 = {
				add_country_modifier = { #+5% Movespeed, +5% Shock Dmg
					name = harpy_tolerance_fur_beat_feathers
					duration = 1825
				}
			}
			50 = {
				add_country_modifier = { #+5% Movespeed, +5% Fire Damage
					name = harpy_tolerance_feathers_beat_fur
					duration = 1825
				}
			}
		}
	}

}

country_event = { #Harpy Wife, Happy Life?
	id = harpy_tolerance_events.21
	title = harpy_tolerance_events.21.t
	desc = harpy_tolerance_events.21.d
	picture = KINGS_CHOICE_eventPicture

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			random_neighbor_country = {
				limit = {
					has_country_modifier = harpy_administration
					NOT = {
						is_rival = ROOT
						is_enemy = ROOT
						historical_rival_with = ROOT
						war_with = ROOT
					}
				}
				save_event_target_as = harpy_tolerance_harpywife_nation
			}
		}
	}

	option = { #nah
		name = "harpy_tolerance_events.21.a"
		ai_chance = {
			factor = 50
			modifier = {
				factor = 4
				wants_to_decrease_tolerance_harpy = yes
			}
		}
		small_decrease_of_harpy_tolerance_effect = yes
	}

	option = { #Lets go harpy wife
		name = "harpy_tolerance_events.21.b"
		ai_chance = {
			factor = 50
			modifier = {
				factor = 4
				wants_to_increase_tolerance_harpy = yes
			}
			modifier = {
				factor = 0.25
				NOT = {
					legitimacy = 80
				}
			}
			modifier = {
				factor = 0.25
				NOT = {
					estate_loyalty = {
						estate = estate_nobles
						loyalty = 30
					}
				}
			}
			modifier = {
				factor = 0.25
				NOT = {
					treasury = 50
				}
			}
		}
		if = {
			limit = {
				monthly_income = 16.6
			}
			add_treasury = -50
		}
		else = {
			add_years_of_income = -0.25
		}
		medium_increase_of_harpy_tolerance_effect = yes
		hidden_effect = { #Will decrease 20 heir claim on next heir - will clear after heir born or if consort/monarch dies
			set_country_flag = harpy_tolerance_harpy_wife_happy_life
		}
		add_legitimacy = -20
		define_consort = {
			female = yes
			country_of_origin = event_target:harpy_tolerance_harpywife_nation
			culture = event_target:harpy_tolerance_harpywife_nation
			religion = event_target:harpy_tolerance_harpywife_nation
		}
		add_country_modifier = { #-10% Nobility Estate Equilibrium
			name = harpy_tolerance_harpy_wife
			duration = 9125
		}
		every_known_country = {
			limit = {
				has_country_modifier = harpy_administration
			}
			add_opinion = { #+25 opinion, -1/year
				who = ROOT
				modifier = harpy_tolerance_happyharpywife
			}
			reverse_add_opinion = { #+25 opinion, -1/year
				who = ROOT
				modifier = harpy_tolerance_happyharpywife
			}
		}
	}
}


country_event = { #Doctines to Delight
	id = harpy_tolerance_events.22
	title = harpy_tolerance_events.22.t
	desc = harpy_tolerance_events.22.d
	picture = CONSORT_DOING_BADLY_eventPicture

	is_triggered_only = yes

	immediate = { #For loc
		hidden_effect = {
			random_owned_province = {
				limit = {
					fast_has_pop_of_race = { race = harpy }
				}
				save_event_target_as = harpy_tolerance_riaveltu_province
			}
		}
	}

	option = { #Crane
		name = "harpy_tolerance_events.22.a"
		ai_chance = {
			factor = 12
			modifier = {
				factor = 0.1
				NOT = {
					treasury = 300
				}
			}
		}
		if = {
			limit = {
				monthly_income = 25
			}
			add_treasury = -300
		}
		else = {
			add_years_of_income = -1
		}
		small_increase_of_harpy_tolerance_effect = yes
		add_country_modifier = {
			name = harpy_tolerance_crane_doctrine
			duration = 3650
		}
	}

	option = { #Gull
		name = "harpy_tolerance_events.22.b"
		ai_chance = {
			factor = 12
			modifier = {
				factor = 0.1
				NOT = {
					treasury = 300
				}
			}
		}
		highlight = yes
		trigger = {
			OR = {
				consort_has_personality = well_connected_personality
				consort_has_personality = fertile_personality
				consort_has_personality = expansionist_personality
			}
		}
		if = {
			limit = {
				monthly_income = 25
			}
			add_treasury = -300
		}
		else = {
			add_years_of_income = -1
		}
		small_increase_of_harpy_tolerance_effect = yes
		add_country_modifier = {
			name = harpy_tolerance_gull_doctrine
			duration = 3650
		}
	}

	option = { #Sparrow
		name = "harpy_tolerance_events.22.c"
		ai_chance = {
			factor = 12
			modifier = {
				factor = 0.1
				NOT = {
					treasury = 300
				}
			}
		}
		highlight = yes
		trigger = {
			has_estate = estate_adventurers
			NOT = {
				num_of_cities = 20
			}
		}
		if = {
			limit = {
				monthly_income = 25
			}
			add_treasury = -300
		}
		else = {
			add_years_of_income = -1
		}
		small_increase_of_harpy_tolerance_effect = yes
		add_country_modifier = {
			name = harpy_tolerance_sparrow_doctrine
			duration = 3650
		}
	}
	
	option = { #Owl
		name = "harpy_tolerance_events.22.e"
		ai_chance = {
			factor = 12
			modifier = {
				factor = 0.1
				NOT = {
					treasury = 300
				}
			}
		}
		highlight = yes
		trigger = {
			OR = {
				consort_has_personality = mage_personality
				consort_has_personality = patron_of_arts_personality
				consort_has_personality = free_thinker_personality
				consort_has_personality = scholar_personality
			}
		}
		if = {
			limit = {
				monthly_income = 25
			}
			add_treasury = -300
		}
		else = {
			add_years_of_income = -1
		}
		small_increase_of_harpy_tolerance_effect = yes
		add_country_modifier = {
			name = harpy_tolerance_owl_doctrine
			duration = 3650
		}
	}

	option = { #Eagle
		name = "harpy_tolerance_events.22.f"
		ai_chance = {
			factor = 12
			modifier = {
				factor = 0.1
				NOT = {
					treasury = 300
				}
			}
		}
		if = {
			limit = {
				monthly_income = 25
			}
			add_treasury = -300
		}
		else = {
			add_years_of_income = -1
		}
		small_increase_of_harpy_tolerance_effect = yes
		add_country_modifier = {
			name = harpy_tolerance_eagle_doctrine
			duration = 3650
		}
	}

	option = { #Myna
		name = "harpy_tolerance_events.22.g"
		ai_chance = {
			factor = 12
			modifier = {
				factor = 0.1
				NOT = {
					treasury = 300
				}
			}
		}
		if = {
			limit = {
				monthly_income = 25
			}
			add_treasury = -300
		}
		else = {
			add_years_of_income = -1
		}
		small_increase_of_harpy_tolerance_effect = yes
		add_country_modifier = {
			name = harpy_tolerance_myna_doctrine
			duration = 3650
		}
	}

	option = { #Osprey
		name = "harpy_tolerance_events.22.h"
		ai_chance = {
			factor = 12
			modifier = {
				factor = 0.1
				NOT = {
					treasury = 300
				}
			}
		}
		highlight = yes
		trigger = {
			num_of_total_ports = 1
			navy_size = 30
		}
		if = {
			limit = {
				monthly_income = 25
			}
			add_treasury = -300
		}
		else = {
			add_years_of_income = -1
		}
		small_increase_of_harpy_tolerance_effect = yes
		add_country_modifier = {
			name = harpy_tolerance_osprey_doctrine
			duration = 3650
		}
	}

	option = { #Meh
		name = "harpy_tolerance_events.22.i"
		ai_chance = {
			factor = 12
			modifier = {
				factor = 4
				wants_to_decrease_tolerance_harpy = yes
			}
			modifier = {
				factor = 0.2
				NOT = {
					has_heir = yes
				}
			}
			modifier = {
				factor = 3
				OR = {
					ruler_has_personality = greedy_personality
					ruler_has_personality = cruel_personality
				}
			}
		}
		small_decrease_of_harpy_tolerance_effect = yes
		add_treasury = -1
		add_country_modifier = {
			name = harpy_tolerance_neglected_consort
			duration = 1825
		}
	}
}