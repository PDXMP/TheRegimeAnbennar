
namespace = yudunyovi

#0-5 : Conversion Event Chain
#10-11 : Quest Event Menu
#20+ : Deity Events
#100 : Deity Button Event

country_event = {
	id = yudunyovi.0 #Hidden event to chose who gets event 1
	title = none
	desc = none
	picture = none
	
	is_triggered_only = yes
	fire_only_once = yes
	hidden = yes
	
	trigger = {
		owns = 5132 #Remolgeibar
		is_year = 1500
		OR = {
			is_year = 1530
			calc_true_if = {
				amount = 5
				west_forbidden_plains_region = {
					type = all
					OR = {
						has_human_minority_trigger = yes
						culture = orachav
					}
				}
				east_forbidden_plains_region = {
					type = all
					OR = {
						has_human_minority_trigger = yes
						culture = orachav
					}
				}
				serpent_gift_region = {
					type = all
					OR = {
						has_human_minority_trigger = yes
						culture = orachav
					}
				}
			}
			calc_true_if = {
				amount = 10
				west_forbidden_plains_region = {
					type = all
					owner = { culture_is_human = yes }
				}
				east_forbidden_plains_region = {
					type = all
					owner = { culture_is_human = yes }
				}
				serpent_gift_region = {
					type = all
					owner = { culture_is_human = yes }
				}
			}
		}
	}
	
	option = {
		name = none
		random_province = {
			limit = {
				OR = {
					region = east_forbidden_plains_region
					region = west_forbidden_plains_region
					region = serpent_gift_region
				}
				OR = {
					has_human_minority_trigger = yes
					culture = orachav
					owner = { culture_is_human = yes }
				}
			}
			save_event_target_as = yudunyovi_spawn_province
		}
		random_province = {
			limit = {
				owner = { ai = no }
				OR = {
					region = east_forbidden_plains_region
					region = west_forbidden_plains_region
					region = serpent_gift_region
				}
				OR = {
					has_human_minority_trigger = yes
					culture = orachav
					owner = { culture_is_human = yes }
				}
			}
			save_event_target_as = yudunyovi_spawn_province
		}

		event_target:yudunyovi_spawn_province = {
			province_event = {
				id = yudunyovi.1 #Winds of Ancestry
			}
		}
	}
}

province_event = {
	id = yudunyovi.1 #Winds of Ancestry
	title = yudunyovi.1.t
	desc = yudunyovi.1.desc
	picture = ICONS_IN_CHURCH_eventPicture
	
	is_triggered_only = yes
	
	option = {
		name = yudunyovi.1.a
		province_event = {
			id = yudunyovi.2 #A Shine Long Lost
			days = 365 #1 year
		}
	}
}

province_event = {
	id = yudunyovi.2 #A Shine Long Lost
	title = yudunyovi.2.t
	desc = yudunyovi.2.desc
	picture = ICONS_IN_CHURCH_eventPicture
	
	is_triggered_only = yes
	
	option = {
		name = yudunyovi.2.a
		province_event = {
			id = yudunyovi.3 #The Enlightenment of the Steppes
			days = 365 #1 year
		}
	}
}

province_event = {
	id = yudunyovi.3 #Hidden event to turn province event into a country one to make things easier
	title = yudunyovi.3.t
	desc = none
	picture = none
	
	is_triggered_only = yes
	hidden = yes
	
	option = {
		name = none
		enable_religion = yudunyovi
		owner = {
			set_country_flag = spawned_yudunyovi_tag
			if = { 
				limit = { capital_scope = { superregion = forbidden_lands_superregion } }
				country_event = { id = yudunyovi.4 } #The Enlightenment of the Steppes
			}
		}
		forbidden_lands_superregion = {
			limit = { culture = orachav }
			change_religion = yudunyovi
			add_province_modifier = {
				name = religious_zeal_at_conv
				duration = 7300 #20 years
			}
			owner = {
				if = { 
					limit = { capital_scope = { superregion = forbidden_lands_superregion } }
					country_event = { id = yudunyovi.4 } #Gods of the People
				}
			}
		}
		forbidden_lands_superregion = {
			type = random
			amount = 5
			limit = {
				culture_is_centaur = yes
				OR = {
					region = east_forbidden_plains_region
					region = west_forbidden_plains_region
					region = serpent_gift_region
				}
			}
			change_religion = yudunyovi
			add_province_modifier = {
				name = religious_zeal_at_conv
				duration = 7300 #20 years
			}
			owner = {
				if = { 
					limit = { capital_scope = { superregion = forbidden_lands_superregion } }
					country_event = { id = yudunyovi.4 } #Gods of the People
				}
			}
		}
	}
}

country_event = {
	id = yudunyovi.4 #The Enlightenment of the Steppes / Gods of the People
	title = yudunyovi.4.t
	picture = ICONS_IN_CHURCH_eventPicture

	desc = {
		trigger = { has_country_flag = spawned_yudunyovi_tag }
		desc = yudunyovi.4.descSpawn
	}

	desc = {
		trigger = { NOT = { has_country_flag = spawned_yudunyovi_tag } }
		desc = yudunyovi.4.descElse
	}
	
	is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = { 
					is_capital = no 
					NOT = { religion = yudunyovi }
				}
				save_event_target_as = yudunyovi_convert_prov_1
			}
			random_owned_province = {
				limit = { 
					is_capital = no 
					NOT = { 
						religion = yudunyovi 
						province_id = event_target:yudunyovi_convert_prov_1
					}
				}
				save_event_target_as = yudunyovi_convert_prov_2
			}
			random_owned_province = {
				limit = { 
					is_capital = no 
					NOT = { 
						religion = yudunyovi 
						province_id = event_target:yudunyovi_convert_prov_1
						province_id = event_target:yudunyovi_convert_prov_2
					}
				}
				save_event_target_as = yudunyovi_convert_prov_3
			}
		}
	}
	
	option = {
		name = yudunyovi.4.a #Convert
		trigger = {
			NOT = {
				tag = I89 #Khuraen Ulaeg
				tag = J56 #Taryeanzamh
				tag = J47 #Skurkokli
				religion = kalyin_worshippers
			}
		}

		change_religion = yudunyovi
		set_ruler_religion = yudunyovi
		set_heir_religion = yudunyovi
		set_consort_religion = yudunyovi
		capital_scope = { change_religion = yudunyovi }
		custom_tooltip = yudunyovi_estate_name_change_tt
		if = {
			limit = { religion = irdaeos_worship }
			tooltip = {
				unlock_yudunyovi_deity = { 
					deity = shirdos 
					change_deity = yes
				}
			}
		}
		else_if = {
			limit = { religion = yukel_followers }
			tooltip = {
				unlock_yudunyovi_deity = { 
					deity = yukel 
					change_deity = yes
				}
			}
		}
		else_if = {
			limit = { religion = kalyin_worshippers }
			tooltip = {
				unlock_yudunyovi_deity = { 
					deity = kalyin 
					change_deity = yes
				}
			}
		}
		else = { 
			tooltip = {
				unlock_yudunyovi_deity = { 
					deity = taqoshur 
					change_deity = yes
				}
			}
		}
		add_country_modifier = {
			name = yudunyovi_enlightened_conversion
			duration = 7300 #20 years
		}
		if = {
			limit = { has_saved_event_target = yudunyovi_convert_prov_1 }
			event_target:yudunyovi_convert_prov_1 = {
				change_religion = yudunyovi
				add_province_modifier = {
					name = religious_zeal_at_conv
					duration = 7300 #20 years
				}
			}
		}
		if = {
			limit = { has_saved_event_target = yudunyovi_convert_prov_2 }
			event_target:yudunyovi_convert_prov_2 = {
				change_religion = yudunyovi
				add_province_modifier = {
					name = religious_zeal_at_conv
					duration = 7300 #20 years
				}
			}
		}

		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				religious_school = {
					group = centaur_religion
					school = filustkhuga_school
				}
			}
			modifier = {
				factor = 0.5
				religious_school = {
					group = centaur_religion
					school = malukhuga_school
				}
			}
			modifier = {
				factor = 2
				OR = {
					primary_culture = zabatlari
					primary_culture = orachav
				}
			}
		}
	}
	
	option = {
		name = yudunyovi.4.b #Don't Convert
		trigger = { NOT = { tag = J53 } } #Zabutodask
		add_prestige = 10
		if = {
			limit = { has_saved_event_target = yudunyovi_convert_prov_1 }
			event_target:yudunyovi_convert_prov_1 = {
				change_religion = yudunyovi
				add_province_modifier = {
					name = religious_zeal_at_conv
					duration = 7300 #20 years
				}
			}
		}
		if = {
			limit = { has_saved_event_target = yudunyovi_convert_prov_2 }
			event_target:yudunyovi_convert_prov_2 = {
				change_religion = yudunyovi
				add_province_modifier = {
					name = religious_zeal_at_conv
					duration = 7300 #20 years
				}
			}
		}
		if = {
			limit = { has_saved_event_target = yudunyovi_convert_prov_3 }
			event_target:yudunyovi_convert_prov_3 = {
				change_religion = yudunyovi
				add_province_modifier = {
					name = religious_zeal_at_conv
					duration = 7300 #20 years
				}
			}
		}
	}
}

country_event = {
	id = yudunyovi.5 #Hidden deity conversion event
	title = none
	desc = none
	picture = none
	
	is_triggered_only = yes
	hidden = yes
	
	option = {
		name = none
		if = {
			limit = { has_country_flag = was_irdaeos_worship }
			unlock_yudunyovi_deity = { 
				deity = shirdos 
				change_deity = yes
			}
		}
		else_if = {
			limit = { has_country_flag = was_yukel_followers }
			unlock_yudunyovi_deity = { 
				deity = yukel 
				change_deity = yes
			}
		}
		else_if = {
			limit = { has_country_flag = was_kalyin_worshippers }
			unlock_yudunyovi_deity = { 
				deity = kalyin 
				change_deity = yes
			}
		}
		else = { 
			unlock_yudunyovi_deity = { 
				deity = taqoshur 
				change_deity = yes
			}
		}
	}
}

#Quests
country_event = {
	id = yudunyovi.10 #Quests Event Menu
	title = yudunyovi.10.t
	desc = yudunyovi.10.desc
	picture = ICONS_IN_CHURCH_eventPicture
	
	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			#Yukel GOTO
			5312 = { save_event_target_as = yukel_prov } #Center of Lake Yukel
			
			#Shirdos GOTO
			5132 = { save_event_target_as = shirdos_prov } #Glyphs of Irdaeos Location
		}
	}
	
	option = {
		name = yudunyovi.10.quit
		highlight = yes
		ai_chance = { factor = 0 }
	}
	
	#Taqoshur
	option = {
		name = yudunyovi.10.a1
		trigger = { 
			get_yudunyvi_deity_reqs = { deity = taqoshur }
			NOT = { unlocked_yudunyovi_deity = { deity = taqoshur } }
		}
		highlight = yes
		unlock_yudunyovi_deity = { deity = taqoshur }
		ai_chance = { factor = 10000 }
	}
	
	option = {
		name = yudunyovi.10.a2
		trigger = { 
			NOT = { get_yudunyvi_deity_reqs = { deity = taqoshur }}
			NOT = { unlocked_yudunyovi_deity = { deity = taqoshur } }
		}
		yudunyovi_get_req_tooltips = {
			deity = taqoshur
			num = 1
			req = "all_owned_province = { NOT = { devastation = 1 } }"
		}
		yudunyovi_get_req_tooltips = {
			deity = taqoshur
			num = 2
			req = "
				num_of_owned_provinces_with = {
					value = 3
					superregion = forbidden_lands_superregion
					development = 20
					culture = ROOT
				}
			"
		}
		custom_tooltip = long_dash_tt
		tooltip = { unlock_yudunyovi_deity = { deity = taqoshur } } #Quests Event Menu
		hidden_effect = { country_event = { id = yudunyovi.11 } }
		ai_chance = { factor = 0 }
	}
	
	#Soiti
	option = {
		name = yudunyovi.10.b1
		trigger = { 
			get_yudunyvi_deity_reqs = { deity = soiti }
			NOT = { unlocked_yudunyovi_deity = { deity = soiti } }
		}
		highlight = yes
		unlock_yudunyovi_deity = { deity = soiti }
		ai_chance = { factor = 10000 }
	}
	
	option = {
		name = yudunyovi.10.b2
		trigger = { 
			NOT = { get_yudunyvi_deity_reqs = { deity = soiti }}
			NOT = { unlocked_yudunyovi_deity = { deity = soiti } }
		}
		custom_tooltip = one_of_the_following_tt
		yudunyovi_get_req_tooltips = {
			deity = soiti
			num = 1
			req = "ruler_has_amount_spell_levels = { amount = 1 }"
		}
		custom_tooltip = all_of_the_following_tt
		yudunyovi_get_req_tooltips = {
			deity = soiti
			num = 2
			req = "estate_loyalty = { estate = estate_mages loyalty = 60 }"
		}
		yudunyovi_get_req_tooltips = {
			deity = soiti
			num = 3
			req = "estate_influence = { estate = estate_mages influence = 60 }"
		}
		yudunyovi_get_req_tooltips = {
			deity = soiti
			num = 4
			req = "at_least_magical_infrastructure_level_2 = yes"
		}
		custom_tooltip = long_dash_tt
		tooltip = { unlock_yudunyovi_deity = { deity = soiti } } #Quests Event Menu
		hidden_effect = { country_event = { id = yudunyovi.11 } }
		ai_chance = { factor = 0 }
	}
	
	#Yukel
	option = {
		name = yudunyovi.10.c1
		trigger = { 
			get_yudunyvi_deity_reqs = { deity = yukel }
			NOT = { unlocked_yudunyovi_deity = { deity = yukel } }
		}
		trigger = { get_yudunyvi_deity_reqs = { deity = yukel }}
		highlight = yes
		unlock_yudunyovi_deity = { deity = yukel }
		ai_chance = { factor = 10000 }
	}
	
	option = {
		name = yudunyovi.10.c2
		trigger = { 
			NOT = { get_yudunyvi_deity_reqs = { deity = yukel }}
			NOT = { unlocked_yudunyovi_deity = { deity = yukel } }
		}
		goto = yukel_prov
		yudunyovi_get_req_tooltips = {
			deity = yukel
			num = 1
			req = "
				yukelqur_lake_group = {
					type = all
					owned_by = ROOT
				}
			"
		}
		custom_tooltip = one_of_the_following_tt
		yudunyovi_get_req_tooltips = {
			deity = yukel
			num = 2
			req = "navy_tradition = 40"
		}
		yudunyovi_get_req_tooltips = {
			deity = yukel
			num = 3
			req = "navy_size = 60"
		}
		custom_tooltip = long_dash_tt
		tooltip = { unlock_yudunyovi_deity = { deity = yukel } } #Quests Event Menu
		hidden_effect = { country_event = { id = yudunyovi.11 } }
		ai_chance = { factor = 0 }
	}
	
	#Kalyin
	option = {
		name = yudunyovi.10.d1
		trigger = { 
			get_yudunyvi_deity_reqs = { deity = kalyin }
			NOT = { unlocked_yudunyovi_deity = { deity = kalyin } }
		}
		highlight = yes
		unlock_yudunyovi_deity = { deity = kalyin }
		custom_tooltip = yudunyovi_disable_yukel_tt
		if = {
			limit = { has_personal_deity = yukel }
			change_personal_deity = kalyin
		}
		set_country_flag = yudunyovi_kalyin_upgrade_flag
		ai_chance = { factor = 10000 }
	}
	
	option = {
		name = yudunyovi.10.d2
		trigger = { 
			NOT = { get_yudunyvi_deity_reqs = { deity = kalyin }}
			NOT = { unlocked_yudunyovi_deity = { deity = kalyin } }
		}
		yudunyovi_get_req_tooltips = {
			deity = kalyin
			num = 1
			req = "is_religion_enabled = kalyin_worshippers"
		}
		yudunyovi_get_req_tooltips = {
			deity = kalyin
			num = 2
			req = "has_personal_deity = yukel"
		}
		yudunyovi_get_req_tooltips = {
			deity = kalyin
			num = 3
			req = "is_tribal = no"
		}
		yudunyovi_get_req_tooltips = {
			deity = kalyin
			num = 4
			req = "reform_level = 6"
		}
		yudunyovi_get_req_tooltips = {
			deity = kalyin
			num = 5
			req = "
				num_of_owned_provinces_with = {
					value = 10
					has_courthouse_building_trigger = yes
				}
			"
		}
		custom_tooltip = long_dash_tt
		tooltip = { unlock_yudunyovi_deity = { deity = kalyin } } #Quests Event Menu
		custom_tooltip = yudunyovi_disable_yukel_tt
		hidden_effect = { country_event = { id = yudunyovi.11 } }
		ai_chance = { factor = 0 }
	}
	
	#Shirdos
	option = {
		name = yudunyovi.10.e1
		trigger = { 
			get_yudunyvi_deity_reqs = { deity = shirdos }
			NOT = { unlocked_yudunyovi_deity = { deity = shirdos } }
		}
		highlight = yes
		unlock_yudunyovi_deity = { deity = shirdos }
		ai_chance = { factor = 10000 }
	}
	
	option = {
		name = yudunyovi.10.e2
		trigger = { 
			NOT = { get_yudunyvi_deity_reqs = { deity = shirdos }}
			NOT = { unlocked_yudunyovi_deity = { deity = shirdos } }
		}
		goto = shirdos_prov
		yudunyovi_get_req_tooltips = {
			deity = shirdos
			num = 1
			req = "
				5132 = {
					owned_by = ROOT
					has_great_project = {
						type = glyphs_irdaeos
						tier = 2
					}
				}
			"
		}
		custom_tooltip = one_of_the_following_tt
		yudunyovi_get_req_tooltips = {
			deity = shirdos
			num = 2
			req = "high_tolerance_centaur_race_trigger = yes"
		}
		yudunyovi_get_req_tooltips = {
			deity = shirdos
			num = 3
			req = "NOT = { any_known_country = { culture_is_centaur = yes } }"
		}
		custom_tooltip = long_dash_tt
		tooltip = { unlock_yudunyovi_deity = { deity = shirdos } } #Quests Event Menu
		hidden_effect = { country_event = { id = yudunyovi.11 } }
		ai_chance = { factor = 0 }
	}
	
	#Yerush
	option = {
		name = yudunyovi.10.f1
		trigger = { 
			get_yudunyvi_deity_reqs = { deity = yerush }
			NOT = { unlocked_yudunyovi_deity = { deity = yerush } }
		}
		highlight = yes
		unlock_yudunyovi_deity = { deity = yerush }
		ai_chance = { factor = 10000 }
	}
	
	option = {
		name = yudunyovi.10.f2
		trigger = { 
			NOT = { get_yudunyvi_deity_reqs = { deity = yerush }}
			NOT = { unlocked_yudunyovi_deity = { deity = yerush } }
		}
		yudunyovi_get_req_tooltips = {
			deity = yerush
			num = 1
			req = "num_of_wars = { amount = 10 }"
		}
		yudunyovi_get_req_tooltips = {
			deity = yerush
			num = 2
			req = "num_of_war_reparations = 3"
		}
		yudunyovi_get_req_tooltips = {
			deity = yerush
			num = 3
			req = "has_country_flag = humiliated_rival"
		}
		custom_tooltip = long_dash_tt
		tooltip = { unlock_yudunyovi_deity = { deity = yerush } } #Quests Event Menu
		hidden_effect = { country_event = { id = yudunyovi.11 } }
		ai_chance = { factor = 0 }
	}
	
	#Ek'chorvu
	option = {
		name = yudunyovi.10.g1
		trigger = { 
			get_yudunyvi_deity_reqs = { deity = ekchorvu }
			NOT = { unlocked_yudunyovi_deity = { deity = ekchorvu } }
		}
		highlight = yes
		unlock_yudunyovi_deity = { deity = ekchorvu }
		ai_chance = { factor = 10000 }
	}
	
	option = {
		name = yudunyovi.10.g2
		trigger = { 
			NOT = { get_yudunyvi_deity_reqs = { deity = ekchorvu }}
			NOT = { unlocked_yudunyovi_deity = { deity = ekchorvu } }
		}
		yudunyovi_get_req_tooltips = {
			deity = ekchorvu
			num = 1
			req = "
				num_of_owned_provinces_with = {
					value = 5
					has_building = farm_estate
				}
			"
		}
		yudunyovi_get_req_tooltips = {
			deity = ekchorvu
			num = 2
			req = "
				any_owned_province = {
					base_production = 6
					trade_goods = livestock
				}
			"
		}
		custom_tooltip = one_of_the_following_tt
		yudunyovi_get_req_tooltips = {
			deity = ekchorvu
			num = 3
			req = "diplomatic_ideas = 7"
		}
		yudunyovi_get_req_tooltips = {
			deity = ekchorvu
			num = 4
			req = "
				calc_true_if = {
					amount = 3
					all_ally = {
						trust = {
							who = ROOT
							value = 80
						}
					}
				}
			"
		}
		yudunyovi_get_req_tooltips = {
			deity = ekchorvu
			num = 5
			req = "
				calc_true_if = {
					amount = 5
					all_subject_country = {
						NOT = { liberty_desire = 50 }
						has_opinion = {
							who = ROOT
							value = 180
						}
					}
				}
			"
		}
		custom_tooltip = long_dash_tt
		tooltip = { unlock_yudunyovi_deity = { deity = ekchorvu } } #Quests Event Menu
		hidden_effect = { country_event = { id = yudunyovi.11 } }
		ai_chance = { factor = 0 }
	}
	
	#Tayoghur
	option = {
		name = yudunyovi.10.h1
		trigger = { 
			get_yudunyvi_deity_reqs = { deity = tayoghur }
			NOT = { unlocked_yudunyovi_deity = { deity = tayoghur } }
		}
		highlight = yes
		unlock_yudunyovi_deity = { deity = tayoghur }
		ai_chance = { factor = 10000 }
	}
	
	option = {
		name = yudunyovi.10.h2
		trigger = { 
			NOT = { get_yudunyvi_deity_reqs = { deity = tayoghur }}
			NOT = { unlocked_yudunyovi_deity = { deity = tayoghur } }
		}
		yudunyovi_get_req_tooltips = {
			deity = tayoghur
			num = 1
			req = "
				num_of_owned_provinces_with = {
					value = 6
					OR = {
						trade_goods = iron
						trade_goods = copper
						trade_goods = gems
					}
					has_production_building_trigger = yes
					base_production = 6
				}
			"
		}
		custom_tooltip = one_of_the_following_tt
		yudunyovi_get_req_tooltips = {
			deity = tayoghur
			num = 2
			req = "
				OR = { 
					high_tolerance_dwarven_race_trigger = yes 
					medium_tolerance_dwarven_race_trigger = yes 
				}
			"
		}
		yudunyovi_get_req_tooltips = {
			deity = tayoghur
			num = 3
			req = "any_ally = { culture_is_dwarven = yes }"
		}
		yudunyovi_get_req_tooltips = {
			deity = tayoghur
			num = 4
			req = "any_subject_country = { culture_is_dwarven = yes }"
		}
		yudunyovi_get_req_tooltips = {
			deity = tayoghur
			num = 5
			req = "has_dwarven_accepted_culture = yes"
		}
		custom_tooltip = long_dash_tt
		tooltip = { unlock_yudunyovi_deity = { deity = tayoghur } } #Quests Event Menu
		hidden_effect = { country_event = { id = yudunyovi.11 } }
		ai_chance = { factor = 0 }
	}
	
	#Asimlik
	option = {
		name = yudunyovi.10.i1
		trigger = { 
			get_yudunyvi_deity_reqs = { deity = asimlik }
			NOT = { unlocked_yudunyovi_deity = { deity = asimlik } }
		}
		highlight = yes
		unlock_yudunyovi_deity = { deity = asimlik }
		ai_chance = { factor = 10000 }
	}
	
	option = {
		name = yudunyovi.10.i2
		trigger = { 
			NOT = { get_yudunyvi_deity_reqs = { deity = asimlik }}
			NOT = { unlocked_yudunyovi_deity = { deity = asimlik } }
		}
		yudunyovi_get_req_tooltips = {
			deity = asimlik
			num = 1
			req = "has_personal_deity = taqoshur"
		}
		yudunyovi_get_req_tooltips = {
			deity = asimlik
			num = 2
			req = "
				calc_true_if = {
					amount = 5
					all_states = { is_prosperous = yes }
				}
			"
		}
		yudunyovi_get_req_tooltips = {
			deity = asimlik
			num = 3
			req = "
				num_of_owned_provinces_with = {
					value = 5
					trade_goods = grain
					has_building = farm_estate
					base_production = 6
				}
			"
		}
		
		custom_tooltip = long_dash_tt
		tooltip = { unlock_yudunyovi_deity = { deity = asimlik } } #Quests Event Menu
		hidden_effect = { country_event = { id = yudunyovi.11 } }
		ai_chance = { factor = 0 }
	}
	
	#Final Quest
	option = {
		name = yudunyovi.10.j1
		trigger = {
			hidden_trigger = {
				has_country_flag = yudunyovi_taqoshur_unlocked_flag
				has_country_flag = yudunyovi_soiti_unlocked_flag
				has_country_flag = yudunyovi_yukel_unlocked_flag
				has_country_flag = yudunyovi_kalyin_unlocked_flag
				has_country_flag = yudunyovi_shirdos_unlocked_flag
				has_country_flag = yudunyovi_yerush_unlocked_flag
				has_country_flag = yudunyovi_ekchorvu_unlocked_flag
				has_country_flag = yudunyovi_tayoghur_unlocked_flag
				has_country_flag = yudunyovi_asimlik_unlocked_flag
			}
			get_yudunyvi_deity_reqs = { deity = final_quest }
			NOT = { has_country_modifier = yudunyovi_worldly_pantheon_restored }
		}
		highlight = yes

		country_event = {
			id = yudunyovi.22 #Worldly Reclamation
		}

		ai_chance = { factor = 10000 }
	}
	
	option = {
		name = yudunyovi.10.j2
		trigger = {
			hidden_trigger = {
				has_country_flag = yudunyovi_taqoshur_unlocked_flag
				has_country_flag = yudunyovi_soiti_unlocked_flag
				has_country_flag = yudunyovi_yukel_unlocked_flag
				has_country_flag = yudunyovi_kalyin_unlocked_flag
				has_country_flag = yudunyovi_shirdos_unlocked_flag
				has_country_flag = yudunyovi_yerush_unlocked_flag
				has_country_flag = yudunyovi_ekchorvu_unlocked_flag
				has_country_flag = yudunyovi_tayoghur_unlocked_flag
				has_country_flag = yudunyovi_asimlik_unlocked_flag
			}
			NOT = { get_yudunyvi_deity_reqs = { deity = final_quest } }
			NOT = { has_country_modifier = yudunyovi_worldly_pantheon_restored }
		}
		yudunyovi_get_req_tooltips = {
			deity = final_quest
			num = 1
			req = "
				num_of_provinces_owned_or_owned_by_subjects_with = {
					value = 150
					superregion = bulwar_superregion
					religion = yudunyovi
				}
			"
		}

		custom_tooltip = long_dash_tt
		tooltip = {
			country_event = {
				id = yudunyovi.22 #Worldly Reclamation
			}
		}

		ai_chance = { factor = 0 }
	}
}

country_event = {
	id = yudunyovi.11 #Hidden event to respawn the menu
	title = none
	desc = none
	picture = none
	
	is_triggered_only = yes
	hidden = yes

	trigger = { ai = no }
	
	option = {
		name = none
		country_event = {
			id = yudunyovi.10 #Quests Event Menu
		}
	}
}

#Deity Events
country_event = {
	id = yudunyovi.20 #Taqoshur
	title = yudunyovi.20.t
	desc = yudunyovi.20.desc
	picture = ICONS_IN_CHURCH_eventPicture
	
	is_triggered_only = yes
	
	trigger = { has_personal_deity = taqoshur }

	immediate = {
		hidden_effect = {
			random_owned_province = {
				save_event_target_as = yudunyovi_prov_1
			}
			random_owned_province = {
				limit = {
					area_for_scope_province = {
						type = all
						NOT = { province_id = event_target:yudunyovi_prov_1 }
					}
				}
				save_event_target_as = yudunyovi_prov_2
			}
			random_owned_province = {
				limit = {
					area_for_scope_province = {
						type = all
						NOT = { 
							province_id = event_target:yudunyovi_prov_1 
							province_id = event_target:yudunyovi_prov_2
						}
					}
				}
				save_event_target_as = yudunyovi_prov_3
			}
		}
	}
	
	option = {
		name = yudunyovi.20.a
		event_target:yudunyovi_prov_1 = {
			area = {
				limit = { owned_by = ROOT }
				add_devastation = -100
				add_prosperity = 50
			}
		}
		if = {
			limit = { has_saved_event_target = yudunyovi_prov_2 }
			event_target:yudunyovi_prov_2 = {
				area = {
					limit = { owned_by = ROOT }
					add_devastation = -100
					add_prosperity = 50
				}
			}
		}
		if = {
			limit = { has_saved_event_target = yudunyovi_prov_3 }
			event_target:yudunyovi_prov_3 = {
				area = {
					limit = { owned_by = ROOT }
					add_devastation = -100
					add_prosperity = 50
				}
			}
		}
	}
}

country_event = {
	id = yudunyovi.21 #Soiti Dream Speakers
	title = yudunyovi.21.t
	desc = yudunyovi.21.desc
	picture = ICONS_IN_CHURCH_eventPicture
	
	is_triggered_only = yes
	
	trigger = { 
		has_personal_deity = soiti 
		has_estate_privilege = estate_mages_dream_speakers
		ruler_is_powerful_mage = yes
		NOT = { has_ruler_flag = had_dream_speakers_event }
	}

	immediate = {
		hidden_effect = {
			set_ruler_flag = had_dream_speakers_event
		}
	}
	
	option = {
		name = yudunyovi.21.a
		give_ruler_random_spell_school = yes
		give_ruler_random_spell_school = yes
	}
}

country_event = {
	id = yudunyovi.22 #Worldly Reclamation
	title = yudunyovi.22.t
	desc = yudunyovi.22.desc
	picture = ICONS_IN_CHURCH_eventPicture
	
	is_triggered_only = yes
	
	option = {
		name = yudunyovi.22.a
		add_country_modifier = {
			name = yudunyovi_worldly_pantheon_restored
			duration = -1
		}
		custom_tooltip = yudunyovi_sun_cult_tt
		custom_tooltip = yudunyovi_sun_cult_gp_tt
		set_global_flag = yudunyovi_sun_cult_mods
		set_global_flag = yudunyovi_sun_cult_gp_mods
	}
}

#Change Deity Button Event
country_event = {
	id = yudunyovi.100
	title = yudunyovi.100.t
	desc = yudunyovi.100.desc
	picture = ARTWORK_eventPicture
	
	is_triggered_only = yes
	
	option = {
		name = yudunyovi.100.a
		highlight = yes
	}
	
	option = {
		name = yudunyovi.100.b
		trigger = { unlocked_yudunyovi_deity = { deity = taqoshur } }
		change_personal_deity = taqoshur
		custom_tooltip = yudunyovi_taqoshur_effects_tt
		set_country_flag = yudunyovi_deity_switch_cooldown
	}
	
	option = {
		name = yudunyovi.100.c
		trigger = { unlocked_yudunyovi_deity = { deity = soiti } }
		change_personal_deity = soiti
		custom_tooltip = yudunyovi_soiti_effects_tt
		set_country_flag = yudunyovi_deity_switch_cooldown
	}
	
	option = {
		name = yudunyovi.100.d
		trigger = { 
			unlocked_yudunyovi_deity = { deity = yukel } 
			NOT = { has_country_flag = yudunyovi_kalyin_upgrade_flag }
		}
		change_personal_deity = yukel
		custom_tooltip = yudunyovi_yukel_effects_tt
		set_country_flag = yudunyovi_deity_switch_cooldown
	}
	
	option = {
		name = yudunyovi.100.e
		trigger = { unlocked_yudunyovi_deity = { deity = kalyin } }
		change_personal_deity = kalyin
		custom_tooltip = yudunyovi_kalyin_effects_tt
		set_country_flag = yudunyovi_deity_switch_cooldown
	}
	
	option = {
		name = yudunyovi.100.f
		trigger = { unlocked_yudunyovi_deity = { deity = shirdos } }
		change_personal_deity = shirdos
		custom_tooltip = yudunyovi_shirdos_effects_tt
		set_country_flag = yudunyovi_deity_switch_cooldown
	}
	
	option = {
		name = yudunyovi.100.g
		trigger = { unlocked_yudunyovi_deity = { deity = yerush } }
		change_personal_deity = yerush
		custom_tooltip = yudunyovi_yerush_effects_tt
		set_country_flag = yudunyovi_deity_switch_cooldown
	}
	
	option = {
		name = yudunyovi.100.h
		trigger = { unlocked_yudunyovi_deity = { deity = ekchorvu } }
		change_personal_deity = ekchorvu
		custom_tooltip = yudunyovi_ekchorvu_effects_tt
		set_country_flag = yudunyovi_deity_switch_cooldown
	}
	
	option = {
		name = yudunyovi.100.i
		trigger = { unlocked_yudunyovi_deity = { deity = tayoghur } }
		change_personal_deity = tayoghur
		custom_tooltip = yudunyovi_tayoghur_effects_tt
		set_country_flag = yudunyovi_deity_switch_cooldown
	}
	
	option = {
		name = yudunyovi.100.j
		trigger = { unlocked_yudunyovi_deity = { deity = asimlik } }
		change_personal_deity = asimlik
		custom_tooltip = yudunyovi_asimlik_effects_tt
		set_country_flag = yudunyovi_deity_switch_cooldown
	}
}