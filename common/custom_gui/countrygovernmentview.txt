custom_button = {
    name = racial_pop_menu
    potential = {
		always = yes
	}
	trigger = {
		if = {
			limit = {
				NOT = { has_country_flag = setup_for_races_flag }
			}
			custom_trigger_tooltip = {
				tooltip = pop_system_initialised_tt
				has_country_flag = setup_for_races_flag
			}
		}
	}
	effect = {
		custom_tooltip = racial_tolerance_trigger_tt
		hidden_effect = {
			set_country_flag = racial_root_menu_opened
			set_country_flag = racial_pop_menu_opened
			clr_country_flag = racial_military_menu_opened
			racial_pop_initialise_effect = yes
			# # Open the top option
			if = { limit = { racial_pop_has_any_race_menu_open = no }
				racial_list_interface_button_click = { order = 1 }
			}
			else = { racial_pop_interface_update_main = yes }
		}
	}
	tooltip = pop_menu_access_tt
}
custom_button = {
    name = racial_mil_menu
    potential = {
		always = yes
	}
	trigger = {
		if = {
			limit = {
				NOT = { has_country_flag = setup_for_races_flag }
			}
			custom_trigger_tooltip = {
				tooltip = pop_system_initialised_tt
				has_country_flag = setup_for_races_flag
			}
		}
	}
	effect = {
		hidden_effect = {
			set_country_flag = racial_root_menu_opened
			set_country_flag = racial_military_menu_opened
			clr_country_flag = racial_pop_menu_opened

			racial_pop_initialise_effect = yes
			# # Open the top option
			if = { limit = { racial_pop_has_any_race_menu_open = no }
				racial_list_interface_button_click = { order = 1 }
			}
			else = { racial_pop_interface_update_main = yes }
		}
	}
	tooltip = mil_menu_access_tt
}

custom_icon = {
    name = racial_adm_icon
    frame = {
		number = 1
		trigger = { has_country_modifier = centaur_administration }
	}
	frame = {
		number = 2
		trigger = { has_country_modifier = dwarven_administration }
	}
	frame = {
		number = 3
		trigger = { has_country_modifier = elven_administration }
	}
	frame = {
		number = 4
		trigger = { has_country_modifier = gnollish_administration }
	}
	frame = {
		number = 5
		trigger = { has_country_modifier = gnomish_administration }
	}
	frame = {
		number = 6
		trigger = { has_country_modifier = goblin_administration }
	}
	frame = {
		number = 7
		trigger = { has_country_modifier = halfling_administration }
	}
	frame = {
		number = 8
		trigger = { has_country_modifier = harimari_administration }
	}
	frame = {
		number = 9
		trigger = { has_country_modifier = harpy_administration }
	}
	frame = {
		number = 10
		trigger = { has_country_modifier = hobgoblin_administration }
	}
	frame = {
		number = 11
		trigger = { has_country_modifier = half_orcish_administration }
	}
	frame = {
		number = 12
		trigger = { has_country_modifier = human_administration }
	}
	frame = {
		number = 13
		trigger = { has_country_modifier = kobold_administration }
	}
	frame = {
		number = 14
		trigger = { has_country_modifier = lizardfolk_administration }
	}
	frame = {
		number = 15
		trigger = { has_country_modifier = ogre_administration }
	}
	frame = {
		number = 16
		trigger = { has_country_modifier = orcish_administration }
	}
	frame = {
		number = 17
		trigger = { has_country_modifier = ruinborn_administration }
	}
	frame = {
		number = 18
		trigger = { has_country_modifier = troll_administration }
	}
	frame = {
		number = 19
		trigger = { has_country_modifier = mechanim_administration }
	}
	frame = {
		number = 20
		trigger = { has_country_modifier = half_elven_administration }
	}
	tooltip = racial_adm_icon_tt
}
custom_icon = {
    name = racial_mil_icon
    frame = {
		number = 1
		trigger = { has_country_modifier = centaur_military }
	}
	frame = {
		number = 2
		trigger = { has_country_modifier = dwarven_military }
	}
	frame = {
		number = 3
		trigger = { has_country_modifier = elven_military }
	}
	frame = {
		number = 4
		trigger = { has_country_modifier = gnollish_military }
	}
	frame = {
		number = 5
		trigger = { has_country_modifier = gnomish_military }
	}
	frame = {
		number = 6
		trigger = { has_country_modifier = goblin_military }
	}
	frame = {
		number = 7
		trigger = { has_country_modifier = halfling_military }
	}
	frame = {
		number = 8
		trigger = { has_country_modifier = harimari_military }
	}
	frame = {
		number = 9
		trigger = { has_country_modifier = harpy_military }
	}
	frame = {
		number = 10
		trigger = { has_country_modifier = hobgoblin_military }
	}
	frame = {
		number = 11
		trigger = { has_country_modifier = half_orcish_military }
	}
	frame = {
		number = 12
		trigger = { has_country_modifier = human_military }
	}
	frame = {
		number = 13
		trigger = { has_country_modifier = kobold_military }
	}
	frame = {
		number = 14
		trigger = { has_country_modifier = lizardfolk_military }
	}
	frame = {
		number = 15
		trigger = { has_country_modifier = ogre_military }
	}
	frame = {
		number = 16
		trigger = { has_country_modifier = orcish_military }
	}
	frame = {
		number = 17
		trigger = { has_country_modifier = ruinborn_military }
	}
	frame = {
		number = 18
		trigger = { has_country_modifier = troll_military }
	}
	frame = {
		number = 19
		trigger = { has_country_modifier = spirit_military }
	}
	frame = {
		number = 20
		trigger = { has_country_modifier = undead_military }
	}
	frame = {
		number = 21
		trigger = { has_country_modifier = mechanim_military }
	}
	frame = {
		number = 22
		trigger = { has_country_modifier = half_elven_military }
	}
	tooltip = racial_mil_icon_tt
}

custom_icon = {
    name = government_mechanics_bg
    potential = {
        ai = no
        OR = {
            has_government_mechanic = anb_adventurer_unity
            has_government_mechanic = allclan_pandemonium_mechanic
            has_government_mechanic = desert_legion_mechanic
            has_government_mechanic = harpylen_queendom_claim_mechanic
            has_government_mechanic = anb_huszien_council
            has_government_mechanic = anb_medasi_power_share
            has_government_mechanic = magnate_mechanic
            has_government_mechanic = phoenix_estate_mechanic
            has_government_mechanic = vacyntassi_temple_authority
            has_government_mechanic = karakhanbar_flames_of_the_black_hearth_mechanic
            has_government_mechanic = gronstunad_authority_mechanic
            has_government_mechanic = konolkhatep_mechanic
            has_government_mechanic = khugra_araizary_affinity_mechanic
            has_government_mechanic = corinsfield_paranoia_mechanic
            has_government_mechanic = floodborn_council_mechanic
            has_government_mechanic = vacyntassi_temple_authority
            has_government_mechanic = sri_baginda_mechanic
            has_government_mechanic = tribal_federation_mechanic
            has_government_mechanic = cossacks_mechanic
            has_government_mechanic = hessian_militarization_mechanic
            has_government_mechanic = rezankand_exemplar_mechanic
			has_government_mechanic = vic_league_mechanic
        }
    }
}

# Raj
custom_window = {
	name = raj_window_screen
	potential = {
		OR = {
			has_government_attribute = is_raja
			has_government_attribute = is_raja_subject
		}
	}
}
custom_text_box = {
	name = raj_text_banner
	potential = { always = yes }
}

custom_text_box = {
	name = raj_text_cohesion
	potential = {
		always = yes
	}
	tooltip = estate_raj_ministries_raj_cohesion_desc
}

custom_text_box = {
	name = raj_text_vizier_mandates
	potential = {
		always = yes
	}
}

custom_shield = {
	name = "raj_shield_vizier"
	potential = {
		has_saved_global_event_target = raj_vizier_global_target
	}
	trigger = {} #Determines when the shield is clickable
	effect = { } #Effect for clicking
	global_event_target = raj_vizier_global_target
	open_country = yes
}

custom_text_box = {
	name = raj_text_raja_mandates
	potential = {
		always = yes
	}
}

custom_shield = {
	name = "raj_shield_raja"
	potential = {
		always = yes
	}
	trigger = {} #Determines when the shield is clickable
	effect = { } #Effect for clicking
	global_event_target = raj_raja_global_target
	open_country = yes
}

custom_button = {
    name = raj_mandate_vizier_logistical_focus
    potential = {
		always = yes
	}
	trigger = {
		custom_trigger_tooltip = {
			tooltip = raj_mandate_vizier_req			
			is_subject_of_type = vizier_vassal
		}
		adm_power = 100
	}
	effect = {
		add_adm_power = -100
		rahen_raj_mandate_vizier_logistical_focus = yes
	}
	tooltip = raj_mandate_vizier_logistical_focus_tt
}
custom_icon = {
	name = raj_mandate_vizier_logistical_focus_active
	potential = { event_target:raj_raja_global_target = { has_country_modifier = rahen_raj_mandate_vizier_3_raja_mod } }
	tooltip = raj_mandate_active
}
custom_button = {
    name = raj_mandate_vizier_prabhi_recruitment
    potential = {
		always = yes
	}
	trigger = {
		custom_trigger_tooltip = {
			tooltip = raj_mandate_vizier_req			
			is_subject_of_type = vizier_vassal
		}
		dip_power = 100
	}
	effect = {
		add_dip_power = -100
		rahen_raj_mandate_vizier_prabhi_recruitment = yes
	}
	tooltip = raj_mandate_vizier_prabhi_recruitment_tt
}
custom_icon = {
	name = raj_mandate_vizier_prabhi_recruitment_active
	potential = { event_target:raj_raja_global_target = { has_country_modifier = rahen_raj_mandate_vizier_1_raja_mod } }
	tooltip = raj_mandate_active
}
custom_button = {
	name = raj_mandate_vizier_imperial_drills
	potential = {
		always = yes
	}
	trigger = {
		custom_trigger_tooltip = {
			tooltip = raj_mandate_vizier_req			
			is_subject_of_type = vizier_vassal
		}
		mil_power = 100
	}
	effect = {
		add_mil_power = -100
		rahen_raj_mandate_vizier_imperial_drills = yes
	}
	tooltip = raj_mandate_vizier_imperial_drills_tt
}
custom_icon = {
	name = raj_mandate_vizier_imperial_drills_active
	potential = { event_target:raj_raja_global_target = { has_country_modifier = rahen_raj_mandate_vizier_2_raja_mod } }
	tooltip = raj_mandate_active
}
custom_button = {
    name = raj_mandate_raja_imperial_tribute
    potential = {
		always = yes
	}
	trigger = {
		custom_trigger_tooltip = {
			tooltip = raj_mandate_raja_req
			is_the_raja = yes
		}
		adm_power = 100
	}	
	effect = {
		add_adm_power = -100
		rahen_raj_mandate_raja_imperial_tribute = yes
	}
	tooltip = raj_mandate_raja_imperial_tribute_tt
}
custom_icon = {
	name = raj_mandate_raja_imperial_tribute_active
	potential = { event_target:raj_raja_global_target = { has_country_modifier = rahen_raj_mandate_raja_2_raja_mod } }
	tooltip = raj_mandate_active
}
custom_button = {
    name = raj_mandate_raja_declaration_of_harmony
    potential = {
		always = yes
	}
	trigger = {
		custom_trigger_tooltip = {
			tooltip = raj_mandate_raja_req
			is_the_raja = yes
		}
		dip_power = 100
	}
	effect = {
		add_dip_power = -100
		rahen_raj_mandate_raja_declaration_of_harmony = yes
	}
	tooltip = raj_mandate_raja_declaration_of_harmony_tt
}
custom_icon = {
	name = raj_mandate_raja_declaration_of_harmony_active
	potential = { event_target:raj_raja_global_target = { has_country_modifier = rahen_raj_mandate_raja_3_raja_mod } }
	tooltip = raj_mandate_active
}
custom_button = {
    name = raj_mandate_raja_land_redistribution
    potential = {
		always = yes
	}
	trigger = {
		always = no		#remove when effect gets made
		custom_trigger_tooltip = {
			tooltip = raj_mandate_raja_req
			is_the_raja = yes
		}
		mil_power = 100
	}
	effect = {
		add_mil_power = -100
		rahen_raj_mandate_raja_land_redistribution = yes
	}
	tooltip = raj_mandate_raja_land_redistribution_tt	#change tt when effect gets made
}
# custom_icon = {	#uncomment in gui file as well when made
# 	name = raj_mandate_raja_land_redistribution_active
# 	potential = { event_target:raj_raja_global_target = { has_country_modifier = rahen_raj_mandate_raja_4_raja_mod } }
# 	tooltip = raj_mandate_active
# }
custom_text_box = {
	name = raj_vizier_influence_title
	potential = { always = yes }
}

custom_button = {
	name = raj_vizier_influence_L_bar
	frame_variable = raj_vizier_influence_frame_var
}

custom_button = {
	name = raj_vizier_influence_R_bar
	frame_variable = raj_vizier_influence_frame_var
}

custom_text_box = {
	name = raj_var_vizier_influence_number
	potential = {
		always = yes
	}
	tooltip = raj_var_vizier_influence_number_tt
}

custom_icon = {
    name = raj_text_privileges_internal_diplomacy_yes_no
	potential = { always = yes }
	frame = {
		number = 2
		trigger = { always = yes }
	}
}
custom_icon = {
    name = raj_text_privileges_external_diplomacy_yes_no
	potential = { always = yes }
    frame = {
		number = 1
		trigger = { is_subject_of_type = daimyo_vassal }
	}
	frame = {
		number = 2
		trigger = { NOT = { is_subject_of_type = daimyo_vassal } }
	}
}
custom_icon = {
    name = raj_text_privileges_raja_wars_yes_no
	potential = { always = yes }
    frame = {
		number = 1
		trigger = { is_subject_of_type = daimyo_vassal }
	}
	frame = {
		number = 2
		trigger = { NOT = { is_subject_of_type = daimyo_vassal } }
	}
}
custom_icon = {
    name = raj_text_privileges_mandates_yes_no
	potential = { always = yes }
    frame = {
		number = 1
		trigger = { NOT = { OR = { is_subject_of_type = vizier_vassal is_the_raja = yes  } } }
	}
	frame = {
		number = 2
		trigger = { OR = { is_subject_of_type = vizier_vassal is_the_raja = yes } }
	}
}
custom_icon = {
    name = raj_text_privileges_cohesion_yes_no
	potential = { always = yes }
    frame = {
		number = 1
		trigger = { NOT = { is_the_raja = yes } }
	}
	frame = {
		number = 2
		trigger = { is_the_raja = yes }
	}
}

custom_window = {
	name = raj_sw_window_subjects
	potential = {
		NOT = { has_government_attribute = is_raja }
	}
}
custom_button = {
    name = raj_objective_issue_challenge
    potential = {
		always = yes
	}
	trigger = {
		if = { limit = { is_subject_of_type = daimyo_vassal }
			if = {
				limit = { NOT = { owns_ruby_gardens = { tier = 3 } } }
				calc_true_if = {
					amount = 3
					custom_trigger_tooltip = {
						tooltip = raj_objective_p1_tt
						OR = { AND = { rahen_raj_promotion_prabhi_subtrigger_1 = yes } }	#calc_true_if doesn't always count 1 or 0 per trigger for true/false
					}																		#e.g. if you're checking a variable calc_true_if will count the value in the variable, use OR to force 1 or 0
					custom_trigger_tooltip = {
						tooltip = raj_objective_p2_tt
						OR = { AND = { rahen_raj_promotion_prabhi_subtrigger_2 = yes } }
					}
					custom_trigger_tooltip = {
						tooltip = raj_objective_p3_tt
						OR = { AND = { rahen_raj_promotion_prabhi_subtrigger_3 = yes } }
					}
					custom_trigger_tooltip = {
						tooltip = raj_objective_p4_tt
						OR = { AND = { rahen_raj_promotion_prabhi_subtrigger_4 = yes } }
					}

					custom_trigger_tooltip = { tooltip = raj_bonus_objectives_tt always = no }
					custom_trigger_tooltip = {
						tooltip = owns_ruby_gardens
						OR = { AND = { owns_ruby_gardens = { tier = 2 } } }
					}
				}
			}
			else = {
				custom_trigger_tooltip = {
					tooltip = owns_ruby_gardens
					always = yes
				}
			}
		}
		else_if = { limit = { is_subject_of_type = great_daimyo_vassal }
			is_at_war = no
			if = {
				limit = { NOT = { owns_ruby_gardens = { tier = 3 } } }
				calc_true_if = {
					amount = 3
					custom_trigger_tooltip = {
						tooltip = raj_objective_s1_tt
						OR = { AND = { rahen_raj_promotion_senapti_subtrigger_1 = yes } }
					}
					custom_trigger_tooltip = {
						tooltip = raj_objective_s2_tt
						OR = { AND = { rahen_raj_promotion_senapti_subtrigger_2 = yes } }
					}
					custom_trigger_tooltip = {
						tooltip = raj_objective_s3_tt
						OR = { AND = { rahen_raj_promotion_senapti_subtrigger_3 = yes } }
					}
					custom_trigger_tooltip = {
						tooltip = raj_objective_s4_tt
						OR = { AND = { rahen_raj_promotion_senapti_subtrigger_4 = yes } }
					}

					custom_trigger_tooltip = { tooltip = raj_bonus_objectives_tt always = no }
					custom_trigger_tooltip = {
						tooltip = owns_ruby_gardens
						OR = { AND = { owns_ruby_gardens = { tier = 2 } } }
					}
				}
			}
			else = {
				custom_trigger_tooltip = {
					tooltip = owns_ruby_gardens
					always = yes
				}
			}
		}
		else_if = { limit = { is_subject_of_type = vizier_vassal }
			is_at_war = no
			if = {
				limit = { NOT = { owns_ruby_gardens = { tier = 3 } } }
				calc_true_if = {
					amount = 3
					custom_trigger_tooltip = {
						tooltip = raj_objective_v1_tt
						OR = { AND = { rahen_raj_promotion_vizier_subtrigger_1 = yes } }
					}
					custom_trigger_tooltip = {
						tooltip = raj_objective_v2_tt
						OR = { AND = { rahen_raj_promotion_vizier_subtrigger_2 = yes } }
					}
					custom_trigger_tooltip = {
						tooltip = raj_objective_v3_tt
						OR = { AND = { rahen_raj_promotion_vizier_subtrigger_3 = yes } }
					}
					custom_trigger_tooltip = {
						tooltip = raj_objective_v4_tt
						OR = { AND = { rahen_raj_promotion_vizier_subtrigger_4 = yes } }
					}

					custom_trigger_tooltip = { tooltip = raj_bonus_objectives_tt always = no }
					custom_trigger_tooltip = {
						tooltip = owns_ruby_gardens
						OR = { AND = { owns_ruby_gardens = { tier = 2 } } }
					}
				}
			}
			else = {
				custom_trigger_tooltip = {
					tooltip = owns_ruby_gardens
					always = yes
				}
			}
			custom_trigger_tooltip = {
				tooltip = raja_smacked_vizier_recently_tt
				NOT = { has_country_modifier = vizier_lost_promotion_mod }
			}
		}
	}
	effect = { 
		if = { limit = { is_subject_of_type = daimyo_vassal }
			overlord = {
				every_subject_country = { limit = { is_subject_of_type = great_daimyo_vassal }
					reverse_add_casus_belli = { type = cb_raj_promotion_senapti target = ROOT months = 60 }
				}
			}
			if = {
				limit = {
					OR = {
						rahen_raj_promotion_prabhi_subtrigger_1 = no
						rahen_raj_promotion_prabhi_subtrigger_2 = no
						rahen_raj_promotion_prabhi_subtrigger_3 = no
						rahen_raj_promotion_prabhi_subtrigger_4 = no
					}
					NOT = { owns_ruby_gardens = { tier = 2 } }
				}
				custom_tooltip = raj_3_objective_ttoltip
				add_legitimacy = -10
				add_dip_power = -100
			}
		}
		else_if = { limit = { is_subject_of_type = great_daimyo_vassal }
			event_target:raj_vizier_global_target = {
				ROOT = {
					declare_war_with_cb = {
						casus_belli = cb_raj_promotion_vizier
						who = PREV
					}
				}
			}
			custom_tooltip = senaptis_to_war_tt
			if = {
				limit = {
					OR = {
						rahen_raj_promotion_senapti_subtrigger_1 = no
						rahen_raj_promotion_senapti_subtrigger_2 = no
						rahen_raj_promotion_senapti_subtrigger_3 = no
						rahen_raj_promotion_senapti_subtrigger_4 = no
					}
					NOT = { owns_ruby_gardens = { tier = 2 } }
				}
				custom_tooltip = raj_3_objective_ttoltip
				add_legitimacy = -10
				add_dip_power = -100
			}
			hidden_effect = {
				every_ally = {
					limit = {
						is_subject_of_type = great_daimyo_vassal
						trust = {
							who = ROOT
							value = 65
						}
					}
					join_all_offensive_wars_of = ROOT
				}
				event_target:raj_vizier_global_target = {
					every_known_country = {
						limit = {
							is_subject_of_type = great_daimyo_vassal
							NOT = { war_with = PREV }
						}
						join_all_defensive_wars_of = PREV
					}
				}
			}
		}
		else_if = { limit = { is_subject_of_type = vizier_vassal }
			set_country_flag = has_vizier_won
			set_country_flag = revolting_vizier
			declare_war_with_cb = {
				casus_belli = cb_raj_promotion_raja
				who = overlord
			}
			custom_tooltip = vizier_out_of_time_tt
			custom_tooltip = senaptis_to_war_tt
			hidden_effect = {
				every_ally = {
					limit = {
						is_subject_of_type = great_daimyo_vassal
						trust = {
							who = ROOT
							value = 65
						}
					}
					join_all_offensive_wars_of = ROOT
					set_country_flag = has_vizier_won
					add_stability = 3
					add_war_exhaustion = -3
				}
				country_event = {
					id = rahenraj.5002
					days = 1825
				}
				4411 = { set_province_flag = raja_new_castle }
			}
			if = {
				limit = {
					OR = {
						rahen_raj_promotion_vizier_subtrigger_1 = no
						rahen_raj_promotion_vizier_subtrigger_2 = no
						rahen_raj_promotion_vizier_subtrigger_3 = no
						rahen_raj_promotion_vizier_subtrigger_4 = no
					}
					NOT = { owns_ruby_gardens = { tier = 2 } }
				}
				custom_tooltip = raj_3_objective_ttoltip
				add_legitimacy = -10
				add_dip_power = -100
			}
		}
	}
	tooltip = raj_objective_tooltip
}
custom_text_box = {
    name = raj_issue_challenge
    potential = {
		always = yes
	}
}
# Prabhi objectives
custom_window = {
	name = raj_window_objective_prabhi
	potential = {
		is_subject_of_type = daimyo_vassal
	}
}
custom_button = {
    name = raj_objective_prabhi_1
    potential = {
		always = yes
	}
	trigger = {
		rahen_raj_promotion_prabhi_subtrigger_1 = yes
	}
	effect = { }
	tooltip = raj_objective_p1_tt
}
custom_button = {
    name = raj_objective_prabhi_2
    potential = {
		always = yes
	}
	trigger = {
		rahen_raj_promotion_prabhi_subtrigger_2 = yes
	}
	effect = { }
	tooltip = raj_objective_p2_tt
}
custom_button = {
    name = raj_objective_prabhi_3
    potential = {
		always = yes
	}
	trigger = {
		rahen_raj_promotion_prabhi_subtrigger_3 = yes
	}
	effect = { }
	tooltip = raj_objective_p3_tt
}
custom_button = {
    name = raj_objective_prabhi_4
    potential = {
		always = yes
	}
	trigger = {
		rahen_raj_promotion_prabhi_subtrigger_4 = yes
	}
	effect = { }
	tooltip = raj_objective_p4_tt
}
# Senapti objectives
custom_window = {
	name = raj_window_objective_senapti
	potential = {
		is_subject_of_type = great_daimyo_vassal
	}
}
custom_button = {
    name = raj_objective_senapti_1
    potential = {
		always = yes
	}
	trigger = {
		rahen_raj_promotion_senapti_subtrigger_1 = yes
	}
	effect = { }
	tooltip = raj_objective_s1_tt
}
custom_button = {
    name = raj_objective_senapti_2
    potential = {
		always = yes
	}
	trigger = {
		rahen_raj_promotion_senapti_subtrigger_2 = yes
	}
	effect = { }
	tooltip = raj_objective_s2_tt
}
custom_button = {
    name = raj_objective_senapti_3
    potential = {
		always = yes
	}
	trigger = {
		rahen_raj_promotion_senapti_subtrigger_3 = yes
	}
	effect = { }
	tooltip = raj_objective_s3_tt
}
custom_button = {
    name = raj_objective_senapti_4
    potential = {
		always = yes
	}
	trigger = {
		rahen_raj_promotion_senapti_subtrigger_4 = yes
	}
	effect = { }
	tooltip = raj_objective_s4_tt
}
# vizier objectives
custom_window = {
	name = raj_window_objective_vizier
	potential = {
		is_subject_of_type = vizier_vassal
	}
}
custom_button = {
    name = raj_objective_vizier_1
    potential = {
		always = yes
	}
	trigger = {
		rahen_raj_promotion_vizier_subtrigger_1 = yes
	}
	effect = { }
	tooltip = raj_objective_v1_tt
}
custom_button = {
    name = raj_objective_vizier_2
    potential = {
		always = yes
	}
	trigger = {
		rahen_raj_promotion_vizier_subtrigger_2 = yes
	}
	effect = { }
	tooltip = raj_objective_v2_tt
}
custom_button = {
    name = raj_objective_vizier_3
    potential = {
		always = yes
	}
	trigger = {
		rahen_raj_promotion_vizier_subtrigger_3 = yes
	}
	effect = { }
	tooltip = raj_objective_v3_tt
}
custom_button = {
    name = raj_objective_vizier_4
    potential = {
		always = yes
	}
	trigger = {
		rahen_raj_promotion_vizier_subtrigger_4 = yes
	}
	effect = { }
	tooltip = raj_objective_v4_tt
}
custom_shield = {
	name = "raj_shield"
	potential = {
		has_government_attribute = is_raja
	}
	trigger = {} #Determines when the shield is clickable
	effect = { } #Effect for clicking
	global_event_target = raj_raja_global_target
	open_country = no
}

# Yezel Mora Misery

custom_icon = {
    name = yezel_mora_misery_bg_t1
    potential = {
		tag = S70
    	has_government_mechanic = yezel_mora_misery_mechanic_t1
    }
}
custom_window = {
	name = yezel_mora_misery_window_t1
	potential = {
		tag = S70
    	has_government_mechanic = yezel_mora_misery_mechanic_t1
	}
}

custom_icon = {
    name = yezel_mora_misery_bg_t2
    potential = {
		tag = S70
    	has_government_mechanic = yezel_mora_misery_mechanic_t2
    }
}
custom_window = {
	name = yezel_mora_misery_window_t2
	potential = {
		tag = S70
    	has_government_mechanic = yezel_mora_misery_mechanic_t2
	}
}

custom_icon = {
    name = yezel_mora_misery_bg_t3
    potential = {
		tag = S70
    	has_government_mechanic = yezel_mora_misery_mechanic_t3
    }
}

custom_window = {
	name = yezel_mora_misery_window_t3
	potential = {
		tag = S70
    	has_government_mechanic = yezel_mora_misery_mechanic_t3
	}
}

custom_icon = {
    name = yezel_mora_misery_alignment_icon
    potential = {
		tag = S70
		OR = {
			has_government_mechanic = yezel_mora_misery_mechanic_t1
			has_government_mechanic = yezel_mora_misery_mechanic_t2
			has_government_mechanic = yezel_mora_misery_mechanic_t3
		}
    }
	frame_variable = yezel_mora_misery_alignment_icon_frame_var
}

#These are custom buttons simply so I could get them to fit where they needed to show
custom_button = {
    name = yezel_mora_misery_riftwhisper_t1
	tooltip = riftwhisper_t1
    potential = { always = yes } #Handled by the parent window
	trigger = {
		has_government_power = {
			mechanic_type = yezel_mora_misery_mechanic_t1
			power_type = yezel_mora_misery_power_t1
			value = 5
		}
		NOT = {
			#I don't need a separte cooldown modifier since the effect lasts
			#as long as the cooldown
			has_country_modifier = yezel_mora_misery_riftwhisper_mod_t1
		}
	}
	effect = {
		custom_tooltip = riftwhisper_tooltip
		add_government_power = {
			mechanic_type = yezel_mora_misery_mechanic_t1
			power_type = yezel_mora_misery_power_t1
			value = -5
		}
		add_country_modifier = {
			name = yezel_mora_misery_riftwhisper_mod_t1
			duration = 1825 #5 years
		}
	}
}

custom_button = {
    name = yezel_mora_misery_smoketusk_t1
	tooltip = smoketusk_t1
    potential = { always = yes } #Handled by the parent window
	trigger = {
		has_government_power = {
			mechanic_type = yezel_mora_misery_mechanic_t1
			power_type = yezel_mora_misery_power_t1
			value = 5
		}
		custom_trigger_tooltip = {
			tooltip = yezel_mora_misery_button_cooldown_tt
			NOT = {
				has_country_modifier = yezel_mora_misery_smoketusk_cooldown
			}
		}
	}
	effect = {
		custom_tooltip = smoketusk_tooltip
		add_government_power = {
			mechanic_type = yezel_mora_misery_mechanic_t1
			power_type = yezel_mora_misery_power_t1
			value = -5
		}
		add_rebel_progress = {
			value = -20
		}
		hidden_effect = {
			add_country_modifier = {
				name = yezel_mora_misery_smoketusk_cooldown
				duration = 1825 #5 years
				hidden = yes
			}
		}
	}
}

custom_button = {
    name = yezel_mora_misery_gloomweaver_t1
	tooltip = gloomweaver_t1
    potential = { always = yes } #Handled by the parent window
	trigger = {
		has_government_power = {
			mechanic_type = yezel_mora_misery_mechanic_t1
			power_type = yezel_mora_misery_power_t1
			value = 10
		}
		custom_trigger_tooltip = {
			tooltip = yezel_mora_misery_button_cooldown_tt
			NOT = {
				has_country_modifier = yezel_mora_misery_gloomweaver_cooldown
			}
		}
	}
	effect = {
		custom_tooltip = gloomweaver_tooltip
		add_government_power = {
			mechanic_type = yezel_mora_misery_mechanic_t1
			power_type = yezel_mora_misery_power_t1
			value = -10
		}
		change_mana = { amount = 50 }
		hidden_effect = {
			add_country_modifier = {
				name = yezel_mora_misery_gloomweaver_cooldown
				duration = 1825 #5 years
				hidden = yes
			}
		}
	}
}

custom_button = {
    name = yezel_mora_misery_riftwhisper_t2
	tooltip = riftwhisper_t2
    potential = { always = yes } #Handled by the parent window
	trigger = {
		has_government_power = {
			mechanic_type = yezel_mora_misery_mechanic_t2
			power_type = yezel_mora_misery_power_t2
			value = 15
		}
		NOT = {
			#I don't need a separte cooldown modifier since the effect lasts
			#as long as the cooldown
			has_country_modifier = yezel_mora_misery_riftwhisper_mod_t2
		}
	}
	effect = {
		custom_tooltip = riftwhisper_tooltip
		add_government_power = {
			mechanic_type = yezel_mora_misery_mechanic_t2
			power_type = yezel_mora_misery_power_t2
			value = -15
		}
		add_country_modifier = {
			name = yezel_mora_misery_riftwhisper_mod_t2
			duration = 1825 #5 years
		}
	}
}

custom_button = {
    name = yezel_mora_misery_smoketusk_t2
	tooltip = smoketusk_t2
    potential = { always = yes } #Handled by the parent window
	trigger = {
		has_government_power = {
			mechanic_type = yezel_mora_misery_mechanic_t2
			power_type = yezel_mora_misery_power_t2
			value = 15
		}
		custom_trigger_tooltip = {
			tooltip = yezel_mora_misery_button_cooldown_tt
			NOT = {
				has_country_modifier = yezel_mora_misery_smoketusk_cooldown
			}
		}
	}
	effect = {
		custom_tooltip = smoketusk_tooltip
		add_government_power = {
			mechanic_type = yezel_mora_misery_mechanic_t2
			power_type = yezel_mora_misery_power_t2
			value = -15
		}
		add_rebel_progress = {
			value = -30
		}
		add_country_modifier = {
			name = yezel_mora_misery_smoketusk_mod_t2
			duration = 7300 #20 years
		}
		hidden_effect = {
			add_country_modifier = {
				name = yezel_mora_misery_smoketusk_cooldown
				duration = 1825 #5 years
				hidden = yes
			}
		}
	}
}

custom_button = {
    name = yezel_mora_misery_gloomweaver_t2
	tooltip = gloomweaver_t2
    potential = { always = yes } #Handled by the parent window
	trigger = {
		has_government_power = {
			mechanic_type = yezel_mora_misery_mechanic_t2
			power_type = yezel_mora_misery_power_t2
			value = 30
		}
		custom_trigger_tooltip = {
			tooltip = yezel_mora_misery_button_cooldown_tt
			NOT = {
				has_country_modifier = yezel_mora_misery_gloomweaver_cooldown
			}
		}
	}
	effect = {
		custom_tooltip = gloomweaver_tooltip
		add_government_power = {
			mechanic_type = yezel_mora_misery_mechanic_t2
			power_type = yezel_mora_misery_power_t2
			value = -30
		}
		change_mana = { amount = 100 }
		hidden_effect = {
			add_country_modifier = {
				name = yezel_mora_misery_gloomweaver_cooldown
				duration = 1825 #5 years
				hidden = yes
			}
		}
	}
}
custom_button = {
    name = yezel_mora_misery_riftwhisper_t3
	tooltip = riftwhisper_t3
    potential = { always = yes } #Handled by the parent window
	trigger = {
		has_government_power = {
			mechanic_type = yezel_mora_misery_mechanic_t3
			power_type = yezel_mora_misery_power_t3
			value = 45
		}
		NOT = {
			#I don't need a separte cooldown modifier since the effect lasts
			#as long as the cooldown
			has_country_modifier = yezel_mora_misery_riftwhisper_mod_t3
		}
	}
	effect = {
		custom_tooltip = riftwhisper_tooltip
		add_government_power = {
			mechanic_type = yezel_mora_misery_mechanic_t3
			power_type = yezel_mora_misery_power_t3
			value = -45
		}
		add_country_modifier = {
			name = yezel_mora_misery_riftwhisper_mod_t3
			duration = 1825 #5 years
		}
	}
}

custom_button = {
    name = yezel_mora_misery_smoketusk_t3
	tooltip = smoketusk_t3
    potential = { always = yes } #Handled by the parent window
	trigger = {
		has_government_power = {
			mechanic_type = yezel_mora_misery_mechanic_t3
			power_type = yezel_mora_misery_power_t3
			value = 45
		}
		custom_trigger_tooltip = {
			tooltip = yezel_mora_misery_button_cooldown_tt
			NOT = {
				has_country_modifier = yezel_mora_misery_smoketusk_cooldown
			}
		}
	}
	effect = {
		custom_tooltip = smoketusk_tooltip
		add_government_power = {
			mechanic_type = yezel_mora_misery_mechanic_t3
			power_type = yezel_mora_misery_power_t3
			value = -45
		}
		add_rebel_progress = {
			value = -40
		}
		# Remove all rebel occupations
		# Note that this will not trigger on_siege_[won/lost]_province - so anything that checks for you sieging land will not trigger

		# I'm making this hidden with a custom tooltip because it's a little
		# confusing if you have no rebel occupied provices, saying someting like
		# "Yezel Mora becomes controller of all provinces"
		hidden_effect = {
			every_owned_province = {
				limit = {
					controller = {
						tag = REB
					}
				}
				change_controller = ROOT
			}
		}
		custom_tooltip = smoketusk_t3_rebel_occupation_tt
		add_country_modifier = {
			name = yezel_mora_misery_smoketusk_mod_t3
			duration = 7300 #20 years
		}
		hidden_effect = {
			add_country_modifier = {
				name = yezel_mora_misery_smoketusk_cooldown
				duration = 1825 #5 years
				hidden = yes
			}
		}
	}
}

custom_button = {
    name = yezel_mora_misery_gloomweaver_t3
	tooltip = gloomweaver_t3
    potential = { always = yes } #Handled by the parent window
	trigger = {
		has_government_power = {
			mechanic_type = yezel_mora_misery_mechanic_t3
			power_type = yezel_mora_misery_power_t3
			value = 90
		}
		custom_trigger_tooltip = {
			tooltip = yezel_mora_misery_button_cooldown_tt
			NOT = {
				has_country_modifier = yezel_mora_misery_gloomweaver_cooldown
			}
		}
	}
	effect = {
		custom_tooltip = gloomweaver_tooltip
		add_government_power = {
			mechanic_type = yezel_mora_misery_mechanic_t3
			power_type = yezel_mora_misery_power_t3
			value = -90
		}
		custom_tooltip = gloomweaver_tooltip_free_cast
		set_country_flag = all_spell_free_next_cast
		hidden_effect = {
			add_country_modifier = {
				name = yezel_mora_misery_gloomweaver_cooldown
				duration = 1825 #5 years
				hidden = yes
			}
		}
	}
}

# Ashhana blood curse
# One window to contain all of the icons (frames and "backgrounds") and images that change
# depending on your claw/canvas strength difference

custom_window = {
	name = ashhana_blood_curse_bg_window
	potential = {
		has_government_mechanic = ashhana_blood_curse_mechanic
	}
}
# Two possible frames around the bar
custom_icon = {
	name = ashhana_blood_curse_bar_frame_default
	potential = {
		NOT = {
			check_variable = {
				which = canvas_minus_claw
				value = 30
			}
		}
	}
}
custom_icon = {
	name = ashhana_blood_curse_bar_frame_canvas_2
	potential = {
		check_variable = {
			which = canvas_minus_claw
			value = 30
		}
	}
}
# Five possible "backgrounds"
custom_icon = {
	name = ashhana_blood_curse_bg_default
	potential = {
		check_variable = {
			which = canvas_minus_claw
			value = -15
		}
		NOT = {
			check_variable = {
				which = canvas_minus_claw
				value = 15
			}
		}
	}
}
custom_icon = {
	name = ashhana_blood_curse_bg_canvas_1
	potential = {
		check_variable = {
			which = canvas_minus_claw
			value = 15
		}
		NOT = {
			check_variable = {
				which = canvas_minus_claw
				value = 30
			}
		}
	}
}
custom_icon = {
	name = ashhana_blood_curse_bg_canvas_2
	potential = {
		check_variable = {
			which = canvas_minus_claw
			value = 30
		}
	}
}
custom_icon = {
	name = ashhana_blood_curse_bg_claw_1
	potential = {
		check_variable = {
			which = canvas_minus_claw
			value = -30
		}
		NOT = {
			check_variable = {
				which = canvas_minus_claw
				value = -15
			}
		}
	}
}
custom_icon = {
	name = ashhana_blood_curse_bg_claw_2
	potential = {
		NOT = {
			check_variable = {
				which = canvas_minus_claw
				value = -30
			}
		}
	}
}

#Umbral Covenant UI
custom_button = { #Open button
	name = umbral_covenant_toggle_button
	tooltip = open_umbral_covenant_ui_tt
	potential = {
		tag = S90
		has_country_flag = S90_shadow_empowerment_system_unlock
		NOT = { has_country_flag = show_umbral_covenant_ui_flag }
	}
	effect = {
		hidden_effect = {
			if = {
				limit = { has_country_flag = show_umbral_covenant_ui_flag }
				clr_country_flag = show_umbral_covenant_ui_flag
			}
			else = {
				set_country_flag = show_umbral_covenant_ui_flag
				if = { #Set to a default on first opening UI
					limit = {
						NOT = {
							has_country_flag = show_uc_spirits_powers_flag
							has_country_flag = show_uc_shadows_powers_flag
							has_country_flag = show_uc_dusk_powers_flag
							has_country_flag = show_uc_soul_powers_flag
							has_country_flag = show_uc_abyss_powers_flag
						}
					}
					view_uc_ui_category_effect = { type = spirits }
				}
			}
			if = {
				limit = { NOT = { check_variable = { which = uc_shadow_essence_usage value = 1 } } }
				set_variable = { which = uc_shadow_essence_usage value = 0 }
			}
			if = {
				limit = { NOT = { check_variable = { which = uc_free_shadow_essence value = 1 } } }
				set_variable = { which = uc_free_shadow_essence value = 0 }
			}
			if = {
				limit = { NOT = { check_variable = { which = uc_shadow_capacity value = 1 } } }
				set_variable = { which = uc_shadow_capacity value = 0 }
			}
			uc_update_ui_effect = yes
		}
	}
}
custom_button = { # Close Button
	name = umbral_covenant_close_button
	effect = {
		hidden_effect = {
			clr_country_flag = show_umbral_covenant_ui_flag
		}
	}
}
custom_window = {
	name = umbral_covenant_window
	potential = {
		tag = S90
		has_country_flag = show_umbral_covenant_ui_flag
	}
}

custom_button = {
	name = umbral_covenant_spirits_button
	tooltip = view_uc_spirits_powers
	effect = {
		hidden_effect = {
			clr_uc_ui_categories_flags = yes
		}
		view_uc_ui_category_effect = { type = spirits }
		uc_update_ui_effect = yes
	}
	frame = { number = 1 }
}
custom_button = {
	name = umbral_covenant_shadows_button
	tooltip = view_uc_shadows_powers
	effect = {
		hidden_effect = {
			clr_uc_ui_categories_flags = yes
		}
		view_uc_ui_category_effect = { type = shadows }
		uc_update_ui_effect = yes
	}
	frame = { number = 2 }
}
custom_button = {
	name = umbral_covenant_dusk_button
	tooltip = view_uc_dusk_powers
	effect = {
		hidden_effect = {
			clr_uc_ui_categories_flags = yes
		}
		view_uc_ui_category_effect = { type = dusk }
		uc_update_ui_effect = yes
	}
	frame = { number = 3 }
}
custom_button = {
	name = umbral_covenant_soul_button
	tooltip = view_uc_soul_powers
	trigger = {
		has_unlocked_soul_powers = yes
	}
	effect = {
		hidden_effect = {
			clr_uc_ui_categories_flags = yes
		}
		view_uc_ui_category_effect = { type = soul }
		uc_update_ui_effect = yes
	}
	frame = { number = 4 }
}
custom_button = {
	name = umbral_covenant_abyss_button
	tooltip = view_uc_abyss_powers
	trigger = {
		has_unlocked_abyss_powers = yes
	}
	effect = {
		hidden_effect = {
			clr_uc_ui_categories_flags = yes
		}
		view_uc_ui_category_effect = { type = abyss }
		uc_update_ui_effect = yes
	}
	frame = { number = 5 }
}
custom_button = {
	name = umbral_covenant_power_1
	tooltip = umbral_covenant_power_1_name_tt
	frame = {
		number = 1
		trigger = { has_country_flag = show_uc_spirits_powers_flag }
	}
	frame = {
		number = 5
		trigger = { has_country_flag = show_uc_shadows_powers_flag }
	}
	frame = {
		number = 9
		trigger = { has_country_flag = show_uc_dusk_powers_flag }
	}
	frame = {
		number = 13
		trigger = { has_country_flag = show_uc_soul_powers_flag }
	}
	frame = {
		number = 17
		trigger = { has_country_flag = show_uc_abyss_powers_flag }
	}
	trigger = {
		if = {
			limit = { has_country_flag = show_uc_spirits_powers_flag }
			can_click_uc_power_of_type_in_slot_trigger = { type = spirits slot = 1 }
		}
		else_if = {
			limit = { has_country_flag = show_uc_shadows_powers_flag }
			can_click_uc_power_of_type_in_slot_trigger = { type = shadows slot = 1 }
		}
		else_if = {
			limit = { has_country_flag = show_uc_dusk_powers_flag }
			can_click_uc_power_of_type_in_slot_trigger = { type = dusk slot = 1 }
		}
		else_if = {
			limit = { has_country_flag = show_uc_soul_powers_flag }
			can_click_uc_power_of_type_in_slot_trigger = { type = soul slot = 1 }
		}
		else_if = {
			limit = { has_country_flag = show_uc_abyss_powers_flag }
			can_click_uc_power_of_type_in_slot_trigger = { type = abyss slot = 1 }
		}
		else = { hidden_trigger = { always = no } }
	}
	effect = {
		if = {
			limit = { has_country_flag = show_uc_spirits_powers_flag }
			click_uc_button_of_type_in_slot_effect = { type = spirits slot = 1 }
		}
		else_if = {
			limit = { has_country_flag = show_uc_shadows_powers_flag }
			click_uc_button_of_type_in_slot_effect = { type = shadows slot = 1 }
		}
		else_if = {
			limit = { has_country_flag = show_uc_dusk_powers_flag }
			click_uc_button_of_type_in_slot_effect = { type = dusk slot = 1 }
		}
		else_if = {
			limit = { has_country_flag = show_uc_soul_powers_flag }
			click_uc_button_of_type_in_slot_effect = { type = soul slot = 1 }
		}
		else_if = {
			limit = { has_country_flag = show_uc_abyss_powers_flag }
			click_uc_button_of_type_in_slot_effect = { type = abyss slot = 1 }
		}
		uc_update_ui_effect = yes
	}
}
custom_button = {
	name = umbral_covenant_power_2
	tooltip = umbral_covenant_power_2_name_tt
	frame = {
		number = 2
		trigger = { has_country_flag = show_uc_spirits_powers_flag }
	}
	frame = {
		number = 6
		trigger = { has_country_flag = show_uc_shadows_powers_flag }
	}
	frame = {
		number = 10
		trigger = { has_country_flag = show_uc_dusk_powers_flag }
	}
	frame = {
		number = 14
		trigger = { has_country_flag = show_uc_soul_powers_flag }
	}
	frame = {
		number = 18
		trigger = { has_country_flag = show_uc_abyss_powers_flag }
	}
	trigger = {
		if = {
			limit = { has_country_flag = show_uc_spirits_powers_flag }
			can_click_uc_power_of_type_in_slot_trigger = { type = spirits slot = 2 }
		}
		else_if = {
			limit = { has_country_flag = show_uc_shadows_powers_flag }
			can_click_uc_power_of_type_in_slot_trigger = { type = shadows slot = 2 }
		}
		else_if = {
			limit = { has_country_flag = show_uc_dusk_powers_flag }
			can_click_uc_power_of_type_in_slot_trigger = { type = dusk slot = 2 }
		}
		else_if = {
			limit = { has_country_flag = show_uc_soul_powers_flag }
			can_click_uc_power_of_type_in_slot_trigger = { type = soul slot = 2 }
		}
		else_if = {
			limit = { has_country_flag = show_uc_abyss_powers_flag }
			can_click_uc_power_of_type_in_slot_trigger = { type = abyss slot = 2 }
		}
		else = { hidden_trigger = { always = no } }
	}
	effect = {
		if = {
			limit = { has_country_flag = show_uc_spirits_powers_flag }
			click_uc_button_of_type_in_slot_effect = { type = spirits slot = 2 }
		}
		else_if = {
			limit = { has_country_flag = show_uc_shadows_powers_flag }
			click_uc_button_of_type_in_slot_effect = { type = shadows slot = 2 }
		}
		else_if = {
			limit = { has_country_flag = show_uc_dusk_powers_flag }
			click_uc_button_of_type_in_slot_effect = { type = dusk slot = 2 }
		}
		else_if = {
			limit = { has_country_flag = show_uc_soul_powers_flag }
			click_uc_button_of_type_in_slot_effect = { type = soul slot = 2 }
		}
		else_if = {
			limit = { has_country_flag = show_uc_abyss_powers_flag }
			click_uc_button_of_type_in_slot_effect = { type = abyss slot = 2 }
		}
		uc_update_ui_effect = yes
	}
}
custom_button = {
	name = umbral_covenant_power_3
	tooltip = umbral_covenant_power_3_name_tt
	frame = {
		number = 3
		trigger = { has_country_flag = show_uc_spirits_powers_flag }
	}
	frame = {
		number = 7
		trigger = { has_country_flag = show_uc_shadows_powers_flag }
	}
	frame = {
		number = 11
		trigger = { has_country_flag = show_uc_dusk_powers_flag }
	}
	frame = {
		number = 15
		trigger = { has_country_flag = show_uc_soul_powers_flag }
	}
	frame = {
		number = 19
		trigger = { has_country_flag = show_uc_abyss_powers_flag }
	}
	trigger = {
		if = {
			limit = { has_country_flag = show_uc_spirits_powers_flag }
			can_click_uc_power_of_type_in_slot_trigger = { type = spirits slot = 3 }
		}
		else_if = {
			limit = { has_country_flag = show_uc_shadows_powers_flag }
			can_click_uc_power_of_type_in_slot_trigger = { type = shadows slot = 3 }
		}
		else_if = {
			limit = { has_country_flag = show_uc_dusk_powers_flag }
			can_click_uc_power_of_type_in_slot_trigger = { type = dusk slot = 3 }
		}
		else_if = {
			limit = { has_country_flag = show_uc_soul_powers_flag }
			can_click_uc_power_of_type_in_slot_trigger = { type = soul slot = 3 }
		}
		else_if = {
			limit = { has_country_flag = show_uc_abyss_powers_flag }
			can_click_uc_power_of_type_in_slot_trigger = { type = abyss slot = 3 }
		}
		else = { hidden_trigger = { always = no } }
	}
	effect = {
		if = {
			limit = { has_country_flag = show_uc_spirits_powers_flag }
			click_uc_button_of_type_in_slot_effect = { type = spirits slot = 3 }
		}
		else_if = {
			limit = { has_country_flag = show_uc_shadows_powers_flag }
			click_uc_button_of_type_in_slot_effect = { type = shadows slot = 3 }
		}
		else_if = {
			limit = { has_country_flag = show_uc_dusk_powers_flag }
			click_uc_button_of_type_in_slot_effect = { type = dusk slot = 3 }
		}
		else_if = {
			limit = { has_country_flag = show_uc_soul_powers_flag }
			click_uc_button_of_type_in_slot_effect = { type = soul slot = 3 }
		}
		else_if = {
			limit = { has_country_flag = show_uc_abyss_powers_flag }
			click_uc_button_of_type_in_slot_effect = { type = abyss slot = 3 }
		}
		uc_update_ui_effect = yes
	}
}
custom_button = {
	name = umbral_covenant_power_4
	tooltip = umbral_covenant_power_4_name_tt
	frame = {
		number = 4
		trigger = { has_country_flag = show_uc_spirits_powers_flag }
	}
	frame = {
		number = 8
		trigger = { has_country_flag = show_uc_shadows_powers_flag }
	}
	frame = {
		number = 12
		trigger = { has_country_flag = show_uc_dusk_powers_flag }
	}
	frame = {
		number = 16
		trigger = { has_country_flag = show_uc_soul_powers_flag }
	}
	frame = {
		number = 20
		trigger = { has_country_flag = show_uc_abyss_powers_flag }
	}
	trigger = {
		if = {
			limit = { has_country_flag = show_uc_spirits_powers_flag }
			can_click_uc_power_of_type_in_slot_trigger = { type = spirits slot = 4 }
		}
		else_if = {
			limit = { has_country_flag = show_uc_shadows_powers_flag }
			can_click_uc_power_of_type_in_slot_trigger = { type = shadows slot = 4 }
		}
		else_if = {
			limit = { has_country_flag = show_uc_dusk_powers_flag }
			can_click_uc_power_of_type_in_slot_trigger = { type = dusk slot = 4 }
		}
		else_if = {
			limit = { has_country_flag = show_uc_soul_powers_flag }
			can_click_uc_power_of_type_in_slot_trigger = { type = soul slot = 4 }
		}
		else_if = {
			limit = { has_country_flag = show_uc_abyss_powers_flag }
			can_click_uc_power_of_type_in_slot_trigger = { type = abyss slot = 4 }
		}
		else = { hidden_trigger = { always = no } }
	}
	effect = {
		if = {
			limit = { has_country_flag = show_uc_spirits_powers_flag }
			click_uc_button_of_type_in_slot_effect = { type = spirits slot = 4 }
		}
		else_if = {
			limit = { has_country_flag = show_uc_shadows_powers_flag }
			click_uc_button_of_type_in_slot_effect = { type = shadows slot = 4 }
		}
		else_if = {
			limit = { has_country_flag = show_uc_dusk_powers_flag }
			click_uc_button_of_type_in_slot_effect = { type = dusk slot = 4 }
		}
		else_if = {
			limit = { has_country_flag = show_uc_soul_powers_flag }
			click_uc_button_of_type_in_slot_effect = { type = soul slot = 4 }
		}
		else_if = {
			limit = { has_country_flag = show_uc_abyss_powers_flag }
			click_uc_button_of_type_in_slot_effect = { type = abyss slot = 4 }
		}
		uc_update_ui_effect = yes
	}
}
custom_button = {
	name = umbral_covenant_power_5 #Ritual
	tooltip = umbral_covenant_power_5_name_tt
	trigger = {
		if = {
			limit = { has_country_flag = show_uc_spirits_powers_flag }
			can_click_uc_ritual_of_type = { type = spirits slot = 5 }
		}
		else_if = {
			limit = { has_country_flag = show_uc_shadows_powers_flag }
			can_click_uc_ritual_of_type = { type = shadows slot = 5 }
		}
		else_if = {
			limit = { has_country_flag = show_uc_dusk_powers_flag }
			can_click_uc_ritual_of_type = { type = dusk slot = 5 }
		}
		else_if = {
			limit = { has_country_flag = show_uc_soul_powers_flag }
			can_click_uc_ritual_of_type = { type = soul slot = 5 }
		}
		# else_if = { #Show nothing for abyss ritual
		# 	limit = { has_country_flag = show_uc_abyss_powers_flag }
		# 	can_click_uc_ritual_of_type = { type = abyss slot = 5 }
		# }
		else = { hidden_trigger = { always = no } }
	}
	effect = {
		if = {
			limit = { has_country_flag = show_uc_spirits_powers_flag }
			click_uc_ritual_button_of_type_in_slot_effect = { type = spirits slot = 5 }
		}
		else_if = {
			limit = { has_country_flag = show_uc_shadows_powers_flag }
			click_uc_ritual_button_of_type_in_slot_effect = { type = shadows slot = 5 }
		}
		else_if = {
			limit = { has_country_flag = show_uc_dusk_powers_flag }
			click_uc_ritual_button_of_type_in_slot_effect = { type = dusk slot = 5 }
		}
		else_if = {
			limit = { has_country_flag = show_uc_soul_powers_flag }
			click_uc_ritual_button_of_type_in_slot_effect = { type = soul slot = 5 }
		}
		# else_if = { #Do nothing for abyss ritual
		# 	limit = { has_country_flag = show_uc_abyss_powers_flag }
		# 	click_uc_ritual_button_of_type_in_slot_effect = { type = abyss slot = 5 }
		# }
		uc_update_ui_effect = yes
	}
}
custom_text_box = {
	name = umbral_covenant_essence_textbox
	tooltip = umbral_covenant_essence_textbox_tt
}




#Glowing icons
#First
custom_icon = {
	name = UC_glow_star_1
	potential = {
		UC_has_any_type_power_active = { type = spirits }
	}
}
custom_icon = {
	name = UC_glow_star_2
	potential = {
		UC_has_any_type_power_active = { type = shadows }
	}
}
custom_icon = {
	name = UC_glow_star_3
	potential = {
		UC_has_any_type_power_active = { type = dusk }
	}
}
custom_icon = {
	name = UC_glow_star_4
	potential = {
		UC_has_any_type_power_active = { type = soul }
	}
}
custom_icon = {
	name = UC_glow_star_5
	potential = {
		UC_has_any_type_power_active = { type = abyss }
	}
}
#Second
custom_icon = {
	name = UC_glow_second_1
	potential = {
		UC_has_two_of_type_power_active = { type = spirits }
	}
}
custom_icon = {
	name = UC_glow_second_2
	potential = {
		UC_has_two_of_type_power_active = { type = shadows }
	}
}
custom_icon = {
	name = UC_glow_second_3
	potential = {
		UC_has_two_of_type_power_active = { type = dusk }
	}
}
custom_icon = {
	name = UC_glow_second_4
	potential = {
		UC_has_two_of_type_power_active = { type = soul }
	}
}
custom_icon = {
	name = UC_glow_second_5
	potential = {
		UC_has_two_of_type_power_active = { type = abyss }
	}
}
#Third
custom_icon = {
	name = UC_glow_middle_1
	potential = {
		UC_has_adjacent_two_of_type_power_active = { type1 = spirits type2 = shadows }
	}
}
custom_icon = {
	name = UC_glow_middle_2
	potential = {
		UC_has_adjacent_two_of_type_power_active = { type1 = shadows type2 = dusk }
	}
}
custom_icon = {
	name = UC_glow_middle_3
	potential = {
		UC_has_adjacent_two_of_type_power_active = { type1 = dusk type2 = soul }
	}
}
custom_icon = {
	name = UC_glow_middle_4
	potential = {
		UC_has_adjacent_two_of_type_power_active = { type1 = soul type2 = abyss }
	}
}
custom_icon = {
	name = UC_glow_middle_5
	potential = {
		UC_has_adjacent_two_of_type_power_active = { type1 = abyss type2 = spirits }
	}
}

custom_icon = {
	name = umbral_covenant_spirits_button_glow
	potential = { has_country_flag = show_uc_spirits_powers_flag }
	frame = { number = 6 }
}
custom_icon = {
	name = umbral_covenant_shadows_button_glow
	potential = { has_country_flag = show_uc_shadows_powers_flag }
	frame = { number = 6 }
}
custom_icon = {
	name = umbral_covenant_dusk_button_glow
	potential = { has_country_flag = show_uc_dusk_powers_flag }
	frame = { number = 6 }
}
custom_icon = {
	name = umbral_covenant_soul_button_glow
	potential = { has_country_flag = show_uc_soul_powers_flag }
	frame = { number = 6 }
}
custom_icon = {
	name = umbral_covenant_abyss_button_glow
	potential = { has_country_flag = show_uc_abyss_powers_flag }
	frame = { number = 6 }
}

custom_icon = {
	name = umbral_covenant_power_1_glow
	potential = {
		OR = {
			AND = {
				has_country_flag = show_uc_spirits_powers_flag
				has_country_flag = uc_spirits_power_1_active
			}
			AND = {
				has_country_flag = show_uc_shadows_powers_flag
				has_country_flag = uc_shadows_power_1_active
			}
			AND = {
				has_country_flag = show_uc_dusk_powers_flag
				has_country_flag = uc_dusk_power_1_active
			}
			AND = {
				has_country_flag = show_uc_soul_powers_flag
				has_country_flag = uc_soul_power_1_active
			}
			AND = {
				has_country_flag = show_uc_abyss_powers_flag
				has_country_flag = uc_abyss_power_1_active
			}
		}
	}
	frame = { number = 21 }
}
custom_icon = {
	name = umbral_covenant_power_2_glow
	potential = {
		OR = {
			AND = {
				has_country_flag = show_uc_spirits_powers_flag
				has_country_flag = uc_spirits_power_2_active
			}
			AND = {
				has_country_flag = show_uc_shadows_powers_flag
				has_country_flag = uc_shadows_power_2_active
			}
			AND = {
				has_country_flag = show_uc_dusk_powers_flag
				has_country_flag = uc_dusk_power_2_active
			}
			AND = {
				has_country_flag = show_uc_soul_powers_flag
				has_country_flag = uc_soul_power_2_active
			}
			AND = {
				has_country_flag = show_uc_abyss_powers_flag
				has_country_flag = uc_abyss_power_2_active
			}
		}
	}
	frame = { number = 21 }
}
custom_icon = {
	name = umbral_covenant_power_3_glow
	potential = {
		OR = {
			AND = {
				has_country_flag = show_uc_spirits_powers_flag
				has_country_flag = uc_spirits_power_3_active
			}
			AND = {
				has_country_flag = show_uc_shadows_powers_flag
				has_country_flag = uc_shadows_power_3_active
			}
			AND = {
				has_country_flag = show_uc_dusk_powers_flag
				has_country_flag = uc_dusk_power_3_active
			}
			AND = {
				has_country_flag = show_uc_soul_powers_flag
				has_country_flag = uc_soul_power_3_active
			}
			AND = {
				has_country_flag = show_uc_abyss_powers_flag
				has_country_flag = uc_abyss_power_3_active
			}
		}
	}
	frame = { number = 21 }
}
custom_icon = {
	name = umbral_covenant_power_4_glow
	potential = {
		OR = {
			AND = {
				has_country_flag = show_uc_spirits_powers_flag
				has_country_flag = uc_spirits_power_4_active
			}
			AND = {
				has_country_flag = show_uc_shadows_powers_flag
				has_country_flag = uc_shadows_power_4_active
			}
			AND = {
				has_country_flag = show_uc_dusk_powers_flag
				has_country_flag = uc_dusk_power_4_active
			}
			AND = {
				has_country_flag = show_uc_soul_powers_flag
				has_country_flag = uc_soul_power_4_active
			}
			AND = {
				has_country_flag = show_uc_abyss_powers_flag
				has_country_flag = uc_abyss_power_4_active
			}
		}
	}
	frame = { number = 21 }
}

custom_icon = {
	name = umbral_covenant_power_5_glow
	potential = {
		OR = {
			has_country_modifier = S90_ritual_cd_1
			has_country_modifier = S90_ritual_cd_2
			has_country_modifier = S90_ritual_cd_3
			has_country_modifier = S90_ritual_cd_4
			# has_country_modifier = S90_ritual_cd_5
		}
	}
}

custom_window = {
	name = strengthen_government_custom
	potential = {
		OR = {
			has_government_attribute = disable_strengthen_government
			has_government_attribute = expensive_strengthen_government
		}
	}
}

custom_button = {
	name = strengthen_government_custom_button_blocker
}

custom_button = {
	name = strengthen_government_custom_button

	tooltip = custom_strengthen_government_tt
	trigger = {
		NOT = { legitimacy_equivalent = 100 }
		if = {
			limit = {
				has_government_attribute = disable_strengthen_government
			}
			NOT = { has_government_attribute = disable_strengthen_government }
		}
		else_if = {
			limit = {
				has_government_attribute = expensive_strengthen_government
			}
			mil_power_cost = 200
		}
		else = {
			mil_power_cost = 100
		}
	}
	effect = {
		if = {
			limit = {
				has_government_attribute = expensive_strengthen_government
			}
			mil_power_cost = 200
			add_absolutism = 2
			add_legitimacy_equivalent = { amount = 10 republican_tradition = 3 }
		}
		else = {
			mil_power_cost = 100
			add_absolutism = 2
			add_legitimacy_equivalent = { amount = 10 republican_tradition = 3 }
		}
	}
}