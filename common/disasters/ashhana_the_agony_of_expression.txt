ashhana_the_agony_of_expression = {
	potential = {
		has_government_power = {
			mechanic_type = ashhana_blood_curse_mechanic
			power_type = ashhana_blood_curse_control
			value = 100
		}
		NOT = { has_country_flag = ashhana_the_agony_of_expression_complete }
	}
	
	can_start = {
		has_government_power = {
			mechanic_type = ashhana_blood_curse_mechanic
			power_type = ashhana_blood_curse_control
			value = 100
		}
	}
	
	can_stop = {
		custom_trigger_tooltip = {
			tooltip = ashhana_the_agony_of_expression_can_stop_tt
			always = no
		}
	}
	
	progress = {
		modifier = {
			factor = 100
			custom_trigger_tooltip = {
				tooltip = ashhana_the_agony_of_expression_progress_tt
				has_country_flag = ashhana_disaster_can_progress
			}
		}
	}
	
	can_end = {
		# If I am at war with the Canvas revolt tag using the unique CB and am supporting Claw,
		# I need 90% warscore
		# Or, if the revolt tag scores 100%, they also end the disaster and annex the original tag
		# If, five years after the revolt spawns, the war still isn't over, whoever has the highest
		# warscore will be the victor. That's handled in zaradyrra.201 calling zaradyrra.202 after 5 years
		if = {
			limit = {
				is_in_war = {
					participants = L87 #Adzalan
					casus_belli = cb_ashhana_freedom_of_expression
				}
				has_country_flag = ashhana_disaster_supporting_claw
			}
			# Use this slightly awkward construction to handle the case when the revolt tag is vassalised
			# I also want a more helpful tooltip
			OR = {
				custom_trigger_tooltip = {
				tooltip = ashhana_the_agony_of_expression_can_end_adzalan_war_tt.1
					any_war_enemy_country = {
						OR = {
							tag = L87 #Adzalan
							overlord_of = L87
						}
						ROOT = {
							war_score_against = {
								who = PREV
								value = 90
							}
						}
					}
				}
				custom_trigger_tooltip = {
				tooltip = ashhana_the_agony_of_expression_can_end_adzalan_war_tt.2
					any_war_enemy_country = {
						OR = {
							tag = L87 #Adzalan
							overlord_of = L87
						}
						war_score_against = {
							who = ROOT
							value = 100
						}
					}
				}
			}
		}
		# If I am at war with the Claw revolt tag using the unique CB and am supporting Canvas,
		# I need 90% warscore
		# Use this slightly awkward construction to handle the case when the revolt tag is vassalised
		# I also want a more helpful tooltip
		else_if = {
			limit = {
				is_in_war = {
					participants = U47 #Shyarayan
					casus_belli = cb_ashhana_freedom_of_expression
				}
				has_country_flag = ashhana_disaster_supporting_canvas
			}
			OR = {
				custom_trigger_tooltip = {
				tooltip = ashhana_the_agony_of_expression_can_end_shyarayan_war_tt.1
					any_war_enemy_country = {
						OR = {
							tag = U47 #Shyarayan
							overlord_of = U47
						}
						ROOT = {
							war_score_against = {
								who = PREV
								value = 90
							}
						}
					}
				}
				custom_trigger_tooltip = {
				tooltip = ashhana_the_agony_of_expression_can_end_shyarayan_war_tt.2
					any_war_enemy_country = {
						OR = {
							tag = U47 #Shyarayan
							overlord_of = U47
						}
						war_score_against = {
							who = ROOT
							value = 100
						}
					}
				}
			}
		}
		# If the revolt has happened, but somehow the revolt tag no longer exists without me winning
		# the war, we need to end the disaster
		else_if = {
			limit = {
				has_country_flag = ashhana_revolt_events_enabled
			}
			NOT = { exists = L87 } #Adzalan
			NOT = { exists = U47 } #Shyarayan
		}
		# For the case of mutliple human Ashhana player, show a different tooltip if a revolt has already happened
		else_if = {
			limit = {
				has_global_flag = ashhana_revolt_happened_global
			}
			custom_trigger_tooltip = {
				tooltip = ashhana_the_agony_of_expression_can_end_no_revolt_tt
				always = no
			}
		}
		# Otherwise, the disaster can only end via triggered effect after the 5 year wait
		else = {
			custom_trigger_tooltip = {
				tooltip = ashhana_the_agony_of_expression_can_end_tt
				always = no
			}
		}
	}

	ended_by_country_breaking_to_rebels = no	

	modifier = {
		shock_damage = -0.1
		technology_cost = 0.05
		stability_cost_modifier = 0.5
	}	
	
	
	on_start = zaradyrra.200 #hidden event to trigger the revolt in 2 years and the 5 year backup
	on_end = zaradyrra.202
	
	on_monthly = {
		random_events = {
			# These events will only occur every 4 months, up until the revolt tag spawns
			1 = zaradyrra.18 #The Crazed Few
			1 = zaradyrra.19 #Amongst the Strife
			1 = zaradyrra.20 #If You Long for Peace
			1 = zaradyrra.21 #Bad Claw Things
			1 = zaradyrra.22 #Blood on the Canvas
			1 = zaradyrra.23 #Material Mafleasance
			1 = zaradyrra.24 #Bad Canvas Things
			1 = zaradyrra.25 #Aesthetic Elitism
			1 = zaradyrra.26 #Monotony of Expression
			# These ones will occur every 6 months after the revolt tag has spawned
			1 = zaradyrra.27 #The Enemy Inside
			1 = zaradyrra.28 #What We Become
			1 = zaradyrra.29 #Band of Bards
		}
	}
}