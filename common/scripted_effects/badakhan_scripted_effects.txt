badakhan_monthly_power_gain = {
	set_variable = { badakhan_power_gain = 0 }
	badakhan_monthly_power_gain_helper = { estate = estate_church }
	badakhan_monthly_power_gain_helper = { estate = estate_nobles }
	badakhan_monthly_power_gain_helper = { estate = estate_burghers }
	badakhan_monthly_power_gain_helper = { estate = estate_mages }
	badakhan_monthly_power_gain_helper = { estate = estate_adventurers }
	badakhan_monthly_power_gain_helper = { estate = estate_artificers }
	trigger_switch = {
		on_trigger = has_country_flag
		badakhan_amriel_confronted_0 = { multiply_variable = { badakhan_power_gain = 0.01 } }
		badakhan_amriel_confronted_1 = { multiply_variable = { badakhan_power_gain = 0.02 } }
		badakhan_amriel_confronted_2 = { multiply_variable = { badakhan_power_gain = 0.03 } }
	}
	set_variable = {
		which = badakhan_power_gain_temp
		which = badakhan_power_gain
	}
	gov_power_var_effect_granular = {
		mechanic = badakhan_orcish_soul_mechanic
		power = badakhan_orcish_soul_struggle
		var = badakhan_power_gain_temp
		sign = +
	}
}

badakhan_monthly_power_gain_helper = {
	export_number_of_estate_privs_to_var = { estate = $estate$ var = temp_num_privs }
	change_variable = {
		which = badakhan_power_gain
		which = temp_num_privs
	}
}

badakhan_confront_amriel = {
	if = {
		limit = { has_country_flag = badakhan_amriel_confronted_2 }
		country_event = {
			id = flavour_badakhan.110
			days = 30
		}
	}
	else_if = {
		limit = { has_country_flag = badakhan_amriel_confronted_1 }
		clr_country_flag = badakhan_amriel_confronted_1
		set_country_flag = badakhan_amriel_confronted_2
		custom_tooltip = badakhan_privileges_boost_1_tt
	}
	else = { # must have 0 confronted
		clr_country_flag = badakhan_amriel_confronted_0
		set_country_flag = badakhan_amriel_confronted_1
		custom_tooltip = badakhan_privileges_boost_0_tt
	}
}
