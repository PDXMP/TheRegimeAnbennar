#Want to add more? : https://docs.google.com/document/d/1GdKqzwpnjCD5OwJeO-qX13PLuoL0oa4Ks8nn9XKo4Qk/edit?tab=t.0

update_achievement = {
	if = {
		limit = { 
			get_achievement_triggers = { achievement = $achievement$ }
			NOT = { has_country_flag = ach_$achievement$_complete_perma }
		}
		complete_achievement = { achievement = $achievement$ }

		#Backup event to clear achievement popup
		hidden_effect = { country_event = { id = anb_miscevents.24 days = 180 } } #6 months
	}
}

update_all_achievements = {
	if = {
		limit = { 
			ai = no 
			NOT = { has_global_flag = achievements_disabled }
		}
		update_achievement = { achievement = bulwar_garden }
		update_achievement = { achievement = unity }
		update_achievement = { achievement = from_whom_the_bell_tolls }
		update_achievement = { achievement = fine_addition }
		update_achievement = { achievement = shorter_blackbeard }
		# update_achievement = { achievement = kobold_gold }
		update_achievement = { achievement = godfound }
		update_achievement = { achievement = rohibos_revenge }
		update_achievement = { achievement = true_heir_of_jaher }
		update_achievement = { achievement = smallfolk_unite }
		update_achievement = { achievement = we_are_the_old_world }
		update_achievement = { achievement = the_snap }
		update_achievement = { achievement = restorers_of_the_fey_realm }
		update_achievement = { achievement = moon_upon_a_dove_throne }
		update_achievement = { achievement = gerard_majax }
		update_achievement = { achievement = one_tag_one_faith }
		update_achievement = { achievement = harimars_empire }
		update_achievement = { achievement = riders_on_the_storm }
		update_achievement = { achievement = chien_ting_rung }
		update_achievement = { achievement = unlimited_pawer }
		update_achievement = { achievement = only_thing_i_know }
		update_achievement = { achievement = the_unlikely_candidate }
		update_achievement = { achievement = orda_66 }
		update_achievement = { achievement = you_break_it_you_fix_it }
		update_achievement = { achievement = back_to_out_roots }
		update_achievement = { achievement = a_horse_walks_into_a_bar }
		update_achievement = { achievement = the_real_feast_of_the_gods }
		update_achievement = { achievement = chainbreaker }
		update_achievement = { achievement = rending_forevermore }
		update_achievement = { achievement = so_how_do_i_quitl }
		update_achievement = { achievement = my_people_need_me }
		update_achievement = { achievement = the_intended_path }
		update_achievement = { achievement = from_binsplosion_to_binglory }
		update_achievement = { achievement = making_strongbellow_proud }
		update_achievement = { achievement = the_bronzescales_are_real }
		update_achievement = { achievement = anbennar_gt }
		update_achievement = { achievement = the_prussia_of_anbennar }
		update_achievement = { achievement = history_repeats }
		update_achievement = { achievement = dwarven_odyssey }
		update_achievement = { achievement = this_isnt_the_hinderlands }
		update_achievement = { achievement = variety_is_the_spice_of_life }
		update_achievement = { achievement = disappoint_jyntas }
		update_achievement = { achievement = one_river_above_all }
		update_achievement = { achievement = the_trollsbay }
		update_achievement = { achievement = in_the_shadow_of_the_valley }
		update_achievement = { achievement = self_defying_destiny }
		update_achievement = { achievement = astral_reckoning }
		update_achievement = { achievement = orange_is_the_new_black }
		update_achievement = { achievement = there_were_dragons }
	}
}

update_achievement_by_page = {
	if = {
		limit = { has_country_flag = achievements_page_1_opened }
		update_achievement = { achievement = $page_1_ach$ }
	}
	if = {
		limit = { has_country_flag = achievements_page_2_opened }
		update_achievement = { achievement = $page_2_ach$ }
	}
	if = {
		limit = { has_country_flag = achievements_page_3_opened }
		update_achievement = { achievement = $page_3_ach$ }
	}
	[[small_resolution]
		if = {
			limit = { has_country_flag = achievements_page_4_opened }
			update_achievement = { achievement = $page_4_ach$ }
		}
		if = {
			limit = { has_country_flag = achievements_page_5_opened }
			update_achievement = { achievement = $page_5_ach$ }
		}
		if = {
			limit = { has_country_flag = achievements_page_6_opened }
			update_achievement = { achievement = $page_6_ach$ }
		}
	]
}

complete_achievement = {
	custom_tooltip = ach_unlock_tt
	set_country_flag = achievements_alert_menu_opened
	set_country_flag = ach_$achievement$_complete #For the event to check which achievement you just completed - cleared after
	set_country_flag = ach_$achievement$_complete_perma #So the achievement menu knows which achievements have been completed
}

clr_achievement_flags = {
	clr_country_flag = ach_bulwar_garden_complete
	clr_country_flag = ach_unity_complete
	clr_country_flag = ach_from_whom_the_bell_tolls_complete
	clr_country_flag = ach_fine_addition_complete
	clr_country_flag = ach_shorter_blackbeard_complete
	# clr_country_flag = ach_kobold_gold_complete
	clr_country_flag = ach_godfound_complete
	clr_country_flag = ach_rohibos_revenge_complete
	clr_country_flag = ach_true_heir_of_jaher_complete
	clr_country_flag = ach_smallfolk_unite_complete
	clr_country_flag = ach_we_are_the_old_world_complete
	clr_country_flag = ach_the_snap_complete
	clr_country_flag = ach_restorers_of_the_fey_realm_complete
	clr_country_flag = ach_moon_upon_a_dove_throne_complete
	clr_country_flag = ach_gerard_majax_complete
	clr_country_flag = ach_one_tag_one_faith_complete
	clr_country_flag = ach_harimars_empire_complete
	clr_country_flag = ach_riders_on_the_storm_complete
	clr_country_flag = ach_chien_ting_rung_complete
	clr_country_flag = ach_unlimited_pawer_complete
	clr_country_flag = ach_only_thing_i_know_complete
	clr_country_flag = ach_the_unlikely_candidate_complete
	clr_country_flag = ach_orda_66_complete
	clr_country_flag = ach_you_break_it_you_fix_it_complete
	clr_country_flag = ach_back_to_out_roots_complete
	clr_country_flag = ach_a_horse_walks_into_a_bar_complete
	clr_country_flag = ach_the_real_feast_of_the_gods_complete
	clr_country_flag = ach_chainbreaker_complete
	clr_country_flag = ach_rending_forevermore_complete
	clr_country_flag = ach_so_how_do_i_quitl_complete
	clr_country_flag = ach_my_people_need_me_complete
	clr_country_flag = ach_the_intended_path_complete
	clr_country_flag = ach_from_binsplosion_to_binglory_complete
	clr_country_flag = ach_making_strongbellow_proud_complete
	clr_country_flag = ach_the_bronzescales_are_real_complete
	clr_country_flag = ach_anbennar_gt_complete
	clr_country_flag = ach_the_prussia_of_anbennar_complete
	clr_country_flag = ach_history_repeats_complete
	clr_country_flag = ach_dwarven_odyssey_complete
	clr_country_flag = ach_this_isnt_the_hinderlands_complete
	clr_country_flag = ach_variety_is_the_spice_of_life_complete
	clr_country_flag = ach_disappoint_jyntas_complete
	clr_country_flag = ach_one_river_above_all_complete
	clr_country_flag = ach_the_trollsbay_complete
	clr_country_flag = ach_in_the_shadow_of_the_valley_complete
	clr_country_flag = ach_self_defying_destiny_complete
	clr_country_flag = ach_astral_reckoning_complete
	clr_country_flag = ach_orange_is_the_new_black_complete
	clr_country_flag = ach_there_were_dragons_complete
}