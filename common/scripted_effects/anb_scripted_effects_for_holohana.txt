###############################################
#Migration Logic, static and not to be used outside of the System
###############################################

#Applies all modifiers needed for the Holohana to work
holohana_spawn_effect = {
	P99 = {
		event_target:holohana_target_$holohana$ = {
			if = {
				limit = {
					is_empty = no
					is_capital = no
					NOT = { owner = { tag = P99 } }
				}
				owner = {
					save_event_target_as = holohana_owner_country_$holohana$
				}
				cede_province = P99
				set_province_flag = holohana_add_back_to_previous_owner
			}
			if = {
				limit = {
					is_empty = yes
				}
				create_colony = 1000
			}
			holohana_add_rumbling = { holohana = $holohana$ }
		}
	}
}

#Spawns the actual Rebel Stack that represents the Holohana
holohana_rebel_spawn_effect = {
	event_target:holohana_target_$holohana$ = {
		add_permanent_province_modifier = {
			name = holohana_supply
			duration = 1
		}
		owner = {
			add_country_modifier = {
				name = holohana_forcelimit_modifier
				duration = -1
			}
			add_country_modifier = {
				name = holohana_leader_modifier_$holohana$
				duration = 1
			}
		}
		if = {
			limit = {
				has_global_flag = holohana_$holohana$_injured
			}
			spawn_rebels = {
				size = 3
				[[maliu_fanua_leader]leader = "Maliu Fanua"]
				[[the_watcher_leader]leader = "The Watcher"]
				[[forest_wide_and_dim_leader]leader = "Forest-Wide-and-Dim"]
				[[mawutt_leader]leader = "Mawutt"]
				[[pilpala_leader]leader = "Pilpala, the Rotting One"]
				[[nauhona_leader]leader = "Nauhona, The World Serpent"]
				[[devouring_rain_leader]leader = "Devouring Rain"]
				[[raven_kraken_leader]leader = "Raven-Kraken"]
				[[vibranox_leader]leader = "Vibranox"]
				[[somnambulist_leader]leader = "Somnambulist"]
				[[mlakulon_leader]leader = "Mlakulon"]
				[[high_cretin_leader]leader = "High Cretin"]
				[[great_wind_leader]leader = "Great Wind"]
				[[great_bone_taker_leader]leader = "Great Bone Taker"]
				[[deceiving_spiked_turtle_flower_leader]leader = "Deceiving Spiked Turtle-Flower"]
				[[the_hopping_plateau_leader]leader = "The Hopping Plateau"]
				[[great_feathered_flower_leader]leader = "Great Feathered Flower"]
				[[gods_distorting_rainbow_leader]leader = "Gods-Distorting-Rainbow"]
				[[chirping_locust_leader]leader = "Chirping Locust"]
				[[armorollo_leader]leader = "Armorollo"]
				type = holohana_$holohana$_rebels
			}
		}
		else = {
			spawn_rebels = {
				size = 9
				[[maliu_fanua_leader]leader = "Maliu Fanua"]
				[[the_watcher_leader]leader = "The Watcher"]
				[[forest_wide_and_dim_leader]leader = "Forest-Wide-and-Dim"]
				[[mawutt_leader]leader = "Mawutt"]
				[[pilpala_leader]leader = "Pilpala, the Rotting One"]
				[[nauhona_leader]leader = "Nauhona, The World Serpent"]
				[[devouring_rain_leader]leader = "Devouring Rain"]
				[[raven_kraken_leader]leader = "Raven-Kraken"]
				[[vibranox_leader]leader = "Vibranox"]
				[[somnambulist_leader]leader = "Somnambulist"]
				[[mlakulon_leader]leader = "Mlakulon"]
				[[high_cretin_leader]leader = "High Cretin"]
				[[great_wind_leader]leader = "Great Wind"]
				[[great_bone_taker_leader]leader = "Great Bone Taker"]
				[[deceiving_spiked_turtle_flower_leader]leader = "Deceiving Spiked Turtle-Flower"]
				[[the_hopping_plateau_leader]leader = "The Hopping Plateau"]
				[[great_feathered_flower_leader]leader = "Great Feathered Flower"]
				[[gods_distorting_rainbow_leader]leader = "Gods-Distorting-Rainbow"]
				[[chirping_locust_leader]leader = "Chirping Locust"]
				[[armorollo_leader]leader = "Armorollo"]
				type = holohana_$holohana$_rebels
			}
		}
		owner = {
			remove_country_modifier = holohana_leader_modifier_$holohana$
		}
		if = {
			limit = {
				owner = {
					NOT = { tag = P99 }
				}
			}
			owner = {
				remove_country_modifier = holohana_forcelimit_modifier
			}
		}
		if = {
			limit = {
				owner = {
					tag = P99
				}
			}
			if = {
				limit = { NOT = { has_province_flag = holohana_add_back_to_previous_owner } }
				holohana_save_rumbling_flag = { holohana = $holohana$ }
				decolonize = THIS
				change_culture = ---
				change_religion = ---
				holohana_add_back_rumbling_based_on_saved_flag = { holohana = $holohana$ }
			}
			if = { 
				limit = { has_province_flag = holohana_add_back_to_previous_owner }
				add_core = event_target:holohana_owner_country_$holohana$
				cede_province = event_target:holohana_owner_country_$holohana$
				clr_province_flag = holohana_add_back_to_previous_owner
			}
		}
		remove_province_modifier = holohana_supply
		set_province_flag = holohana_is_here_flag
		add_devastation = 100
	}
}

holohana_set_potential_event_targets = {
	random_empty_neighbor_province = {
		limit = {
			is_valid_holohana_move_target = { holohana = $holohana$ }
		}
		save_event_target_as = holohana_empty_target_1
	}
	random_neighbor_province = {
		limit = {
			is_valid_holohana_move_target = { holohana = $holohana$ }
		}
		save_event_target_as = holohana_city_target_1
	}
	if = {
		limit = { has_saved_event_target = holohana_city_target_1 }
		random_neighbor_province = {
			limit = {
				NOT = { province_id = event_target:holohana_city_target_1 }
				is_valid_holohana_move_target = { holohana = $holohana$ }
			}
			save_event_target_as = holohana_city_target_2
		}
	}
}

#Migrates the target Holohana to a new Province.
holohana_migrate_effect = {
	event_target:holohana_target_$holohana$ = {
		#Target selection for later
		holohana_set_potential_event_targets = { holohana = $holohana$ }

		##### Moving
		if = {
			# blocked in by ward conduits or other holohana
			limit = {
				NOT = {
					OR = {
						has_saved_event_target = holohana_empty_target_1
						has_saved_event_target = holohana_city_target_1
					}
				}
			}
			# TODO for insyaa team: this should probably send some kind of notification to nearby tags
			holohana_start_individual_rampage = { holohana = $holohana$ }
			holohana_delayed_end_individual_rampage = { $holohana$ = yes days = 1642 } # turn off rampage after 4.5 years so that on average it does 5 "enraged" jumps

			# try again now with restrictions lowered because of rampage
			holohana_set_potential_event_targets = { holohana = $holohana$ }
		}
		if = {
			limit = {
				OR = {
					has_saved_event_target = holohana_empty_target_1
					has_saved_event_target = holohana_city_target_1
				}
			}
			remove_province_modifier = holohana_modifier_$holohana$
			holohana_clear_rebels_und_flag = yes
			holohana_move = { holohana = $holohana$ }
		}
		holohana_remove_rumbling = { holohana = $holohana$ }
		save_global_event_target_as = holohana_prev_target_$holohana$
	}
	6234 = {
		#Heal after 20 years
		if = {
			limit = {
				had_global_flag = {
					flag = holohana_$holohana$_injured
					days = 7300
				} 
			}
			clr_global_flag = holohana_$holohana$_injured
		}
	}
}
#Holohana Fleeing Migration
holohana_fleeing_effect = {
	event_target:holohana_target_$holohana$ = {
		#Pre Target selection for fleeing
		random_empty_neighbor_province = {
			limit = {
				holohana_not_running_back = { holohana = $holohana$ }
				is_valid_holohana_move_target = { holohana = $holohana$ }
			}
			save_event_target_as = holohana_empty_target_1
		}
		random_neighbor_province = {
			limit = {
				holohana_not_running_back = { holohana = $holohana$ }
				is_valid_holohana_move_target = { holohana = $holohana$ }
			}
			save_event_target_as = holohana_city_target_1
		}
		if = { 
			limit = { has_saved_event_target = holohana_city_target_1 }
			random_neighbor_province = {
				limit = {
					NOT = { province_id = event_target:holohana_city_target_1 }
					holohana_not_running_back = { holohana = $holohana$ }
					is_valid_holohana_move_target = { holohana = $holohana$ }
				}
				save_event_target_as = holohana_city_target_2
			}
		}
		#Target selection for later
		if = {
			limit = {
				NOT = {
					has_saved_event_target = holohana_empty_target_1
				}
			}
			random_empty_neighbor_province = {
				limit = {
					is_valid_holohana_move_target = { holohana = $holohana$ }
				}
				save_event_target_as = holohana_empty_target_1
			}
		}
		if = {
			limit = {
				NOT = {
					has_saved_event_target = holohana_city_target_1
				}
			}
			random_neighbor_province = {
				limit = {
					is_valid_holohana_move_target = { holohana = $holohana$ }
				}
				save_event_target_as = holohana_city_target_1
			}
			if = { 
				limit = { has_saved_event_target = holohana_city_target_1 }
				random_neighbor_province = {
					limit = {
						NOT = { province_id = event_target:holohana_city_target_1 }
						is_valid_holohana_move_target = { holohana = $holohana$ }
					}
					save_event_target_as = holohana_city_target_2
				}
			}
		}
		##### Moving
		if = {
			limit = {
				OR = {
					has_saved_event_target = holohana_empty_target_1
					has_saved_event_target = holohana_city_target_1
				}
			}
			remove_province_modifier = holohana_modifier_$holohana$
			if = { #Clear Rebels
				limit = {
					6234 = {
						NOT = {
							has_province_flag = holohana_was_just_injured_$holohana$
						}
					}
				}
				holohana_clear_rebels_und_flag = yes
			}
			else = {
				6234 = {
					clr_province_flag = holohana_was_just_injured_$holohana$
				}
				if = {
					limit = {
						NOT = {
							has_holohana_province_modifier = yes
						}
					}
					clr_province_flag = holohana_is_here_flag
				}
			}
			holohana_move = { holohana = $holohana$ }
		}
		holohana_remove_rumbling = { holohana = $holohana$ }
		save_global_event_target_as = holohana_prev_target_$holohana$
	}
	6234 = {
		change_variable = {
			which = $holohana$FleeingTimer
			value = -1
		}
		if = {
			limit = {
				check_variable = {
					which = $holohana$FleeingTimer
					value = 1
				}
			}
			set_global_flag = holohana_flight_continues
		}
		else = {
			clr_province_flag = holohana_fleeing_$holohana$
		}
	}
}

###############################################
#Dynamic Effects which can be called to interact with the system
###############################################

#Counts the Time until a Migration happens for each $holohana$. Can be used in other effects to speed up the Migration of specific Holohana if wished
holohana_progress_migrate_timer = {
	6234 = {
		change_variable = {
			which = $holohana$MigrateTimer
			value = 1
		}
	}
}

holohana_reset_migrate_timer = {
	6234 = {
		set_variable = {
			which = $holohana$MigrateTimer
			value = 1
		}
	}
}

#Sets the Migration Timer i.e how many years need to pass before the Holohana migrates $holohana$ > The Holohana $amount$ > The amount of Years
#If a Global Rampage is going on it will always default to 1 Year Migrations
holohana_set_years_between_migrations= {
	6234 = {
		set_variable = {
			which = $holohana$MigrateStart
			value = $amount$
		}
	}
}
holohana_start_rampage_solo = {
	6234 = {
		set_variable = {
			which = $holohana$MigrateStart
			value = 1
		}
	}
}

#Start a Rampage for all Holohana
holohana_start_rampage_global = {
	play_sound = defender_of_the_sky_domain_faith #remove it when they decide where to put rampage
	set_global_flag = holohana_rampage_global
	holohana_start_rampage_solo = { holohana = maliu_fanua }
	holohana_start_rampage_solo = { holohana = the_watcher }
	holohana_start_rampage_solo = { holohana = forest_wide_and_dim }
	holohana_start_rampage_solo = { holohana = mawutt }
	holohana_start_rampage_solo = { holohana = pilpala }
	holohana_start_rampage_solo = { holohana = nauhona }
	holohana_start_rampage_solo = { holohana = devouring_rain }
	holohana_start_rampage_solo = { holohana = raven_kraken }
	holohana_start_rampage_solo = { holohana = vibranox }
	holohana_start_rampage_solo = { holohana = somnambulist }
	holohana_start_rampage_solo = { holohana = mlakulon }
	holohana_start_rampage_solo = { holohana = high_cretin }
	holohana_start_rampage_solo = { holohana = great_wind }
	holohana_start_rampage_solo = { holohana = great_bone_taker }
	holohana_start_rampage_solo = { holohana = deceiving_spiked_turtle_flower }
	holohana_start_rampage_solo = { holohana = the_hopping_plateau }
	holohana_start_rampage_solo = { holohana = great_feathered_flower }
	holohana_start_rampage_solo = { holohana = gods_distorting_rainbow }
	holohana_start_rampage_solo = { holohana = chirping_locust }
	holohana_start_rampage_solo = { holohana = armorollo }
}

#End a Rampage for all Holohana
holohana_end_rampage_global = {
	clr_global_flag = holohana_rampage_global
	6234 = {
		set_holohana_starting_migration_timers = yes
	}
}

#Start a Rampage for a specific Holohana
holohana_start_individual_rampage = {
	set_global_flag = holohana_rampage_$holohana$
	holohana_start_rampage_solo = { holohana = $holohana$ }
	holohana_reset_migrate_timer = { holohana = $holohana$ }
}

#End a Rampage for a specific Holohana
holohana_end_individual_rampage = {
	clr_global_flag = holohana_rampage_$holohana$
	if = {
		limit = { NOT = { has_global_flag = holohana_rampage_global } }
		6234 = {
			holohana_set_years_between_migrations= { holohana = $holohana$ amount = $amount$ }
			holohana_reset_migrate_timer = { holohana = $holohana$ }
		}
	}
}

#Queue up ending a rampage for a specific holohana after a set duration
holohana_delayed_end_individual_rampage = {
	6234 = {
		[[maliu_fanua] province_event = { id = holohana_events.200 days = $days$ } ]
		[[the_watcher] province_event = { id = holohana_events.201 days = $days$ } ]
		[[forest_wide_and_dim] province_event = { id = holohana_events.202 days = $days$ } ]
		[[mawutt] province_event = { id = holohana_events.203 days = $days$ } ]
		[[pilpala] province_event = { id = holohana_events.204 days = $days$ } ]
		[[nauhona] province_event = { id = holohana_events.205 days = $days$ } ]
		[[devouring_rain] province_event = { id = holohana_events.206 days = $days$ } ]
		[[raven_kraken] province_event = { id = holohana_events.207 days = $days$ } ]
		[[vibranox] province_event = { id = holohana_events.208 days = $days$ } ]
		[[somnambulist] province_event = { id = holohana_events.208 days = $days$ } ]
		[[mlakulon] province_event = { id = holohana_events.209 days = $days$ } ]
		[[high_cretin] province_event = { id = holohana_events.210 days = $days$ } ]
		[[great_wind] province_event = { id = holohana_events.211 days = $days$ } ]
		[[great_bone_taker] province_event = { id = holohana_events.212 days = $days$ } ]
		[[deceiving_spiked_turtle_flower] province_event = { id = holohana_events.213 days = $days$ } ]
		[[the_hopping_plateau] province_event = { id = holohana_events.214 days = $days$ } ]
		[[great_feathered_flower] province_event = { id = holohana_events.215 days = $days$ } ]
		[[gods_distorting_rainbow] province_event = { id = holohana_events.216 days = $days$ } ]
		[[chirping_locust] province_event = { id = holohana_events.217 days = $days$ } ]
		[[armorollo] province_event = { id = holohana_events.218 days = $days$ } ]
	}
}

#Injure the losing Holohana when two battle
holohana_injury_effect = {
	if = {
		limit = { has_global_flag = holohana_$holohana$_injured }
		clr_global_flag = holohana_$holohana$_injured
		set_global_flag = holohana_dead_$holohana$
		province_event = { id = holohana_events.43 } # spawn a non-starting holohana before cleaning up so it doesnt spawn where the holohana just died
		holohana_dead_clean_up = { holohana = $holohana$ }
	}
	else = {
		set_global_flag = holohana_$holohana$_injured
		set_global_flag = holohana_flight_continues
		6234 = {
			set_variable = {
				which = $holohana$FleeingTimer
				value = 6
			}
			set_province_flag = holohana_was_just_injured_$holohana$
			set_province_flag = holohana_fleeing_$holohana$
		}
	}
}
holohana_add_rumbling = {
	every_neighbor_province = {
		if = {
			limit = {
				NOT = { has_province_flag = holohana_is_here_flag }
			}
			add_permanent_province_modifier = {
				name = holohana_rumbling
				duration = -1
			}
		}
		set_province_flag = holohana_rumbling_flag_$holohana$
	}
	#Uncolonized
	every_empty_neighbor_province = {
		if = {
			limit = {
				NOT = { has_province_flag = holohana_is_here_flag }
			}
			add_permanent_province_modifier = {
				name = holohana_rumbling
				duration = -1
			}
		}
		set_province_flag = holohana_rumbling_flag_$holohana$
	}
}
holohana_add_back_rumbling = {
	if = {
		limit = {
			holohana_neighbor_modifier = { holohana = the_watcher }
		}
		set_province_flag = holohana_rumbling_flag_the_watcher
	}
	if = {
		limit = {
			holohana_neighbor_modifier = { holohana = forest_wide_and_dim }
		}
		set_province_flag = holohana_rumbling_flag_forest_wide_and_dim
	}
	if = {
		limit = {
			holohana_neighbor_modifier = { holohana = mawutt }
		}
		set_province_flag = holohana_rumbling_flag_mawutt
	}
	if = {
		limit = {
			holohana_neighbor_modifier = { holohana = pilpala }
		}
		set_province_flag = holohana_rumbling_flag_pilpala
	}
	if = {
		limit = {
			holohana_neighbor_modifier = { holohana = nauhona }
		}
		set_province_flag = holohana_rumbling_flag_nauhona
	}
	if = {
		limit = {
			holohana_neighbor_modifier = { holohana = devouring_rain }
		}
		set_province_flag = holohana_rumbling_flag_devouring_rain
	}
	if = {
		limit = {
			holohana_neighbor_modifier = { holohana = raven_kraken }
		}
		set_province_flag = holohana_rumbling_flag_raven_kraken
	}
	if = {
		limit = {
			holohana_neighbor_modifier = { holohana = vibranox }
		}
		set_province_flag = holohana_rumbling_flag_vibranox
	}
	if = {
		limit = {
			holohana_neighbor_modifier = { holohana = somnambulist }
		}
		set_province_flag = holohana_rumbling_flag_somnambulist
	}
	if = {
		limit = {
			holohana_neighbor_modifier = { holohana = mlakulon }
		}
		set_province_flag = holohana_rumbling_flag_mlakulon
	}
	if = {
		limit = {
			holohana_neighbor_modifier = { holohana = high_cretin }
		}
		set_province_flag = holohana_rumbling_flag_high_cretin
	}
	if = {
		limit = {
			holohana_neighbor_modifier = { holohana = great_wind }
		}
		set_province_flag = holohana_rumbling_flag_great_wind
	}
	if = {
		limit = {
			holohana_neighbor_modifier = { holohana = great_bone_taker }
		}
		set_province_flag = holohana_rumbling_flag_great_bone_taker
	}
	if = {
		limit = {
			holohana_neighbor_modifier = { holohana = deceiving_spiked_turtle_flower }
		}
		set_province_flag = holohana_rumbling_flag_deceiving_spiked_turtle_flower
	}
	if = {
		limit = {
			holohana_neighbor_modifier = { holohana = the_hopping_plateau }
		}
		set_province_flag = holohana_rumbling_flag_the_hopping_plateau
	}
	if = {
		limit = {
			holohana_neighbor_modifier = { holohana = great_feathered_flower }
		}
		set_province_flag = holohana_rumbling_flag_great_feathered_flower
	}
	if = {
		limit = {
			holohana_neighbor_modifier = { holohana = maliu_fanua }
		}
		set_province_flag = holohana_rumbling_flag_maliu_fanua
	}
	if = {
		limit = {
			holohana_neighbor_modifier = { holohana = gods_distorting_rainbow }
		}
		set_province_flag = holohana_rumbling_flag_gods_distorting_rainbow
	}
	if = {
		limit = {
			holohana_neighbor_modifier = { holohana = chirping_locust }
		}
		set_province_flag = holohana_rumbling_flag_chirping_locust
	}
	if = {
		limit = {
			holohana_neighbor_modifier = { holohana = armorollo }
		}
		set_province_flag = holohana_rumbling_flag_armorollo
	}
}
holohana_injury_trigger_switch = { #Who would guess that trigger_switch is just a else_if in trench coat?
	if = {
		limit = { is_rebel_type = holohana_armorollo_rebels }
		holohana_injury_effect = { holohana = armorollo }
	}
	if = {
		limit = { is_rebel_type = holohana_chirping_locust_rebels }
		holohana_injury_effect = { holohana = chirping_locust }
	}
	if = {
		limit = { is_rebel_type = holohana_deceiving_spiked_turtle_flower_rebels }
		holohana_injury_effect = { holohana = deceiving_spiked_turtle_flower }
	}
	if = {
		limit = { is_rebel_type = holohana_devouring_rain_rebels }
		holohana_injury_effect = { holohana = devouring_rain }
	}
	if = {
		limit = { is_rebel_type = holohana_forest_wide_and_dim_rebels }
		holohana_injury_effect = { holohana = forest_wide_and_dim }
	}
	if = {
		limit = { is_rebel_type = holohana_gods_distorting_rainbow_rebels }
		holohana_injury_effect = { holohana = gods_distorting_rainbow }
	}
	if = {
		limit = { is_rebel_type = holohana_great_bone_taker_rebels }
		holohana_injury_effect = { holohana = great_bone_taker }
	}
	if = {
		limit = { is_rebel_type = holohana_great_feathered_flower_rebels }
		holohana_injury_effect = { holohana = great_feathered_flower }
	}
	if = {
		limit = { is_rebel_type = holohana_great_wind_rebels }
		holohana_injury_effect = { holohana = great_wind }
	}
	if = {
		limit = { is_rebel_type = holohana_high_cretin_rebels }
		holohana_injury_effect = { holohana = high_cretin }
	}
	if = {
		limit = { is_rebel_type = holohana_maliu_fanua_rebels }
		holohana_injury_effect = { holohana = maliu_fanua }
	}
	if = {
		limit = { is_rebel_type = holohana_mawutt_rebels }
		holohana_injury_effect = { holohana = mawutt }
	}
	if = {
		limit = { is_rebel_type = holohana_mlakulon_rebels }
		holohana_injury_effect = { holohana = mlakulon }
	}
	if = {
		limit = { is_rebel_type = holohana_nauhona_rebels }
		holohana_injury_effect = { holohana = nauhona }
	}
	if = {
		limit = { is_rebel_type = holohana_pilpala_rebels }
		holohana_injury_effect = { holohana = pilpala }
	}
	if = {
		limit = { is_rebel_type = holohana_raven_kraken_rebels }
		holohana_injury_effect = { holohana = raven_kraken }
	}
	if = {
		limit = { is_rebel_type = holohana_somnambulist_rebels }
		holohana_injury_effect = { holohana = somnambulist }
	}
	if = {
		limit = { is_rebel_type = holohana_the_hopping_plateau_rebels }
		holohana_injury_effect = { holohana = the_hopping_plateau }
	}
	if = {
		limit = { is_rebel_type = holohana_the_watcher_rebels }
		holohana_injury_effect = { holohana = the_watcher }
	}
	if = {
		limit = { is_rebel_type = holohana_vibranox_rebels }
		holohana_injury_effect = { holohana = vibranox }
	}
}
holohana_clear_rebels_und_flag = { 
	clear_rebels = yes
	add_devastation = -50
	clr_province_flag = holohana_is_here_flag # Clear flag! lets gooo
}
holohana_fleeing_run_into_holohana = {
	if = {
		limit = {
			6234 = { has_province_flag = holohana_fleeing_$holohana$ }
			has_province_flag = holohana_is_here_flag
		}
		6234 = {
			set_variable = {
				which = $holohana$FleeingTimer
				value = 0
			}
			clr_province_flag = holohana_fleeing_$holohana$
		}
	}
}	
holohana_spawn_dependend_on_modifier = {
	if = {
		limit = { has_province_modifier = holohana_modifier_armorollo  }
		holohana_spawn_effect = { holohana = armorollo }
		holohana_rebel_spawn_effect = { holohana = armorollo armorollo_leader = yes }
	}
	if = {
		limit = { has_province_modifier = holohana_modifier_chirping_locust }
		holohana_spawn_effect = { holohana = chirping_locust }
		holohana_rebel_spawn_effect = { holohana = chirping_locust chirping_locust_leader = yes }
	}
	if = {
		limit = { has_province_modifier = holohana_modifier_deceiving_spiked_turtle_flower }
		holohana_spawn_effect = { holohana = deceiving_spiked_turtle_flower }
		holohana_rebel_spawn_effect = { holohana = deceiving_spiked_turtle_flower deceiving_spiked_turtle_flower_leader = yes }
	}
	if = {
		limit = { has_province_modifier = holohana_modifier_devouring_rain }
		holohana_spawn_effect = { holohana = devouring_rain }
		holohana_rebel_spawn_effect = { holohana = devouring_rain devouring_rain_leader = yes }
	}
	if = {
		limit = { has_province_modifier = holohana_modifier_forest_wide_and_dim }
		holohana_spawn_effect = { holohana = forest_wide_and_dim }
		holohana_rebel_spawn_effect = { holohana = forest_wide_and_dim forest_wide_and_dim_leader = yes }
	}
	if = {
		limit = { has_province_modifier = holohana_modifier_gods_distorting_rainbow }
		holohana_spawn_effect = { holohana = gods_distorting_rainbow }
		holohana_rebel_spawn_effect = { holohana = gods_distorting_rainbow gods_distorting_rainbow_leader = yes }
	}
	if = {
		limit = { has_province_modifier = holohana_modifier_great_bone_taker }
		holohana_spawn_effect = { holohana = great_bone_taker }
		holohana_rebel_spawn_effect = { holohana = great_bone_taker great_bone_taker_leader = yes }
	}
	if = {
		limit = { has_province_modifier = holohana_modifier_great_feathered_flower }
		holohana_spawn_effect = { holohana = great_feathered_flower }
		holohana_rebel_spawn_effect = { holohana = great_feathered_flower great_feathered_flower_leader = yes }
	}
	if = {
		limit = { has_province_modifier = holohana_modifier_great_wind }
		holohana_spawn_effect = { holohana = great_wind }
		holohana_rebel_spawn_effect = { holohana = great_wind great_wind_leader = yes }
	}
	if = {
		limit = { has_province_modifier = holohana_modifier_high_cretin }
		holohana_spawn_effect = { holohana = high_cretin }
		holohana_rebel_spawn_effect = { holohana = high_cretin high_cretin_leader = yes }
	}
	if = {
		limit = { has_province_modifier = holohana_modifier_maliu_fanua }
		holohana_spawn_effect = { holohana = maliu_fanua }
		holohana_rebel_spawn_effect = { holohana = maliu_fanua maliu_fanua_leader = yes }
	}
	if = {
		limit = { has_province_modifier = holohana_modifier_mawutt }
		holohana_spawn_effect = { holohana = mawutt }
		holohana_rebel_spawn_effect = { holohana = mawutt mawutt_leader = yes }
	}
	if = {
		limit = { has_province_modifier = holohana_modifier_mlakulon }
		holohana_spawn_effect = { holohana = mlakulon }
		holohana_rebel_spawn_effect = { holohana = mlakulon mlakulon_leader = yes }
	}
	if = {
		limit = { has_province_modifier = holohana_modifier_nauhona }
		holohana_spawn_effect = { holohana = nauhona }
		holohana_rebel_spawn_effect = { holohana = nauhona nauhona_leader = yes }
	}
	if = {
		limit = { has_province_modifier = holohana_modifier_pilpala }
		holohana_spawn_effect = { holohana = pilpala }
		holohana_rebel_spawn_effect = { holohana = pilpala pilpala_leader = yes }
	}
	if = {
		limit = { has_province_modifier = holohana_modifier_raven_kraken }
		holohana_spawn_effect = { holohana = raven_kraken }
		holohana_rebel_spawn_effect = { holohana = raven_kraken raven_kraken_leader = yes }
	}
	if = {
		limit = { has_province_modifier = holohana_modifier_somnambulist }
		holohana_spawn_effect = { holohana = somnambulist }
		holohana_rebel_spawn_effect = { holohana = somnambulist somnambulist_leader = yes }
	}
	if = {
		limit = { has_province_modifier = holohana_modifier_the_hopping_plateau }
		holohana_spawn_effect = { holohana = the_hopping_plateau }
		holohana_rebel_spawn_effect = { holohana = the_hopping_plateau the_hopping_plateau_leader = yes }
	}
	if = {
		limit = { has_province_modifier = holohana_modifier_the_watcher }
		holohana_spawn_effect = { holohana = the_watcher }
		holohana_rebel_spawn_effect = { holohana = the_watcher the_watcher_leader = yes }
	}
	if = {
		limit = { has_province_modifier = holohana_modifier_vibranox }
		holohana_spawn_effect = { holohana = vibranox }
		holohana_rebel_spawn_effect = { holohana = vibranox vibranox_leader = yes }
	}
}
holohana_save_rumbling_flag = {
	clr_province_flag = holohana_rumbling_flag_$holohana$
	if = {
		limit = { has_province_flag = holohana_rumbling_flag_the_watcher }
		set_global_flag = holohana_had_the_watcher_flag_$holohana$
	}
	if = {
		limit = { has_province_flag = holohana_rumbling_flag_forest_wide_and_dim }
		set_global_flag = holohana_had_forest_wide_and_dim_flag_$holohana$
	}
	if = {
		limit = { has_province_flag = holohana_rumbling_flag_mawutt }
		set_global_flag = holohana_had_mawutt_flag_$holohana$
	}
	if = {
		limit = { has_province_flag = holohana_rumbling_flag_pilpala }
		set_global_flag = holohana_had_pilpala_flag_$holohana$
	}
	if = {
		limit = { has_province_flag = holohana_rumbling_flag_nauhona }
		set_global_flag = holohana_had_nauhona_flag_$holohana$
	}
	if = {
		limit = { has_province_flag = holohana_rumbling_flag_devouring_rain }
		set_global_flag = holohana_had_devouring_rain_flag_$holohana$
	}
	if = {
		limit = { has_province_flag = holohana_rumbling_flag_raven_kraken }
		set_global_flag = holohana_had_raven_kraken_flag_$holohana$
	}
	if = {
		limit = { has_province_flag = holohana_rumbling_flag_vibranox }
		set_global_flag = holohana_had_vibranox_flag_$holohana$
	}
	if = {
		limit = { has_province_flag = holohana_rumbling_flag_somnambulist }
		set_global_flag = holohana_had_somnambulist_flag_$holohana$
	}
	if = {
		limit = { has_province_flag = holohana_rumbling_flag_mlakulon }
		set_global_flag = holohana_had_mlakulon_flag_$holohana$
	}
	if = {
		limit = { has_province_flag = holohana_rumbling_flag_high_cretin }
		set_global_flag = holohana_had_high_cretin_flag_$holohana$
	}
	if = {
		limit = { has_province_flag = holohana_rumbling_flag_great_wind }
		set_global_flag = holohana_had_great_wind_flag_$holohana$
	}
	if = {
		limit = { has_province_flag = holohana_rumbling_flag_great_bone_taker }
		set_global_flag = holohana_had_great_bone_taker_flag_$holohana$
	}
	if = {
		limit = { has_province_flag = holohana_rumbling_flag_deceiving_spiked_turtle_flower }
		set_global_flag = holohana_had_deceiving_spiked_turtle_flower_flag_$holohana$
	}
	if = {
		limit = { has_province_flag = holohana_rumbling_flag_the_hopping_plateau }
		set_global_flag = holohana_had_the_hopping_plateau_flag_$holohana$
	}
	if = {
		limit = { has_province_flag = holohana_rumbling_flag_great_feathered_flower }
		set_global_flag = holohana_had_great_feathered_flower_flag_$holohana$
	}
	if = {
		limit = { has_province_flag = holohana_rumbling_flag_maliu_fanua }
		set_global_flag = holohana_had_maliu_fanua_flag_$holohana$
	}
	if = {
		limit = { has_province_flag = holohana_rumbling_flag_gods_distorting_rainbow }
		set_global_flag = holohana_had_gods_distorting_rainbow_flag_$holohana$
	}
	if = {
		limit = { has_province_flag = holohana_rumbling_flag_chirping_locust }
		set_global_flag = holohana_had_chirping_locust_flag_$holohana$
	}
	if = {
		limit = { has_province_flag = holohana_rumbling_flag_armorollo }
		set_global_flag = holohana_had_armorollo_flag_$holohana$
	}
}
holohana_add_back_rumbling_based_on_saved_flag = {
	if = {
		limit = { has_global_flag = holohana_had_the_watcher_flag_$holohana$ }
		set_province_flag = holohana_rumbling_flag_the_watcher
		clr_global_flag = holohana_had_the_watcher_flag_$holohana$
	}
	if = {
		limit = { has_global_flag = holohana_had_forest_wide_and_dim_flag_$holohana$ }
		set_province_flag = holohana_rumbling_flag_forest_wide_and_dim
		clr_global_flag = holohana_had_forest_wide_and_dim_flag_$holohana$
	}
	if = {
		limit = { has_global_flag = holohana_had_mawutt_flag_$holohana$ }
		set_province_flag = holohana_rumbling_flag_mawutt
		clr_global_flag = holohana_had_mawutt_flag_$holohana$
	}
	if = {
		limit = { has_global_flag = holohana_had_pilpala_flag_$holohana$ }
		set_province_flag = holohana_rumbling_flag_pilpala
		clr_global_flag = holohana_had_pilpala_flag_$holohana$
	}
	if = {
		limit = { has_global_flag = holohana_had_nauhona_flag_$holohana$ }
		set_province_flag = holohana_rumbling_flag_nauhona
		clr_global_flag = holohana_had_nauhona_flag_$holohana$
	}
	if = {
		limit = { has_global_flag = holohana_had_devouring_rain_flag_$holohana$ }
		set_province_flag = holohana_rumbling_flag_devouring_rain
		clr_global_flag = holohana_had_devouring_rain_flag_$holohana$
	}
	if = {
		limit = { has_global_flag = holohana_had_raven_kraken_flag_$holohana$ }
		set_province_flag = holohana_rumbling_flag_raven_kraken
		clr_global_flag = holohana_had_raven_kraken_flag_$holohana$
	}
	if = {
		limit = { has_global_flag = holohana_had_vibranox_flag_$holohana$ }
		set_province_flag = holohana_rumbling_flag_vibranox
		clr_global_flag = holohana_had_vibranox_flag_$holohana$
	}
	if = {
		limit = { has_global_flag = holohana_had_somnambulist_flag_$holohana$ }
		set_province_flag = holohana_rumbling_flag_somnambulist
		clr_global_flag = holohana_had_somnambulist_flag_$holohana$
	}
	if = {
		limit = { has_global_flag = holohana_had_mlakulon_flag_$holohana$ }
		set_province_flag = holohana_rumbling_flag_mlakulon
		clr_global_flag = holohana_had_mlakulon_flag_$holohana$
	}
	if = {
		limit = { has_global_flag = holohana_had_high_cretin_flag_$holohana$ }
		set_province_flag = holohana_rumbling_flag_high_cretin
		clr_global_flag = holohana_had_high_cretin_flag_$holohana$
	}
	if = {
		limit = { has_global_flag = holohana_had_great_wind_flag_$holohana$ }
		set_province_flag = holohana_rumbling_flag_great_wind
		clr_global_flag = holohana_had_great_wind_flag_$holohana$
	}
	if = {
		limit = { has_global_flag = holohana_had_great_bone_taker_flag_$holohana$ }
		set_province_flag = holohana_rumbling_flag_great_bone_taker
		clr_global_flag = holohana_had_great_bone_taker_flag_$holohana$
	}
	if = {
		limit = { has_global_flag = holohana_had_deceiving_spiked_turtle_flower_flag_$holohana$ }
		set_province_flag = holohana_rumbling_flag_deceiving_spiked_turtle_flower
		clr_global_flag = holohana_had_deceiving_spiked_turtle_flower_flag_$holohana$
	}
	if = {
		limit = { has_global_flag = holohana_had_the_hopping_plateau_flag_$holohana$ }
		set_province_flag = holohana_rumbling_flag_the_hopping_plateau
		clr_global_flag = holohana_had_the_hopping_plateau_flag_$holohana$
	}
	if = {
		limit = { has_global_flag = holohana_had_great_feathered_flower_flag_$holohana$ }
		set_province_flag = holohana_rumbling_flag_great_feathered_flower
		clr_global_flag = holohana_had_great_feathered_flower_flag_$holohana$
	}
	if = {
		limit = { has_global_flag = holohana_had_maliu_fanua_flag_$holohana$ }
		set_province_flag = holohana_rumbling_flag_maliu_fanua
		clr_global_flag = holohana_had_maliu_fanua_flag_$holohana$
	}
	if = {
		limit = { has_global_flag = holohana_had_gods_distorting_rainbow_flag_$holohana$ }
		set_province_flag = holohana_rumbling_flag_gods_distorting_rainbow
		clr_global_flag = holohana_had_gods_distorting_rainbow_flag_$holohana$
	}
	if = {
		limit = { has_global_flag = holohana_had_chirping_locust_flag_$holohana$ }
		set_province_flag = holohana_rumbling_flag_chirping_locust
		clr_global_flag = holohana_had_chirping_locust_flag_$holohana$
	}
	if = {
		limit = { has_global_flag = holohana_had_armorollo_flag_$holohana$ }
		set_province_flag = holohana_rumbling_flag_armorollo
		clr_global_flag = holohana_had_armorollo_flag_$holohana$
	}
}
holohana_dead_clean_up = {
	event_target:holohana_target_$holohana$ = {
		remove_province_modifier = holohana_modifier_$holohana$
		every_neighbor_province = {
			clr_province_flag = holohana_rumbling_flag_$holohana$
			if = {
				limit = {
					NOT = { has_holohana_rumbling_flag = yes } # this means they had a second one
				}
				remove_province_modifier = holohana_rumbling
			}
		}
		every_empty_neighbor_province = {
			clr_province_flag = holohana_rumbling_flag_$holohana$
			if = {
				limit = {
					NOT = { has_holohana_rumbling_flag = yes } # this means they had a second one
				}
				remove_province_modifier = holohana_rumbling
			}
		}
		add_permanent_province_modifier = {
			name = holohana_dead_body_$holohana$
			duration = -1
		}
		if = {
			limit = {
				NOT = {
					has_holohana_province_modifier = yes
				}
			}
			clr_province_flag = holohana_is_here_flag
			clear_rebels = yes
			if = { #Add back Rumbling
				limit = { has_holohana_rumbling_flag = yes }
				add_permanent_province_modifier = {
					name = holohana_rumbling
					duration = -1
				}
			}
		}
		set_province_flag = holohana_give_credit
		set_province_flag = holohana_give_credit_$holohana$
	}
}
set_holohana_starting_migration_timers = {
	# to update these amounts, keep holohana_events.200-219 in sync too
	holohana_set_years_between_migrations= { holohana = maliu_fanua amount = 9 }
	holohana_set_years_between_migrations= { holohana = the_watcher amount = 9 }
	holohana_set_years_between_migrations= { holohana = forest_wide_and_dim amount = 9 }
	holohana_set_years_between_migrations= { holohana = mawutt amount = 5 }
	holohana_set_years_between_migrations= { holohana = pilpala amount = 2 }
	holohana_set_years_between_migrations= { holohana = nauhona amount = 5 }
	holohana_set_years_between_migrations= { holohana = devouring_rain amount = 9 }
	holohana_set_years_between_migrations= { holohana = raven_kraken amount = 5 }
	holohana_set_years_between_migrations= { holohana = vibranox amount = 5 }
	holohana_set_years_between_migrations= { holohana = somnambulist amount = 9 }
	holohana_set_years_between_migrations= { holohana = mlakulon amount = 5 }
	holohana_set_years_between_migrations= { holohana = high_cretin amount = 5 }
	holohana_set_years_between_migrations= { holohana = great_wind amount = 5 }
	holohana_set_years_between_migrations= { holohana = great_bone_taker amount = 9 }
	holohana_set_years_between_migrations= { holohana = deceiving_spiked_turtle_flower amount = 4 }
	holohana_set_years_between_migrations= { holohana = the_hopping_plateau amount = 5 }
	holohana_set_years_between_migrations= { holohana = great_feathered_flower amount = 9 }
	holohana_set_years_between_migrations= { holohana = gods_distorting_rainbow amount = 5 }
	holohana_set_years_between_migrations= { holohana = chirping_locust amount = 4 }
	holohana_set_years_between_migrations= { holohana = armorollo amount = 9 }

	holohana_progress_migrate_timer = { holohana = maliu_fanua }
	holohana_progress_migrate_timer = { holohana = the_watcher }
	holohana_progress_migrate_timer = { holohana = forest_wide_and_dim }
	holohana_progress_migrate_timer = { holohana = mawutt }
	holohana_progress_migrate_timer = { holohana = pilpala }
	holohana_progress_migrate_timer = { holohana = nauhona }
	holohana_progress_migrate_timer = { holohana = devouring_rain }
	holohana_progress_migrate_timer = { holohana = raven_kraken }
	holohana_progress_migrate_timer = { holohana = vibranox }
	holohana_progress_migrate_timer = { holohana = somnambulist }
	holohana_progress_migrate_timer = { holohana = mlakulon }
	holohana_progress_migrate_timer = { holohana = high_cretin }
	holohana_progress_migrate_timer = { holohana = great_wind }
	holohana_progress_migrate_timer = { holohana = great_bone_taker }
	holohana_progress_migrate_timer = { holohana = deceiving_spiked_turtle_flower }
	holohana_progress_migrate_timer = { holohana = the_hopping_plateau }
	holohana_progress_migrate_timer = { holohana = great_feathered_flower }
	holohana_progress_migrate_timer = { holohana = gods_distorting_rainbow }
	holohana_progress_migrate_timer = { holohana = chirping_locust }
	holohana_progress_migrate_timer = { holohana = armorollo }
}
holohana_remove_rumbling = {
	#Remove Rumbling Cities
	every_neighbor_province = {
		clr_province_flag = holohana_rumbling_flag_$holohana$
		if = {
			limit = {
				NOT = { has_holohana_rumbling_flag = yes } # this means they had a second one
			}
			remove_province_modifier = holohana_rumbling
		}
	}
	#Remove Rumbling Empty
	every_empty_neighbor_province = {
		clr_province_flag = holohana_rumbling_flag_$holohana$
		if = {
			limit = {
				NOT = { has_holohana_rumbling_flag = yes } # this means they had a second one
			}
			remove_province_modifier = holohana_rumbling
		}
	}
}
holohana_move = {
	random_list = {
		50 = {
			trigger = {
				has_saved_event_target = holohana_empty_target_1
			}
			event_target:holohana_empty_target_1 = {
				holohana_fleeing_run_into_holohana = { holohana = $holohana$ }
				add_permanent_province_modifier = {
					name = holohana_modifier_$holohana$
					duration = -1
				}
				set_province_flag = holohana_is_here_flag
				save_global_event_target_as = holohana_target_$holohana$
				remove_province_modifier = holohana_rumbling
			}
		}
		20 = { #Splited to 2
			trigger = {
				has_saved_event_target = holohana_city_target_1
			}
			event_target:holohana_city_target_1 = {
				holohana_fleeing_run_into_holohana = { holohana = $holohana$ }
				if = {
					limit = { is_colony = yes }
					decolonize = THIS
				}
				add_permanent_province_modifier = {
					name = holohana_modifier_$holohana$
					duration = -1
				}
				set_province_flag = holohana_is_here_flag
				save_global_event_target_as = holohana_target_$holohana$
				remove_province_modifier = holohana_rumbling
			}
		}
		30 = { #Otherwise Holohana will have 50/50 to kill migratory tribe as they will only border them
			trigger = {
				has_saved_event_target = holohana_city_target_2
			}
			event_target:holohana_city_target_2 = {
				holohana_fleeing_run_into_holohana = { holohana = $holohana$ }
				if = {
					limit = { is_colony = yes }
					decolonize = THIS
				}
				add_permanent_province_modifier = {
					name = holohana_modifier_$holohana$
					duration = -1
				}
				set_province_flag = holohana_is_here_flag
				save_global_event_target_as = holohana_target_$holohana$
				remove_province_modifier = holohana_rumbling
			}
		}
	}
}
holohana_give_credit_for_kill = {
	clr_province_flag = holohana_give_credit
	if = {
		limit = { has_province_flag = holohana_give_credit_the_watcher }
		holohana_reward_for_kill = { holohana = the_watcher }
	}
	if = {
		limit = { has_province_flag = holohana_give_credit_forest_wide_and_dim }
		holohana_reward_for_kill = { holohana = forest_wide_and_dim }
	}
	if = {
		limit = { has_province_flag = holohana_give_credit_mawutt }
		holohana_reward_for_kill = { holohana = mawutt }
	}
	if = {
		limit = { has_province_flag = holohana_give_credit_pilpala }
		holohana_reward_for_kill = { holohana = pilpala }
	}
	if = {
		limit = { has_province_flag = holohana_give_credit_nauhona }
		holohana_reward_for_kill = { holohana = nauhona }
	}
	if = {
		limit = { has_province_flag = holohana_give_credit_devouring_rain }
		holohana_reward_for_kill = { holohana = devouring_rain }
	}
	if = {
		limit = { has_province_flag = holohana_give_credit_raven_kraken }
		holohana_reward_for_kill = { holohana = raven_kraken }
	}
	if = {
		limit = { has_province_flag = holohana_give_credit_vibranox }
		holohana_reward_for_kill = { holohana = vibranox }
	}
	if = {
		limit = { has_province_flag = holohana_give_credit_somnambulist }
		holohana_reward_for_kill = { holohana = somnambulist }
	}
	if = {
		limit = { has_province_flag = holohana_give_credit_mlakulon }
		holohana_reward_for_kill = { holohana = mlakulon }
	}
	if = {
		limit = { has_province_flag = holohana_give_credit_high_cretin }
		holohana_reward_for_kill = { holohana = high_cretin }
	}
	if = {
		limit = { has_province_flag = holohana_give_credit_great_wind }
		holohana_reward_for_kill = { holohana = credit_great_wind }
	}
	if = {
		limit = { has_province_flag = holohana_give_credit_great_bone_taker }
		holohana_reward_for_kill = { holohana = great_bone_taker }
	}
	if = {
		limit = { has_province_flag = holohana_give_credit_deceiving_spiked_turtle_flower }
		holohana_reward_for_kill = { holohana = deceiving_spiked_turtle_flower }
	}
	if = {
		limit = { has_province_flag = holohana_give_credit_the_hopping_plateau }
		holohana_reward_for_kill = { holohana = the_hopping_plateau }
	}
	if = {
		limit = { has_province_flag = holohana_give_credit_great_feathered_flower }
		holohana_reward_for_kill = { holohana = great_feathered_flower }
	}
	if = {
		limit = { has_province_flag = holohana_give_credit_maliu_fanua }
		holohana_reward_for_kill = { holohana = maliu_fanuat }
	}
	if = {
		limit = { has_province_flag = holohana_give_credit_gods_distorting_rainbow }
		holohana_reward_for_kill = { holohana = gods_distorting_rainbow }
	}
	if = {
		limit = { has_province_flag = holohana_give_credit_chirping_locus }
		holohana_reward_for_kill = { holohana = chirping_locus }
	}
	if = {
		limit = { has_province_flag = holohana_give_credit_armorollo }
		holohana_reward_for_kill = { holohana = armorollo }
	}
}
holohana_reward_for_kill = {
	FROM = { #Country that Killed Holohana
		set_country_flag = holohana_killed_$holohana$
	}
	#Province where Holohana was killed
	clr_province_flag = holohana_give_credit_$holohana$
}
holohana_random_spawn = {
	6234 = {
		random_list = {
			1 = {
				trigger = {
					has_global_flag = holohana_maliu_fanua_not_spawned
				}
				holohana_random_spawn_helper = { holohana = maliu_fanua }
				province_event = { id = holohana_events.2 }
			}
			1 = {
				trigger = {
					has_global_flag = holohana_the_watcher_not_spawned
				}
				holohana_random_spawn_helper = { holohana = the_watcher }
				province_event = { id = holohana_events.4 }
			}
			1 = {
				trigger = {
					has_global_flag = holohana_forest_wide_and_dim_not_spawned
				}
				holohana_random_spawn_helper = { holohana = forest_wide_and_dim }
				province_event = { id = holohana_events.6 }
			}
			1 = {
				trigger = {
					has_global_flag = holohana_mawutt_not_spawned
				}
				holohana_random_spawn_helper = { holohana = mawutt }
				province_event = { id = holohana_events.8 }
			}
			1 = {
				trigger = {
					has_global_flag = holohana_pilpala_not_spawned
				}
				holohana_random_spawn_helper = { holohana = pilpala }
				province_event = { id = holohana_events.10 }
			}
			1 = {
				trigger = {
					has_global_flag = holohana_nauhona_not_spawned
				}
				holohana_random_spawn_helper = { holohana = nauhona }
				province_event = { id = holohana_events.12 }
			}
			1 = {
				trigger = {
					has_global_flag = holohana_devouring_rain_not_spawned
				}
				holohana_random_spawn_helper = { holohana = devouring_rain }
				province_event = { id = holohana_events.14 }
			}
			1 = {
				trigger = {
					has_global_flag = holohana_raven_kraken_not_spawned
				}
				holohana_random_spawn_helper = { holohana = raven_kraken }
				province_event = { id = holohana_events.16 }
			}
			1 = {
				trigger = {
					has_global_flag = holohana_vibranox_not_spawned
				}
				holohana_random_spawn_helper = { holohana = vibranox }
				province_event = { id = holohana_events.18 }
			}
			1 = {
				trigger = {
					has_global_flag = holohana_somnambulist_not_spawned
				}
				holohana_random_spawn_helper = { holohana = somnambulist }
				province_event = { id = holohana_events.20 }
			}
			1 = {
				trigger = {
					has_global_flag = holohana_mlakulon_not_spawned
				}
				holohana_random_spawn_helper = { holohana = mlakulon }
				province_event = { id = holohana_events.22 }
			}
			1 = {
				trigger = {
					has_global_flag = holohana_high_cretin_not_spawned
				}
				holohana_random_spawn_helper = { holohana = high_cretin }
				province_event = { id = holohana_events.24 }
			}
			1 = {
				trigger = {
					has_global_flag = holohana_great_wind_not_spawned
				}
				holohana_random_spawn_helper = { holohana = great_wind }
				province_event = { id = holohana_events.26 }
			}
			1 = {
				trigger = {
					has_global_flag = holohana_great_bone_taker_not_spawned
				}
				holohana_random_spawn_helper = { holohana = great_bone_taker }
				province_event = { id = holohana_events.28 }
			}
			1 = {
				trigger = {
					has_global_flag = holohana_deceiving_spiked_turtle_flower_not_spawned
				}
				holohana_random_spawn_helper = { holohana = deceiving_spiked_turtle_flower }
				province_event = { id = holohana_events.30 }
			}
			1 = {
				trigger = {
					has_global_flag = holohana_the_hopping_plateau_not_spawned
				}
				holohana_random_spawn_helper = { holohana = the_hopping_plateau }
				province_event = { id = holohana_events.32 }
			}
			1 = {
				trigger = {
					has_global_flag = holohana_great_feathered_flower_not_spawned
				}
				holohana_random_spawn_helper = { holohana = great_feathered_flower }
				province_event = { id = holohana_events.34 }
			}
			1 = {
				trigger = {
					has_global_flag = holohana_gods_distorting_rainbow_not_spawned
				}
				holohana_random_spawn_helper = { holohana = gods_distorting_rainbow }
				province_event = { id = holohana_events.36 }
			}
			1 = {
				trigger = {
					has_global_flag = holohana_chirping_locust_not_spawned
				}
				holohana_random_spawn_helper = { holohana = chirping_locust }
				province_event = { id = holohana_events.38 }
			}
			1 = {
				trigger = {
					has_global_flag = holohana_armorollo_not_spawned
				}
				holohana_random_spawn_helper = { holohana = armorollo }
				province_event = { id = holohana_events.40 }
			}
		}
	}
}
holohana_random_spawn_helper = {
	clr_global_flag = holohana_$holohana$_not_spawned
	# find new spot to spawn
	random_province = {
		limit = { is_valid_holohana_spawn = yes }
		save_global_event_target_as = holohana_target_$holohana$
	}
	event_target:holohana_target_$holohana$ = {
		add_permanent_province_modifier = {
			name = holohana_modifier_$holohana$
			duration = -1
		}
	}
}
holohana_stop_spawn_at_start = {
	random_list = {
		1 = {
			trigger = {
				NOT = { has_global_flag = holohana_maliu_fanua_not_spawned }
			}
			set_global_flag = holohana_maliu_fanua_not_spawned
		}
		1 = {
			trigger = {
				NOT = { has_global_flag = holohana_the_watcher_not_spawned }
			}
			set_global_flag = holohana_the_watcher_not_spawned
		}
		1 = {
			trigger = {
				NOT = { has_global_flag = holohana_forest_wide_and_dim_not_spawned }
			}
			set_global_flag = holohana_forest_wide_and_dim_not_spawned
		}
		1 = {
			trigger = {
				NOT = { has_global_flag = holohana_mawutt_not_spawned }
			}
			set_global_flag = holohana_mawutt_not_spawned
		}
		1 = {
			trigger = {
				NOT = { has_global_flag = holohana_pilpala_not_spawned }
			}
			set_global_flag = holohana_pilpala_not_spawned
		}
		1 = {
			trigger = {
				NOT = { has_global_flag = holohana_nauhona_not_spawned }
			}
			set_global_flag = holohana_nauhona_not_spawned
		}
		1 = {
			trigger = {
				NOT = { has_global_flag = holohana_devouring_rain_not_spawned }
			}
			set_global_flag = holohana_devouring_rain_not_spawned
		}
		1 = {
			trigger = {
				NOT = { has_global_flag = holohana_raven_kraken_not_spawned }
			}
			set_global_flag = holohana_raven_kraken_not_spawned
		}
		1 = {
			trigger = {
				NOT = { has_global_flag = holohana_vibranox_not_spawned }
			}
			set_global_flag = holohana_vibranox_not_spawned
		}
		1 = {
			trigger = {
				NOT = { has_global_flag = holohana_somnambulist_not_spawned }
			}
			set_global_flag = holohana_somnambulist_not_spawned
		}
		1 = {
			trigger = {
				NOT = { has_global_flag = holohana_mlakulon_not_spawned }
			}
			set_global_flag = holohana_mlakulon_not_spawned
		}
		1 = {
			trigger = {
				NOT = { has_global_flag = holohana_high_cretin_not_spawned }
			}
			set_global_flag = holohana_high_cretin_not_spawned
		}
		1 = {
			trigger = {
				NOT = { has_global_flag = holohana_great_wind_not_spawned }
			}
			set_global_flag = holohana_great_wind_not_spawned
		}
		1 = {
			trigger = {
				NOT = { has_global_flag = holohana_great_bone_taker_not_spawned }
			}
			set_global_flag = holohana_great_bone_taker_not_spawned
		}
		1 = {
			trigger = {
				NOT = { has_global_flag = holohana_deceiving_spiked_turtle_flower_not_spawned }
			}
			set_global_flag = holohana_deceiving_spiked_turtle_flower_not_spawned
		}
		1 = {
			trigger = {
				NOT = { has_global_flag = holohana_the_hopping_plateau_not_spawned }
			}
			set_global_flag = holohana_the_hopping_plateau_not_spawned
		}
		1 = {
			trigger = {
				NOT = { has_global_flag = holohana_great_feathered_flower_not_spawned }
			}
			set_global_flag = holohana_great_feathered_flower_not_spawned
		}
		1 = {
			trigger = {
				NOT = { has_global_flag = holohana_gods_distorting_rainbow_not_spawned }
			}
			set_global_flag = holohana_gods_distorting_rainbow_not_spawned
		}
		1 = {
			trigger = {
				NOT = { has_global_flag = holohana_chirping_locust_not_spawned }
			}
			set_global_flag = holohana_chirping_locust_not_spawned
		}
		1 = {
			trigger = {
				NOT = { has_global_flag = holohana_armorollo_not_spawned }
			}
			set_global_flag = holohana_armorollo_not_spawned
		}
	}
}
holohana_spawn_at_start = {
	if = {
		limit = { NOT = { has_global_flag = holohana_$holohana$_not_spawned } }
		event_target:holohana_target_$holohana$ = {
			set_province_flag = holohana_is_here_flag
			add_permanent_province_modifier = {
				name = holohana_modifier_$holohana$
				duration = -1
			}
		}
		province_event = { id = holohana_events.$event_id$ }
	}
}
